(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"./src/constants/dataElement.js":function(t,e,n){"use strict";e.a={COLOR_PALETTE:"colorPalette",OPACITY_SLIDER:"opacitySlider",STROKE_THICKNESS_SLIDER:"strokeThicknessSlider",FONT_SIZE_SLIDER:"fontSizeSlider",STYLE_OPTION:"styleOption",STYLE_POPUP:"stylePopup",SCALE_INPUT_CONTAINER:"scaleInputContainer",PRECISION_INPUT_CONTAINER:"precisionInputContainer",ANNOTATION_POPUP:"annotationPopup",AREA_MEASUREMENT_TOOL_BUTTON:"areaMeasurementToolButton",ARROW_TOOL_BUTTON:"arrowToolButton",BOOKMARKS_PANEL:"bookmarksPanel",BOOKMARKS_PANEL_BUTTON:"bookmarksPanelButton",CLOUD_TOOL_BUTTON:"cloudToolButton",COUNT_MEASUREMENT_TOOL_BUTTON:"countMeasurementToolButton",CROP_TOOL_BUTTON:"cropToolButton",DISTANCE_MEASUREMENT_TOOL_BUTTON:"distanceMeasurementToolButton",ELLIPSE_MEASUREMENT_TOOL_BUTTON:"ellipseMeasurementToolButton",ELLIPSE_TOOL_BUTTON:"ellipseToolButton",ERASER_TOOL_BUTTON:"eraserToolButton",FILE_ATTACHMENT_TOOL_BUTTON:"fileAttachmentToolButton",FILE_PICKER_BUTTON:"filePickerButton",FILE_PICKER_HANDLER:"filePickerHandler",FREE_HANDTOOL_BUTTON:"freeHandToolButton",FREETEXT_TOOL_BUTTON:"freeTextToolButton",HIGHLIGHT_TOOL_BUTTON:"highlightToolButton",LAYERS_PANEL:"layersPanel",LAYERS_PANEL_BUTTON:"layersPanelButton",LINE_TOOL_BUTTON:"lineToolButton",LINK_BUTTON:"linkButton",MEASUREMENT_OVERLAY:"measurementOverlay",MEASUREMENT_TOOL_GROUP_BUTTON:"measurementToolGroupButton",PERIMETER_MEASUREMENT_TOOL_BUTTON:"perimeterMeasurementToolButton",POLYGON_TOOL_BUTTON:"polygonToolButton",POLYLINE_TOOL_BUTTON:"polylineToolButton",RECTANGLE_TOOL_BUTTON:"rectangleToolButton",RECTANGULAR_AREA_MEASUREMENT_TOOL_BUTTON:"rectangularAreaMeasurementToolButton",REDACTION_BUTTON:"redactionButton",REDO_BUTTON:"redoButton",RUBBER_STAMP_TOOL_BUTTON:"rubberStampToolButton",SHAPE_TOOL_GROUP_BUTTON:"shapeToolGroupButton",SIGNATURE_TOOL_BUTTON:"signatureToolButton",SQUIGGLY_TOOL_BUTTON:"squigglyToolButton",STAMP_TOOL_BUTTON:"stampToolButton",STICKY_TOOL_BUTTON:"stickyToolButton",STRIKEOUT_TOOL_BUTTON:"strikeoutToolButton",TEXT_HIGHLIGHT_TOOL_BUTTON:"textHighlightToolButton",TEXT_REDACT_TOOL_BUTTON:"textRedactToolButton",TEXT_SELECT_BUTTON:"textSelectButton",TEXT_SQUIGGLY_TOOL_BUTTON:"textSquigglyToolButton",TEXT_STRIKEOUT_TOOL_BUTTON:"textStrikeoutToolButton",TEXT_TOOL_GROUP_BUTTON:"textToolGroupButton",TEXT_UNDERLINE_TOOL_BUTTON:"textUnderlineToolButton",TOOLS_BUTTON:"toolsButton",UNDERLINE_TOOL_BUTTON:"underlineToolButton",UNDO_BUTTON:"undoButton",COPY_TEXT_BUTTON:"copyTextButton"}},"./src/helpers/getPopupPosition.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return l}));var o=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),r=n.n(o),i=n("./src/core/index.js"),a=function(t,e){var n=E(u(t),d(e));return{left:n.left,top:n.top}},l=function(t,e){var n=m(c(t),d(e));return{left:n.left,top:n.top}},u=function(t){var e=T(t),n=e.left,o=e.top,r=e.right,a=e.bottom,l=t.getPageNumber(),u=p(n,o,l),c=p(r,a,l);if(t instanceof window.Annotations.StickyAnnotation){var s=i.default.getZoom(),O=c.x-u.x,d=c.y-u.y;c={x:u.x+O/s*1.2,y:u.y+d/s*1.2}}return{topLeft:u,bottomRight:c}},T=function(t){var e=t.getRect(),n=e.x1,o=e.y1,r=e.x2,a=e.y2,l=t instanceof window.Annotations.StickyAnnotation,u=t.Width,T=i.default.getCompleteRotation(t.PageNumber);if(1===T){var c=[a,o];o=c[0],a=c[1],l&&(o-=u,a-=u)}else if(2===T){var s=[r,n];n=s[0],r=s[1];var O=[a,o];o=O[0],a=O[1],l&&(o-=u,a-=u,n-=u,r-=u)}else if(3===T){var p=[r,n];n=p[0],r=p[1],l&&(n-=u,r-=u)}return{left:n,top:o,right:r,bottom:a}},c=function(t){var e=s(t),n=e.startPageIndex,o=e.endPageIndex,r=O(t,n,o),a=r.left,l=r.right,u=r.top,T=r.bottom,c=p(a,u,n),d=p(l,T,o);if(i.default.getRotation()>1){var E=c;c=d,d=E}return{topLeft:c,bottomRight:d}},s=function(t){var e=Object.keys(t).map((function(t){return Number(t)}));return{startPageIndex:Math.min.apply(Math,r()(e)),endPageIndex:Math.max.apply(Math,r()(e))}},O=function(t,e,n){var o=function(){var o=t[e][0].y3,r=t[n];return{top:o,bottom:r[r.length-1].y1}}(),r=o.top,i=o.bottom,a=function(){var e,n;return Object.keys(t).forEach((function(o){t[o].forEach((function(t){var o=t.x1,r=t.x2;(!e||o<e)&&(e=o),(!n||r>n)&&(n=r)}))})),{left:e,right:n}}();return{left:a.left,top:r,bottom:i,right:a.right}},p=function(t,e,n){return i.default.getDisplayModeObject().pageToWindow({x:t,y:e},n)},d=function(t){var e=t.current.getBoundingClientRect();return{width:e.width,height:e.height}},E=function(t,e){var n=f(t,e,350);return{left:_(t,e),top:n}},m=function(t,e){var n=f(t,e,50);return{left:_(t,e),top:n}},_=function(t,e){var n=t.topLeft,o=t.bottomRight,r=e.height,a=e.width,l=i.default.getScrollViewElement(),u=l.scrollLeft,T=l.scrollTop,c=l.getBoundingClientRect(),s=n.y-T-c.top,O=window.innerHeight-s-c.top,p=(n.x+o.x)/2-u,d=p-a/2;return d<0?d=s<r&&O<r+32?p+24:0:d+a+c.top<window.innerWidth?d=s<r&&O<r+32?p+24:p-a/2:d+a+c.top>window.innerWidth&&(d=s<r&&O<r+32?p-a-24:window.innerWidth-a),Math.round(d)},f=function(t,e,n){var o,r=t.topLeft,a=t.bottomRight,l=e.height,u=i.default.getScrollViewElement(),T=u.getBoundingClientRect(),c=(T.left,u.scrollLeft,T.left,u.scrollLeft,T.width,T.top+u.scrollTop),s=T.top+u.scrollTop+T.height,O=r.y-13,p=a.y+13,d=r.y-u.scrollTop-T.top,E=window.innerHeight-d-T.top;return o=p+n<s?d<l&&E<l+32?p/2:p:O-n>c?O-l:p+l<s?p:O-l>c?O-l:c+5,Math.round(o-u.scrollTop)}},"./src/lumin-components/CustomizablePopup/index.js":function(t,e,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),r=n("./src/redux/selectors/index.js"),i=n("./node_modules/@babel/runtime/helpers/extends.js"),a=n.n(i),l=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),u=n.n(l),T=n("./node_modules/react/index.js"),c=n.n(T),s=n("./node_modules/prop-types/index.js"),O=n.n(s),p=n("./src/lumin-components/ToolButton/index.js"),d=n("./src/lumin-components/ToolGroupButton/index.js"),E=n("./src/lumin-components/ToggleElementButton/index.js"),m=n("./src/lumin-components/ActionButton/index.js"),_=n("./src/lumin-components/StatefulButton/index.js"),f=n("./src/lumin-components/CustomElement/index.js");function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L={dataElement:O.a.string.isRequired,children:O.a.arrayOf(O.a.any).isRequired,getItems:O.a.func.isRequired},g=function(t){var e=t.dataElement,n=t.children,o=(0,t.getItems)(e),r=c.a.Children.toArray(n);return o.map((function(t,e){var n=t.dataElement,o=t.type,i=t.hidden,l="".concat(o,"-").concat(n||e),u=null===i||void 0===i?void 0:i.map((function(t){return"hide-in-".concat(t)})).join(" "),T=r.find((function(t){return t.props.dataElement===n}));if(!T){var s=N(N({},t),{},{mediaQueryClassName:u});"toolButton"===o&&(T=c.a.createElement(p.a,s)),"toolGroupButton"===o&&(T=c.a.createElement(d.a,s)),"toggleElementButton"===o&&(T=c.a.createElement(E.a,s)),"actionButton"===o&&(T=c.a.createElement(m.a,s)),"statefulButton"===o&&(T=c.a.createElement(_.a,s)),"customElement"===o&&(T=c.a.createElement(f.a,s)),"spacer"!==o&&"divider"!==o||(T=c.a.createElement("div",a()({className:"".concat(o," ").concat(u)},s)))}return T?c.a.cloneElement(T,{key:l}):null}))};g.propTypes=L;var P=g;e.a=Object(o.c)((function(t){return{getItems:function(e){return r.a.getPopupItems(t,e)}}}))(P)},"./src/lumin-components/TextPopup/index.js":function(t,e,n){"use strict";n.r(e);var o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),r=n.n(o),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=n.n(i),l=n("./node_modules/react/index.js"),u=n.n(l),T=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/classnames/index.js"),s=n.n(c),O=n("./src/lumin-components/ActionButton/index.js"),p=n("./src/lumin-components/CustomizablePopup/index.js"),d=n("./src/core/index.js"),E=n("./src/helpers/getPopupPosition.js"),m=n("./src/helpers/createTextAnnotationAndSelect.js"),_=n("./src/helpers/copyText.js"),f=n("./src/redux/actions/index.js"),B=n("./src/redux/selectors/index.js"),N=n("./src/constants/dataElement.js");function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P=function(){var t,e,n,o=Object(T.f)((function(t){return[B.a.isElementDisabled(t,"textPopup"),B.a.isElementOpen(t,"textPopup"),B.a.getPopupItems(t,"textPopup"),B.a.getCurrentDocument(t),B.a.isPageEditMode(t)]}),T.d),i=a()(o,5),c=i[0],L=i[1],P=i[2],U=i[3],b=i[4],h=Object(T.f)((function(t){return[B.a.isElementDisabled(t,N.a.HIGHLIGHT_TOOL_BUTTON),B.a.isElementDisabled(t,N.a.TEXT_UNDERLINE_TOOL_BUTTON),B.a.isElementDisabled(t,N.a.TEXT_SQUIGGLY_TOOL_BUTTON),B.a.isElementDisabled(t,N.a.TEXT_STRIKEOUT_TOOL_BUTTON)]}),T.d),j=a()(h,4),y=j[0],x=j[1],R=j[2],A=j[3],S=Object(T.e)(),I=Object(l.useState)({left:0,top:0}),v=a()(I,2),w=v[0],C=v[1],M=U&&(null===(t=U.documentStatus)||void 0===t?void 0:t.isPremium),k=Object(l.useRef)();e=k,n=function(){S(f.a.closeElement("textPopup"))},Object(l.useEffect)((function(){var t=function(t){e.current&&!e.current.contains(t.target)&&n(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e,n]),Object(l.useEffect)((function(){L&&S(f.a.closeElements(["annotationPopup","contextMenuPopup"]))}),[S,L]),Object(l.useEffect)((function(){var t=d.default.getTool("TextSelect"),e=function(t,e){k.current&&P.length>0&&(C(Object(E.b)(e,k)),S(f.a.openElement("textPopup")))};return t.addEventListener("selectionComplete",e),function(){return t.removeEventListener("selectionComplete",e)}}),[S,P]);var D=s()(r()({},"TextPopup__ActionButton--disable",!M));return c?null:u.a.createElement("div",{className:s()({Popup:!0,TextPopup:!0,open:L,closed:!L}),"data-element":"textPopup",ref:k,style:g({},w),onClick:function(){M&&S(f.a.closeElement("textPopup"))}},u.a.createElement(p.a,{dataElement:"textPopup"},!b&&u.a.createElement(O.a,{dataElement:N.a.STICKY_TOOL_BUTTON,title:"annotation.highlightNote",icon:"comment",onClick:function(){Object(m.a)(S,window.Annotations.TextHighlightAnnotation,!0),S(f.a.closeElement("rightPanel"))}}),u.a.createElement(O.a,{dataElement:N.a.COPY_TEXT_BUTTON,title:"action.copy",icon:"copy",onClick:_.a}),!y&&u.a.createElement(O.a,{dataElement:N.a.TEXT_HIGHLIGHT_TOOL_BUTTON,title:"annotation.highlight",icon:"basic-highlight",className:D,onClick:function(){Object(m.a)(S,window.Annotations.TextHighlightAnnotation)}}),!x&&u.a.createElement(O.a,{dataElement:N.a.TEXT_UNDERLINE_TOOL_BUTTON,title:"annotation.underline",icon:"annotation-underline",className:D,onClick:function(){Object(m.a)(S,window.Annotations.TextUnderlineAnnotation)}}),!R&&u.a.createElement(O.a,{dataElement:N.a.TEXT_SQUIGGLY_TOOL_BUTTON,title:"annotation.squiggly",icon:"annotation-squiggly",className:D,onClick:function(){Object(m.a)(S,window.Annotations.TextSquigglyAnnotation)}}),!A&&u.a.createElement(O.a,{dataElement:N.a.TEXT_STRIKEOUT_TOOL_BUTTON,title:"annotation.strikeout",icon:"annotation-strikeout",className:D,onClick:function(){Object(m.a)(S,window.Annotations.TextStrikeoutAnnotation)}})))};e.default=P}}]);