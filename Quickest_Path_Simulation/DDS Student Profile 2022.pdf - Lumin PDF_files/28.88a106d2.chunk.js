(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"./node_modules/react-measure/dist/index.esm.js":function(e,t,n){"use strict";var a=n("./node_modules/@babel/runtime/helpers/esm/extends.js"),s=n("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),r=n("./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),o=n("./node_modules/react/index.js"),i=n("./node_modules/prop-types/index.js"),l=n.n(i),c=n("./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js"),u=["client","offset","scroll","bounds","margin"];function d(e){var t=[];return u.forEach((function(n){e[n]&&t.push(n)})),t}function m(e,t){var n={};if(t.indexOf("client")>-1&&(n.client={top:e.clientTop,left:e.clientLeft,width:e.clientWidth,height:e.clientHeight}),t.indexOf("offset")>-1&&(n.offset={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}),t.indexOf("scroll")>-1&&(n.scroll={top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}),t.indexOf("bounds")>-1){var a=e.getBoundingClientRect();n.bounds={top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:a.width,height:a.height}}if(t.indexOf("margin")>-1){var s=getComputedStyle(e);n.margin={top:s?parseInt(s.marginTop):0,right:s?parseInt(s.marginRight):0,bottom:s?parseInt(s.marginBottom):0,left:s?parseInt(s.marginLeft):0}}return n}function p(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||window}var h=function(e){return function(t){var n,i;return i=n=function(n){function i(){for(var t,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=n.call.apply(n,[this].concat(s))||this).state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},t._animationFrameID=null,t._resizeObserver=null,t._node=null,t._window=null,t.measure=function(n){var a=m(t._node,e||d(t.props));n&&(a.entry=n[0].contentRect),t._animationFrameID=t._window.requestAnimationFrame((function(){null!==t._resizeObserver&&(t.setState({contentRect:a}),"function"===typeof t.props.onResize&&t.props.onResize(a))}))},t._handleRef=function(e){null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.unobserve(t._node),t._node=e,t._window=p(t._node);var n=t.props.innerRef;n&&("function"===typeof n?n(t._node):n.current=t._node),null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.observe(t._node)},t}Object(r.a)(i,n);var l=i.prototype;return l.componentDidMount=function(){this._resizeObserver=null!==this._window&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new c.default(this.measure),null!==this._node&&(this._resizeObserver.observe(this._node),"function"===typeof this.props.onResize&&this.props.onResize(m(this._node,e||d(this.props))))},l.componentWillUnmount=function(){null!==this._window&&this._window.cancelAnimationFrame(this._animationFrameID),null!==this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},l.render=function(){var e=this.props,n=(e.innerRef,e.onResize,Object(s.a)(e,["innerRef","onResize"]));return Object(o.createElement)(t,Object(a.a)({},n,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},i}(o.Component),n.propTypes={client:l.a.bool,offset:l.a.bool,scroll:l.a.bool,bounds:l.a.bool,margin:l.a.bool,innerRef:l.a.oneOfType([l.a.object,l.a.func]),onResize:l.a.func},i}}()((function(e){var t=e.measure,n=e.measureRef,a=e.contentRect;return(0,e.children)({measure:t,measureRef:n,contentRect:a})}));h.displayName="Measure",h.propTypes.children=l.a.func,t.a=h},"./src/lumin-components/SignatureModalLumin/index.js":function(e,t,n){"use strict";n.r(t);var a=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/react-router/esm/react-router.js"),r=n("./node_modules/recompose/dist/Recompose.esm.js"),o=n("./node_modules/react-i18next/dist/es/withTranslation.js"),i=n("./src/redux/actions/index.js"),l=n("./src/redux/selectors/index.js"),c=n("./node_modules/@babel/runtime/regenerator/index.js"),u=n.n(c),d=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),h=n.n(p),g=n("./node_modules/@babel/runtime/helpers/createClass.js"),f=n.n(g),v=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),b=n.n(v),S=n("./node_modules/@babel/runtime/helpers/inherits.js"),E=n.n(S),y=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),T=n.n(y),_=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),R=n.n(_),N=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),w=n.n(N),C=n("./node_modules/react/index.js"),x=n.n(C),j=n("./node_modules/prop-types/index.js"),k=n.n(j),M=n("./node_modules/react-measure/dist/index.esm.js"),A=n("./src/lumin-components/ActionButton/index.js"),O=n("./src/lumin-components/ButtonMaterial/index.js"),U=n("./src/lumin-components/Icomoon/index.js"),P=n("./src/lumin-components/MaterialPopper/index.js"),D=n("./node_modules/@material-ui/core/esm/Button/Button.js"),F=n("./node_modules/@material-ui/core/esm/Grid/Grid.js"),z=n("./src/lumin-components/ToolStylePalette/index.js"),I=n("./node_modules/@material-ui/core/esm/MenuList/MenuList.js"),L=n("./node_modules/@material-ui/core/esm/MenuItem/MenuItem.js"),B=n("./src/core/index.js"),G=n("./src/constants/socketConstant.js"),W=n("./src/utils/index.js"),X=n("./src/helpers/getClassName.js"),H=n("./src/constants/defaultTool.js"),q=n("./src/constants/plan.js"),J=n("./src/constants/lumin-common.js"),Y=n("./src/constants/documentConstants.js"),K=n("./src/constants/documentType.js"),V=n("./src/socket/index.js");function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var s=R()(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return T()(this,n)}}var ee=0,te=1,ne=2,ae=new RegExp("image/"),se="signature-item-inactive",re=[{value:"DrSugiyama",name:"Dr Sugiyama"},{value:"AlexBrush",name:"Alex Brush"},{value:"DancingScript",name:"Dancing Script"},{value:"ArchitectsDaughter",name:"Architects Daughter"},{value:"HomemadeApple",name:"Homemade Apple"},{value:"RockSalt",name:"Rock Salt"}],oe={isDisabled:k.a.bool,isOpen:k.a.bool,closeElement:k.a.func.isRequired,closeElements:k.a.func.isRequired,activeToolStyles:k.a.object,openToast:k.a.func,currentUser:k.a.object,history:k.a.object,organizations:k.a.object},ie=function(e){E()(n,e);var t=$(n);function n(e){var a;return h()(this,n),a=t.call(this,e),w()(b()(a),"handleSignatureAdded",(function(e){a.signatureAdded&&"AnnotationCreateSignature"===e.ToolName&&(a.signatureAdded=!1,e.resourcesLoaded().then((function(){a.addNewSignatureToDb(e.ImageData)})))})),w()(b()(a),"locationSelected",(function(e){a.coordinates={x:e.x,y:e.y}})),w()(b()(a),"onAnnotationChanged",(function(e,t,n){var s=e[0];if(a.coordinates&&"add"===t&&s.Subject===Y.g.SIGNATURE&&(null===n||void 0===n||!n.imported)){var r=B.default.getAnnotationManager();s.X=a.coordinates.x-s.Width/2,s.Y=a.coordinates.y-s.Height/2,r.redrawAnnotation(s)}})),w()(b()(a),"addNewSignatureToDb",(function(e){var t=a.props.currentUser;V.a.emit(G.a.ADD_NEW_SIGNATURE,{_id:t._id,xfdf:e})})),w()(b()(a),"setUpSignatureCanvas",(function(){if(a.canvas.current){var e=a.canvas.current;a.signatureTool.setSignatureCanvas(e);var t=window.utils.getCanvasMultiplier();e.getContext("2d").scale(t,t),a.isCanvasReady=!0}})),w()(b()(a),"handleFinishDrawing",function(){var e=m()(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.target===t.currentTarget,!e.t0){e.next=5;break}return e.next=4,a.signatureTool.isEmptySignature();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}a.forceUpdate();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w()(b()(a),"closeModal",(function(){a.clearCanvas(),a.signatureTool.clearLocation(),a.props.closeElement("signatureModal"),B.default.setToolMode(H.a)})),w()(b()(a),"clearCanvas",(function(){a.signatureTool.clearSignatureCanvas(),a.setState(a.initialState)})),w()(b()(a),"clearSignature",(function(){switch(a.state.selectedSignatureType){case ee:a.signatureTool.clearSignatureCanvas(),a.setState(a.initialState,(function(){return a.forceUpdate()}));break;case te:a.setState({imageSignature:!1});break;case ne:a.setState({textSignature:""})}})),w()(b()(a),"createSignature",m()(u.a.mark((function e(){var t,n,s,r,o,i,l,c,d,m,p,h,g,f,v,b,S,E,y,T;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.closeElement,s=t.activeToolStyles,r=a.state,o=r.selectedSignatureType,i=r.textSignature,l=r.signatureFont,e.t0=o,e.next=e.t0===ee?5:e.t0===te?14:e.t0===ne?25:46;break;case 5:return e.next=7,a.signatureTool.isEmptySignature();case 7:if(e.sent){e.next=13;break}return e.next=10,a.signatureTool.setSignature(a.canvas.current.toDataURL());case 10:a.signatureAdded=!0,a.signatureTool.showPreview(),n("signatureModal");case 13:return e.abrupt("break",47);case 14:return a.clearCanvas(),a.signatureTool.clearLocation(),m=null===(c=a.imageSignatureRef)||void 0===c?void 0:c.src.split(";")[2],p=null===(d=a.imageSignatureRef)||void 0===d?void 0:d.src.split(";")[3],h="".concat(m,";").concat(p),e.next=21,a.signatureTool.setSignature(h);case 21:return a.signatureAdded=!0,a.signatureTool.showPreview(),n("signatureModal"),e.abrupt("break",47);case 25:if(""!==i){e.next=27;break}return e.abrupt("return");case 27:return a.clearCanvas(),a.signatureTool.clearLocation(),g=window.utils.getCanvasMultiplier(),f=document.createElement("canvas"),(v=35*i.length)>a.canvas.current.width?(b=a.canvas.current.width/a.canvas.current.height,f.width=v*g,f.height=f.width/b*g):(f.width=a.canvas.current.width*g,f.height=a.canvas.current.height*g),S=s.StrokeColor,E=s.Opacity,y=s.StrokeThickness,(T=f.getContext("2d")).textAlign="center",T.textBaseline="middle",T.fillStyle="rgba(".concat(S.R,",").concat(S.G,",").concat(S.B,",").concat(E,")"),T.font="".concat(a.convertPtToFontWeight(y)," ").concat(50*g,"px ").concat(l),T.fillText(i,f.width/2,f.height/2),e.next=42,a.signatureTool.setSignature(f.toDataURL());case 42:return a.signatureAdded=!0,a.signatureTool.showPreview(),n("signatureModal"),e.abrupt("break",47);case 46:return e.abrupt("break",47);case 47:case"end":return e.stop()}}),e)})))),w()(b()(a),"openStylePalette",(function(){a.setState((function(e){return{openStyle:!e.openStyle}}))})),w()(b()(a),"changeSignatureType",(function(e){a.setState(Z(Z({},a.initialState),{},{selectedSignatureType:e})),a.handleClose()})),w()(b()(a),"_handlePickupFile",(function(){a.inputRef.click()})),w()(b()(a),"_handleUploadFile",(function(e){var t=a.props.openToast,n=e.target.files[0];if(ae.test(n.type))if(n.size>2621440){t({type:J.A.ERROR,message:"Please upload an image less than 2.5 MB"})}else{var s=new FileReader;s.readAsDataURL(n),s.onload=function(){a.setState({imageSignature:!0}),a.imageSignatureRef.src="data:".concat(n.type,";charset=utf-8;").concat(s.result)}}else t({type:J.A.ERROR,message:"Please upload an image"});e.target.value=null})),w()(b()(a),"setTextSignature",(function(e){a.setState({textSignature:e.target.value})})),w()(b()(a),"changeFont",(function(e){a.setState({signatureFont:e}),a.handleCloseChangeFontPopper()})),w()(b()(a),"convertPtToFontWeight",(function(e){return e<6?"normal":"bold"})),w()(b()(a),"handleClose",(function(){a.setState({openStyle:!1})})),w()(b()(a),"changeFontPopper",(function(){a.setState((function(e){return{openChangeFont:!e.openChangeFont}}))})),w()(b()(a),"handleCloseChangeFontPopper",(function(){a.setState({openChangeFont:!1})})),a.canvas=x.a.createRef(),a.MAXIMUM_NUMBER_SIGNATURE=J.x.FREE_PLAN,a.initialState={canClear:!1,openStyle:!1,selectedSignatureType:ee,imageSignature:!1,signatureFont:re[0].value,textSignature:"",dimension:{},openChangeFont:!1,isDisabledButton:!0},a.state=a.initialState,a.signatureTool=B.default.getTool("AnnotationCreateSignature"),a.signatureAdded=!1,a.coordinates=null,a.anchorEl=x.a.createRef(),a}return f()(n,[{key:"componentDidMount",value:function(){this.setUpSignatureCanvas(),this.signatureTool.addEventListener("annotationAdded",this.handleSignatureAdded),this.signatureTool.addEventListener("locationSelected",this.locationSelected),B.default.addEventListener("annotationChanged",this.onAnnotationChanged)}},{key:"componentDidUpdate",value:function(){var e=m()(u.a.mark((function e(t,n){var a,s,r,o,i,l,c,d,m,p,h,g,f,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.dimension!==this.state.dimension&&this.state.dimension.height&&this.state.dimension.width&&this.signatureTool.resizeCanvas(),!t.isDisabled||this.props.isDisabled||this.isCanvasReady||this.setUpSignatureCanvas(),!t.isOpen&&this.props.isOpen&&(B.default.setToolMode("AnnotationCreateSignature"),this.setState(this.initialState),this.signatureTool.clearSignatureCanvas(),this.signatureTool.clearLocation(),this.props.closeElements(["printModal","loadingModal","progressModal","errorModal"])),!this.state.openStyle||t.activeToolStyles===this.props.activeToolStyles){e.next=21;break}if(this.signatureTool.annot&&!(this.signatureTool.annot instanceof window.Annotations.StampAnnotation)){e.next=6;break}return e.abrupt("return");case 6:return a=this.props.activeToolStyles,s=a.StrokeColor,r=a.StrokeThickness,o=a.Opacity,this.signatureTool.annot.StrokeColor=s,this.signatureTool.annot.StrokeThickness=r,this.signatureTool.annot.Opacity=o,e.next=12,this.signatureTool.isEmptySignature();case 12:if(e.sent){e.next=21;break}(i=this.canvas.current.getContext("2d")).clearRect(0,0,this.canvas.current.width,this.canvas.current.height),i.lineCap="round",i.lineJoin="round",i.strokeStyle=s.toHexString(),i.lineWidth=3*this.signatureTool.annot.StrokeThickness,i.globalAlpha=this.signatureTool.annot.Opacity,i.stroke();case 21:l=this.props,c=l.currentUser,d=l.organizations,m=c?Object(W.w)(c,d.data):"tour",e.t0=m,e.next=e.t0===q.k.FREE?26:e.t0===q.k.FREE_TRIAL||e.t0===q.k.FREE_TRIAL_30||e.t0===q.k.PERSONAL||e.t0===q.k.PROFESSIONAL?28:30;break;case 26:return this.MAXIMUM_NUMBER_SIGNATURE=J.x.FREE_PLAN,e.abrupt("break",31);case 28:return this.MAXIMUM_NUMBER_SIGNATURE=J.x.PREMIUM_PLAN,e.abrupt("break",31);case 30:return e.abrupt("break",31);case 31:if(p=c&&c.signatures?c.signatures.length:0,!(this.props.isOpen&&p<this.MAXIMUM_NUMBER_SIGNATURE)){e.next=47;break}h=this.state,g=h.textSignature,f=h.imageSignature,v=h.selectedSignatureType,e.t1=v,e.next=e.t1===te?37:e.t1===ne?39:e.t1===ee?41:46;break;case 37:return f&&this.setState({isDisabledButton:!1}),e.abrupt("break",47);case 39:return Boolean(g)&&this.setState({isDisabledButton:!1}),e.abrupt("break",47);case 41:return e.next=43,this.signatureTool.isEmptySignature();case 43:if(e.sent){e.next=45;break}this.setState({isDisabledButton:!1});case 45:case 46:return e.abrupt("break",47);case 47:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.signatureTool.removeEventListener("annotationAdded",this.handleSignatureAdded),this.signatureTool.removeEventListener("locationSelected",this.locationSelected)}},{key:"render",value:function(){var e=this,t=this.state,n=t.openStyle,a=t.selectedSignatureType,s=t.imageSignature,r=t.signatureFont,o=t.textSignature,i=t.isDisabledButton,l=this.props,c=l.isDisabled,u=l.activeToolStyles,d=l.currentUser,m=u.StrokeColor,p=u.Opacity,h=u.StrokeThickness,g=Object(X.a)("Modal SignatureModal",this.props),f=function(e,t){return a===e?"item-active-".concat(t):""},v=n?"cell-border":"",b=u?Object(W.q)(u):J.f.SECONDARY,S=d&&d.signatures?d.signatures.length:0;return c?null:x.a.createElement("div",{className:g,onClick:this.closeModal},x.a.createElement("div",{className:"container",onClick:function(e){return e.stopPropagation()},onMouseUp:this.handleFinishDrawing},x.a.createElement("div",{className:"header"},x.a.createElement("div",{className:"header-label-group"},x.a.createElement("span",{className:"header-label"},"Create New Signature"," ",x.a.createElement("span",{className:"".concat(S>=this.MAXIMUM_NUMBER_SIGNATURE?"error":""," header-label")},"(".concat(S,"/").concat(S>this.MAXIMUM_NUMBER_SIGNATURE?S:this.MAXIMUM_NUMBER_SIGNATURE,")"))),x.a.createElement(A.a,{dataElement:"signatureModalCloseButton",className:"close_button",title:"action.close",icon:"cross",onClick:this.closeModal})),x.a.createElement("div",{id:"alert"},S>=this.MAXIMUM_NUMBER_SIGNATURE?x.a.createElement(x.a.Fragment,null,x.a.createElement("span",null,"You have added ".concat(S," of ").concat(this.MAXIMUM_NUMBER_SIGNATURE," available signatures. ")),!(S===this.MAXIMUM_NUMBER_SIGNATURE&&this.MAXIMUM_NUMBER_SIGNATURE===J.x.PREMIUM_PLAN)&&x.a.createElement(x.a.Fragment,null,x.a.createElement("span",{className:"upgrade-message",onClick:function(){return e.props.history.push("/plans")}},"Upgrade"),x.a.createElement("span",null," now to add more"))):"")),x.a.createElement("div",{className:"signature-menu"},x.a.createElement("div",{className:"signature-category"},x.a.createElement("div",{className:"signature-item  ".concat(a!==ee?se:"")},x.a.createElement(O.a,{"aria-label":"Draw",className:"segmented_button ".concat(a!==ee?"inactive":""),onClick:function(){return e.changeSignatureType(ee)}},x.a.createElement(U.a,{className:"freeline",size:16}),x.a.createElement("span",{className:"label"},"Draw")),x.a.createElement("div",{className:"underline ".concat(f(ee,1))})),x.a.createElement("div",{className:"signature-item  ".concat(a!==te?se:"")},x.a.createElement(O.a,{"aria-label":"Upload Image",className:"segmented_button ".concat(a!==te?"inactive":""),onClick:function(){return e.changeSignatureType(te)}},x.a.createElement(U.a,{className:"image",size:16}),x.a.createElement("span",{className:"label"},"Image")),x.a.createElement("div",{className:"underline ".concat(f(te,2))})),x.a.createElement("div",{className:"signature-item  ".concat(a!==ne?se:"")},x.a.createElement(O.a,{"aria-label":"Type",className:"segmented_button ".concat(a!==ne?"inactive":""),onClick:function(){return e.changeSignatureType(ne)}},x.a.createElement(U.a,{className:"text",size:16}),x.a.createElement("span",{className:"label"},"Type")),x.a.createElement("div",{className:"underline underline-item-3 ".concat(f(ne,3))})))),x.a.createElement("div",{className:"choose-style-wrapper"},a!==te?x.a.createElement("div",{className:"choose-style"},x.a.createElement("div",{className:"label"},"Change style"),x.a.createElement("div",{className:"wrapper-button",ref:function(t){return e.chooseRef=t}},x.a.createElement(D.a,{disableRipple:!0,className:"ChooseStyle__btn square ".concat(n?"signature-style-btn-active":""),onClick:this.openStylePalette},x.a.createElement(F.a,{item:!0,className:"ChooseStyle__btn-item"},x.a.createElement("div",{className:"cell ".concat(v),style:{backgroundColor:b}})),x.a.createElement(F.a,{item:!0,className:"ChooseStyle__btn-item"},x.a.createElement(U.a,{className:"dropdown change-style-dropdown",size:16})))),a===ne&&x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{className:"change-font",onClick:this.changeFontPopper},x.a.createElement("div",{className:"label"},"Change font"),x.a.createElement("div",{ref:this.anchorEl},x.a.createElement(U.a,{className:"dropdown change-font-dropdown ".concat(this.state.openChangeFont?"change-font-dropdown__active":""),size:16}))))):x.a.createElement("div",{className:"choose-style-none"}),!i&&x.a.createElement(O.a,{"aria-label":"Draw",className:"clear-canvas",onClick:this.clearSignature},x.a.createElement(U.a,{className:"trash clear-canvas-icon",size:24}))),x.a.createElement(M.a,{bounds:!0,onResize:function(t){var n=t.bounds;return e.setState({dimension:n})}},(function(t){var n=t.measureRef;return x.a.createElement("div",{className:"signature ".concat(a===te?"signature-image-bg":""),ref:n},x.a.createElement("canvas",{className:"signature-canvas ".concat(a!==ee?"hidden":""),ref:e.canvas,onMouseUp:e.handleFinishDrawing,onTouchEnd:e.handleFinishDrawing}),a===ee&&i&&x.a.createElement("div",{className:"signature-background"},x.a.createElement("div",{className:"signature-sign-here"},x.a.createElement(U.a,{className:"signature",size:16})," Draw your signature here")),a===te&&x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{className:"signature-uploadfile",onClick:function(){return e._handlePickupFile()}},x.a.createElement("div",{className:"upload-text ".concat(s?"hidden":"")},x.a.createElement(U.a,{className:"upload-btn",size:16})," ",x.a.createElement("span",{className:"label-underline"},"Upload Image")),x.a.createElement("input",{type:"file",id:"file",ref:function(t){return e.inputRef=t},style:{display:"none"},onChange:function(t){e._handleUploadFile(t)},accept:"\n                        ".concat(K.c.PNG,",\n                        ").concat(K.c.JPG,",\n                        ").concat(K.c.JPEG,",\n                        ")}),x.a.createElement("div",{className:"image-signature-wrapper ".concat(s?"":"hidden")},x.a.createElement("img",{alt:"image-signature",className:"image-signature",ref:function(t){return e.imageSignatureRef=t}})))),a===ne&&x.a.createElement("div",{className:"signature-text"},x.a.createElement("input",{type:"text",placeholder:"Type Here",style:{fontFamily:'"'.concat(r,'", cursive'),fontWeight:e.convertPtToFontWeight(h),color:"rgba(".concat(m.R,",").concat(m.G,",").concat(m.B,",").concat(p,")")},onChange:function(t){return e.setTextSignature(t)},value:o})))})),x.a.createElement("div",{className:"footer"},x.a.createElement(O.a,{className:"signature-cancel",onClick:this.closeModal},x.a.createElement("span",{className:"label"},"Cancel")),x.a.createElement(O.a,{className:"signature-create",onClick:this.createSignature,disabled:i},x.a.createElement("span",{className:"label"},"Save")))),n&&x.a.createElement(P.a,{open:n,anchorEl:this.chooseRef,handleClose:this.handleClose},x.a.createElement(z.a,{hideThicknessSlider:a===ne})),this.state.openChangeFont&&x.a.createElement(P.a,{open:this.state.openChangeFont,anchorEl:this.anchorEl.current,classes:"ChangeFont__popper",handleClose:this.handleCloseChangeFontPopper},x.a.createElement(I.a,null,re.map((function(t,n){return x.a.createElement(L.a,{key:n,className:"ChangeFont__popper-item",onClick:function(){return e.changeFont(t.value)}},x.a.createElement("span",{className:"font-item",style:{fontFamily:'"'.concat(t.value,'", cursive')}},t.name),r===t.value&&x.a.createElement("span",{className:"font-item__selected"},x.a.createElement(U.a,{className:"check",size:14})))})))))}}]),n}(x.a.PureComponent);ie.propTypes=oe,ie.defaultProps={isDisabled:!1,isOpen:!1,activeToolStyles:{},currentUser:{},openToast:function(){},history:{},organizations:{}};var le=ie,ce={openElement:i.a.openElement,closeElement:i.a.closeElement,closeElements:i.a.closeElements,openToast:function(e){return i.a.openToast(e)}};t.default=Object(r.a)(Object(a.c)((function(e){return{isDisabled:l.a.isElementDisabled(e,"signatureModal"),isOpen:l.a.isElementOpen(e,"signatureModal"),activeToolStyles:l.a.getActiveToolStyles(e),currentUser:l.a.getCurrentUser(e),organizations:l.a.getOrganizationList(e)}}),ce),s.l,Object(o.a)())(le)},"./src/lumin-components/ToolStylePalette/index.js":function(e,t,n){"use strict";var a=n("./node_modules/react-redux/es/index.js"),s=n("./src/redux/actions/index.js"),r=n("./src/redux/selectors/index.js"),o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),l=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(l),u=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),d=n.n(u),m=n("./node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(m),h=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(h),f=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(f),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),S=n.n(b),E=n("./node_modules/react/index.js"),y=n.n(E),T=n("./node_modules/prop-types/index.js"),_=n.n(T),R=n("./src/core/index.js"),N=n("./src/constants/map.js"),w=n("./src/lumin-components/StylePalette/index.js");function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var s=v()(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return g()(this,n)}}var x=function(e){p()(n,e);var t=C(n);function n(e){var a;return i()(this,n),a=t.call(this,e),S()(d()(a),"handleWindowResize",(function(){a.props.closeElement("toolStylePopup")})),S()(d()(a),"handleStyleChange",(function(e,t){var n=a.props.activeToolName;R.default.getTool(n).setStyles(S()({},e,t))})),a.popup=y.a.createRef(),a.state={left:0,top:0,prevActivateTool:e.activeToolName},a}return c()(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){var e=this.props,t=e.activeToolName,n=e.activeToolStyle,a=e.hideThicknessSlider,s="AnnotationCreateFreeText"===t,r=Object(N.e)(t),o="AnnotationCreateTextHighlight"===t,i="AnnotationCreateSignature"===t;return y.a.createElement(w.a,{key:t,colorMapKey:r,style:n,isFreeText:s,hideDivider:o,onStyleChange:this.handleStyleChange,hideOpacitySlider:i,hideThicknessSlider:a})}}],[{key:"getDerivedStateFromProps",value:function(e){return{prevActivateTool:e.activeToolName}}}]),n}(y.a.PureComponent);x.propTypes={activeToolName:_.a.string.isRequired,activeToolStyle:_.a.object.isRequired,closeElement:_.a.func,hideThicknessSlider:_.a.bool},x.defaultProps={closeElement:function(){},hideThicknessSlider:!1};var j=x,k={closeElement:s.a.closeElement,closeElements:s.a.closeElements};t.a=Object(a.c)((function(e){return{activeToolName:r.a.getActiveToolName(e),activeToolStyle:r.a.getActiveToolStyles(e),isOpen:r.a.isElementOpen(e,"toolStylePopup"),buttonObjects:r.a.getToolButtonObjects(e)}}),k)(j)}}]);