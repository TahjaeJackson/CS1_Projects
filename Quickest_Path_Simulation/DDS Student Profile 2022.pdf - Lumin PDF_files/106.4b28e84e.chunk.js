(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{"./src/lumin-components/ToolStylePalette/index.js":function(e,t,o){"use strict";var n=o("./node_modules/react-redux/es/index.js"),s=o("./src/redux/actions/index.js"),l=o("./src/redux/selectors/index.js"),r=o("./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=o.n(r),i=o("./node_modules/@babel/runtime/helpers/createClass.js"),c=o.n(i),u=o("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),d=o.n(u),p=o("./node_modules/@babel/runtime/helpers/inherits.js"),m=o.n(p),v=o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=o.n(v),f=o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),y=o.n(f),b=o("./node_modules/@babel/runtime/helpers/defineProperty.js"),T=o.n(b),j=o("./node_modules/react/index.js"),O=o.n(j),E=o("./node_modules/prop-types/index.js"),S=o.n(E),g=o("./src/core/index.js"),_=o("./src/constants/map.js"),x=o("./src/lumin-components/StylePalette/index.js");function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=y()(e);if(t){var s=y()(this).constructor;o=Reflect.construct(n,arguments,s)}else o=n.apply(this,arguments);return h()(this,o)}}var P=function(e){m()(o,e);var t=R(o);function o(e){var n;return a()(this,o),n=t.call(this,e),T()(d()(n),"handleWindowResize",(function(){n.props.closeElement("toolStylePopup")})),T()(d()(n),"handleStyleChange",(function(e,t){var o=n.props.activeToolName;g.default.getTool(o).setStyles(T()({},e,t))})),n.popup=O.a.createRef(),n.state={left:0,top:0,prevActivateTool:e.activeToolName},n}return c()(o,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){var e=this.props,t=e.activeToolName,o=e.activeToolStyle,n=e.hideThicknessSlider,s="AnnotationCreateFreeText"===t,l=Object(_.e)(t),r="AnnotationCreateTextHighlight"===t,a="AnnotationCreateSignature"===t;return O.a.createElement(x.a,{key:t,colorMapKey:l,style:o,isFreeText:s,hideDivider:r,onStyleChange:this.handleStyleChange,hideOpacitySlider:a,hideThicknessSlider:n})}}],[{key:"getDerivedStateFromProps",value:function(e){return{prevActivateTool:e.activeToolName}}}]),o}(O.a.PureComponent);P.propTypes={activeToolName:S.a.string.isRequired,activeToolStyle:S.a.object.isRequired,closeElement:S.a.func,hideThicknessSlider:S.a.bool},P.defaultProps={closeElement:function(){},hideThicknessSlider:!1};var k=P,C={closeElement:s.a.closeElement,closeElements:s.a.closeElements};t.a=Object(n.c)((function(e){return{activeToolName:l.a.getActiveToolName(e),activeToolStyle:l.a.getActiveToolStyles(e),isOpen:l.a.isElementOpen(e,"toolStylePopup"),buttonObjects:l.a.getToolButtonObjects(e)}}),C)(k)},"./src/lumin-components/ToolsOverlayLumin/index.js":function(e,t,o){"use strict";o.r(t);var n=o("./node_modules/react-redux/es/index.js"),s=o("./node_modules/react-onclickoutside/dist/react-onclickoutside.es.js"),l=o("./src/redux/actions/index.js"),r=o("./src/redux/selectors/index.js"),a=o("./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=o.n(a),c=o("./node_modules/@babel/runtime/helpers/createClass.js"),u=o.n(c),d=o("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),p=o.n(d),m=o("./node_modules/@babel/runtime/helpers/inherits.js"),v=o.n(m),h=o("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),f=o.n(h),y=o("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),b=o.n(y),T=o("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=o.n(T),O=o("./node_modules/react/index.js"),E=o.n(O),S=o("./node_modules/prop-types/index.js"),g=o.n(S),_=o("./src/lumin-components/ToolButton/index.js"),x=o("./src/lumin-components/MaterialPopper/index.js"),R=o("./src/lumin-components/ToolStylePalette/index.js"),P=o("./src/core/index.js"),k=o("./src/helpers/device.js"),C=o("./src/helpers/getOverlayPositionBasedOn.js"),w=o("./src/constants/defaultTool.js");function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=b()(e);if(t){var s=b()(this).constructor;o=Reflect.construct(n,arguments,s)}else o=n.apply(this,arguments);return f()(this,o)}}var N={isDisabled:g.a.bool,isOpen:g.a.bool,toolButtonObjects:g.a.object.isRequired,activeHeaderItems:g.a.arrayOf(g.a.object).isRequired,activeToolGroup:g.a.string.isRequired,closeElements:g.a.func.isRequired,setActiveToolGroup:g.a.func.isRequired,closeElement:g.a.func.isRequired},z=function(e){v()(o,e);var t=A(o);function o(){var e;return i()(this,o),e=t.call(this),j()(p()(e),"getAnchorEl",(function(){var t=e.props,o=t.activeToolGroup,n=t.activeHeaderItems.find((function(e){return e.toolGroup===o}));if(n){var s=document.querySelector("[data-element=".concat(n.dataElement,"]"));e.setState({anchorEl:s,activeElement:n,openStyle:!1})}})),j()(p()(e),"handleWindowResize",(function(){e.setOverlayPosition()})),j()(p()(e),"handleClickOutside",(function(t){var o=document.querySelector('[data-element="toolStylePopup"]'),n=document.querySelector('[data-element="header"]'),s=o&&o.contains(t.target),l=n&&n.contains(t.target);!Object(k.f)()||s||l||e.props.closeElements(["toolsOverlay"])})),j()(p()(e),"setOverlayPosition",(function(){var t=e.props,o=t.activeToolGroup,n=t.activeHeaderItems.find((function(e){return e.toolGroup===o}));n&&e.setState(Object(C.a)(n.dataElement,e.overlay))})),j()(p()(e),"handleCloseClick",(function(){var t=e.props,o=t.setActiveToolGroup,n=t.closeElements;P.default.setToolMode(w.a),o(""),n(["toolStylePopup","toolsOverlay"])})),j()(p()(e),"openStylePalette",(function(t){t.stopPropagation(),e.setState({openStyle:!e.state.openStyle})})),j()(p()(e),"transformRgb",(function(e){var t=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return"rgb(".concat(t,", ").concat(o,", ").concat(n,")")})),e.overlay=E.a.createRef(),e.state={left:0,right:"auto",openStyle:!1,anchorEl:null},e}return u()(o,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize),this.getAnchorEl()}},{key:"componentDidUpdate",value:function(e){var t=e.activeToolGroup!==this.props.activeToolGroup;!e.isOpen&&this.props.isOpen&&(this.props.closeElements(["viewControlsOverlay","menuOverlay","toolStylePopup","signatureOverlay","zoomOverlay","redactionOverlay"]),this.getAnchorEl()),t&&this.getAnchorEl()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){var e=this.state.anchorEl,t=this.props,o=t.isDisabled,n=t.isOpen,s=t.toolButtonObjects,l=t.activeToolGroup,r=t.closeElement;if(o||!l||void 0===n||!e)return null;var a=Object.keys(s).filter((function(e){return s[e].group===l}));return E.a.createElement(x.a,{open:n,anchorEl:e,handleClose:function(t){e.contains(t.target)||r("toolsOverlay")}},E.a.createElement("div",{className:"ToolsOverlayLumin","data-element":"toolsOverlay"},"freeHandTools"!==l&&E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"ToolsOverlayLumin__tools-container"},E.a.createElement("div",{className:"ToolsOverlayLumin__choose-style"},E.a.createElement("div",{className:"ToolsOverlayLumin__label ".concat("shapeTools"===l?"ToolsOverlayLumin__label-mg-bot-35":"")},"shapeTools"===l?"Shape":"Choose Style")),E.a.createElement("div",{className:"spacer hide-in-desktop"}),E.a.createElement("div",{className:"ToolsOverlayLumin__tools ".concat("textTools"===l?"ToolsOverlayLumin__tools-flex-end":"")},a.map((function(e,t){return E.a.createElement(_.a,{key:"".concat(e,"-").concat(t),toolName:e,className:"square"})})))),E.a.createElement("div",{className:"divider horizontal"})),E.a.createElement(R.a,null)))}}]),o}(E.a.PureComponent);z.propTypes=N,z.defaultProps={isDisabled:!1,isOpen:!1};var D=z,G={closeElement:l.a.closeElement,closeElements:l.a.closeElements,setActiveToolGroup:l.a.setActiveToolGroup};t.default=Object(n.c)((function(e){return{isDisabled:r.a.isElementDisabled(e,"toolsOverlay"),isOpen:r.a.isElementOpen(e,"toolsOverlay"),toolButtonObjects:r.a.getToolButtonObjects(e),activeHeaderItems:r.a.getActiveHeaderItems(e),activeToolGroup:r.a.getActiveToolGroup(e),activeToolStyles:r.a.getActiveToolStyles(e)}}),G)(Object(s.a)(D))}}]);