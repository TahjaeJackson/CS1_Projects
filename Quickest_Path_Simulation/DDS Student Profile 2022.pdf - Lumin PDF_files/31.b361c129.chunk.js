(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"./src/lumin-components/ContextMenuPopup/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/react-redux/es/index.js"),r=n("./node_modules/react-onclickoutside/dist/react-onclickoutside.es.js"),i=n("./src/redux/actions/index.js"),s=n("./src/redux/selectors/index.js"),a=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),l=n.n(a),u=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(u),p=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),d=n.n(p),m=n("./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(m),h=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),b=n.n(h),E=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),x=n.n(E),g=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=n.n(g),y=n("./node_modules/react/index.js"),v=n.n(y),P=n("./node_modules/classnames/index.js"),C=n.n(P),O=n("./node_modules/prop-types/index.js"),T=n.n(O),k=n("./src/lumin-components/ActionButton/index.js"),B=n("./src/lumin-components/CustomizablePopup/index.js"),D=n("./src/helpers/setToolModeAndGroup.js"),R=n("./src/redux/store/index.js");function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=x()(e);if(t){var r=x()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return b()(this,n)}}var M={isAnnotationToolsEnabled:T.a.bool,isOpen:T.a.bool,isDisabled:T.a.bool,openElement:T.a.func.isRequired,closeElement:T.a.func.isRequired,closeElements:T.a.func.isRequired,disabledElements:T.a.object,popupItems:T.a.array,isLoadingDocument:T.a.bool},A=function(e){f()(n,e);var t=_(n);function n(){var e;return l()(this,n),e=t.call(this),j()(d()(e),"onContextMenu",(function(t){var n=t.target.tagName,o="INPUT"===n,r="TEXTAREA"===n;if(!document.querySelector(".DocumentContainer").contains(t.target)||o||r)e.props.closeElement("contextMenuPopup");else{t.preventDefault();var i=e.getPopupPosition(t),s=i.left,a=i.top;e.props.popupItems.length>0&&!e.props.isLoadingDocument&&(e.setState({left:s,top:a}),e.props.openElement("contextMenuPopup"))}})),j()(d()(e),"getPopupPosition",(function(t){var n=t.pageX,o=t.pageY;if(e.popup.current){var r=e.popup.current.getBoundingClientRect(),i=r.width,s=r.height,a=document.getElementsByClassName("DocumentContainer")[0].getBoundingClientRect();n<a.left&&(n=a.left+2),n+i>a.right&&(n=a.right-i-2),o<a.top&&(o=a.top+2),o+s>a.bottom&&(o=a.bottom-s-2)}return{left:n,top:o}})),j()(d()(e),"handleClickOutside",(function(){e.props.closeElement("contextMenuPopup")})),j()(d()(e),"handleClick",(function(t,n){var o=e.props,r=o.closeElement;o.disabledElements[n]||(Object(D.a)(R.a,t),r("contextMenuPopup"))})),e.popup=v.a.createRef(),e.state={left:0,top:0},e}return c()(n,[{key:"componentDidMount",value:function(){document.addEventListener("contextmenu",this.onContextMenu)}},{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen&&this.props.closeElements(["annotationPopup","textPopup"])}},{key:"componentWillUnmount",value:function(){document.removeEventListener("contextmenu",this.onContextMenu)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,o=t.isDisabled,r=t.isAnnotationToolsEnabled;if(o)return null;var i=this.state,s=i.left,a=i.top;return v.a.createElement("div",{className:C()({Popup:!0,ContextMenuPopup:!0,open:n,closed:!n}),ref:this.popup,"data-element":"contextMenuPopup",style:{left:s,top:a}},v.a.createElement(B.a,{dataElement:"contextMenuPopup"},v.a.createElement(k.a,{dataElement:"panToolButton",title:"tool.pan",icon:"hand",onClick:function(){return e.handleClick("Pan")}}),r&&v.a.createElement(k.a,{dataElement:"stickyToolButton",title:"annotation.stickyNote",icon:"comment",onClick:function(){return e.handleClick("AnnotationCreateSticky","stickyToolButton")}}),r&&v.a.createElement(k.a,{dataElement:"highlightToolButton",title:"annotation.highlight",icon:"basic-highlight",onClick:function(){return e.handleClick("AnnotationCreateTextHighlight","highlightToolButton")}}),r&&v.a.createElement(k.a,{dataElement:"freeHandToolButton",title:"annotation.freehand",icon:"freeline",onClick:function(){return e.handleClick("AnnotationCreateFreeHand","freeHandToolButton")}}),r&&v.a.createElement(k.a,{dataElement:"freeTextToolButton",title:"annotation.freetext",icon:"text",onClick:function(){return e.handleClick("AnnotationCreateFreeText","freeTextToolButton")}})))}}]),n}(v.a.PureComponent);A.propTypes=M,A.defaultProps={isAnnotationToolsEnabled:!1,isOpen:!1,isDisabled:!1,disabledElements:{},popupItems:[],isLoadingDocument:!0};var w=A;t.default=Object(o.c)((function(e){return{isAnnotationToolsEnabled:!s.a.isElementDisabled(e,"annotations")&&!s.a.isDocumentReadOnly(e),isOpen:s.a.isElementOpen(e,"contextMenuPopup"),isDisabled:s.a.isElementDisabled(e,"contextMenuPopup"),popupItems:s.a.getPopupItems(e,"contextMenuPopup"),disabledElements:s.a.getDisabledElementFromList(e,["stickyToolButton","highlightToolButton","freeHandToolButton","freeTextToolButton"])}}),(function(e){return{dispatch:e,openElement:function(t){return e(i.a.openElement(t))},closeElement:function(t){return e(i.a.closeElement(t))},closeElements:function(t){return e(i.a.closeElements(t))}}}))(Object(r.a)(w))},"./src/lumin-components/CustomizablePopup/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),r=n("./src/redux/selectors/index.js"),i=n("./node_modules/@babel/runtime/helpers/extends.js"),s=n.n(i),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(a),u=n("./node_modules/react/index.js"),c=n.n(u),p=n("./node_modules/prop-types/index.js"),d=n.n(p),m=n("./src/lumin-components/ToolButton/index.js"),f=n("./src/lumin-components/ToolGroupButton/index.js"),h=n("./src/lumin-components/ToggleElementButton/index.js"),b=n("./src/lumin-components/ActionButton/index.js"),E=n("./src/lumin-components/StatefulButton/index.js"),x=n("./src/lumin-components/CustomElement/index.js");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={dataElement:d.a.string.isRequired,children:d.a.arrayOf(d.a.any).isRequired,getItems:d.a.func.isRequired},v=function(e){var t=e.dataElement,n=e.children,o=(0,e.getItems)(t),r=c.a.Children.toArray(n);return o.map((function(e,t){var n=e.dataElement,o=e.type,i=e.hidden,a="".concat(o,"-").concat(n||t),l=null===i||void 0===i?void 0:i.map((function(e){return"hide-in-".concat(e)})).join(" "),u=r.find((function(e){return e.props.dataElement===n}));if(!u){var p=j(j({},e),{},{mediaQueryClassName:l});"toolButton"===o&&(u=c.a.createElement(m.a,p)),"toolGroupButton"===o&&(u=c.a.createElement(f.a,p)),"toggleElementButton"===o&&(u=c.a.createElement(h.a,p)),"actionButton"===o&&(u=c.a.createElement(b.a,p)),"statefulButton"===o&&(u=c.a.createElement(E.a,p)),"customElement"===o&&(u=c.a.createElement(x.a,p)),"spacer"!==o&&"divider"!==o||(u=c.a.createElement("div",s()({className:"".concat(o," ").concat(l)},p)))}return u?c.a.cloneElement(u,{key:a}):null}))};v.propTypes=y;var P=v;t.a=Object(o.c)((function(e){return{getItems:function(t){return r.a.getPopupItems(e,t)}}}))(P)}}]);