(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{"./assets/images/cannot-open-document.png":function(e,t,n){e.exports=n.p+"assets/images/cannot-open-document.png"},"./node_modules/@material-ui/core/esm/Checkbox/Checkbox.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/esm/extends.js"),a=n("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=n("./node_modules/react/index.js"),i=(n("./node_modules/prop-types/index.js"),n("./node_modules/clsx/dist/clsx.m.js")),c=n("./node_modules/@material-ui/core/esm/internal/SwitchBase.js"),s=n("./node_modules/@material-ui/core/esm/utils/createSvgIcon.js"),l=Object(s.a)(r.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),u=Object(s.a)(r.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),d=n("./node_modules/@material-ui/core/esm/styles/colorManipulator.js"),m=Object(s.a)(r.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),p=n("./node_modules/@material-ui/core/esm/utils/capitalize.js"),h=n("./node_modules/@material-ui/core/esm/styles/withStyles.js"),f=r.createElement(u,null),b=r.createElement(l,null),g=r.createElement(m,null),y=r.forwardRef((function(e,t){var n=e.checkedIcon,s=void 0===n?f:n,l=e.classes,u=e.color,d=void 0===u?"secondary":u,m=e.icon,h=void 0===m?b:m,y=e.indeterminate,v=void 0!==y&&y,k=e.indeterminateIcon,_=void 0===k?g:k,j=e.inputProps,w=e.size,C=void 0===w?"medium":w,x=Object(a.a)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),E=v?_:h,O=v?_:s;return r.createElement(c.a,Object(o.a)({type:"checkbox",classes:{root:Object(i.a)(l.root,l["color".concat(Object(p.a)(d))],v&&l.indeterminate),checked:l.checked,disabled:l.disabled},color:d,inputProps:Object(o.a)({"data-indeterminate":v},j),icon:r.cloneElement(E,{fontSize:void 0===E.props.fontSize&&"small"===C?C:E.props.fontSize}),checkedIcon:r.cloneElement(O,{fontSize:void 0===O.props.fontSize&&"small"===C?C:O.props.fontSize}),ref:t},x))}));t.a=Object(h.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(d.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(d.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(y)},"./node_modules/@material-ui/core/esm/FormControl/FormControlContext.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var o=n("./node_modules/react/index.js"),a=o.createContext();function r(){return o.useContext(a)}t.a=a},"./node_modules/@material-ui/core/esm/FormControl/useFormControl.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("./node_modules/react/index.js"),a=n("./node_modules/@material-ui/core/esm/FormControl/FormControlContext.js");function r(){return o.useContext(a.a)}},"./node_modules/@material-ui/core/esm/internal/SwitchBase.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/esm/extends.js"),a=n("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),r=n("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=n("./node_modules/react/index.js"),c=(n("./node_modules/prop-types/index.js"),n("./node_modules/clsx/dist/clsx.m.js")),s=n("./node_modules/@material-ui/core/esm/utils/useControlled.js"),l=n("./node_modules/@material-ui/core/esm/FormControl/useFormControl.js"),u=n("./node_modules/@material-ui/core/esm/styles/withStyles.js"),d=n("./node_modules/@material-ui/core/esm/IconButton/IconButton.js"),m=i.forwardRef((function(e,t){var n=e.autoFocus,u=e.checked,m=e.checkedIcon,p=e.classes,h=e.className,f=e.defaultChecked,b=e.disabled,g=e.icon,y=e.id,v=e.inputProps,k=e.inputRef,_=e.name,j=e.onBlur,w=e.onChange,C=e.onFocus,x=e.readOnly,E=e.required,O=e.tabIndex,P=e.type,I=e.value,T=Object(r.a)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),F=Object(s.a)({controlled:u,default:Boolean(f),name:"SwitchBase",state:"checked"}),D=Object(a.a)(F,2),S=D[0],M=D[1],A=Object(l.a)(),R=b;A&&"undefined"===typeof R&&(R=A.disabled);var B="checkbox"===P||"radio"===P;return i.createElement(d.a,Object(o.a)({component:"span",className:Object(c.a)(p.root,h,S&&p.checked,R&&p.disabled),disabled:R,tabIndex:null,role:void 0,onFocus:function(e){C&&C(e),A&&A.onFocus&&A.onFocus(e)},onBlur:function(e){j&&j(e),A&&A.onBlur&&A.onBlur(e)},ref:t},T),i.createElement("input",Object(o.a)({autoFocus:n,checked:u,defaultChecked:f,className:p.input,disabled:R,id:B&&y,name:_,onChange:function(e){var t=e.target.checked;M(t),w&&w(e,t)},readOnly:x,ref:k,required:E,tabIndex:O,type:P,value:I},v)),S?m:g)}));t.a=Object(u.a)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(m)},"./node_modules/load-script/index.js":function(e,t){function n(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function o(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,a){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");"function"===typeof t&&(a=t,t={}),t=t||{},a=a||function(){},i.type=t.type||"text/javascript",i.charset=t.charset||"utf8",i.async=!("async"in t)||!!t.async,i.src=e,t.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(i,t.attrs),t.text&&(i.text=""+t.text),("onload"in i?n:o)(i,a),i.onload||n(i,a),r.appendChild(i)}},"./node_modules/react-google-picker/dist/react-google-picker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=c(n("./node_modules/react/index.js")),r=c(n("./node_modules/prop-types/index.js")),i=c(n("./node_modules/load-script/index.js"));function c(e){return e&&e.__esModule?e:{default:e}}var s=!1,l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onApiLoad=n.onApiLoad.bind(n),n.onChoose=n.onChoose.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.isGoogleReady()?this.onApiLoad():s||(s=!0,(0,i.default)("https://apis.google.com/js/api.js",this.onApiLoad))}},{key:"isGoogleReady",value:function(){return!!window.gapi}},{key:"isGoogleAuthReady",value:function(){return!!window.gapi.auth}},{key:"isGooglePickerReady",value:function(){return!!window.google.picker}},{key:"onApiLoad",value:function(){window.gapi.load("auth"),window.gapi.load("picker")}},{key:"doAuth",value:function(e){window.gapi.auth.authorize({client_id:this.props.clientId,scope:this.props.scope,immediate:this.props.authImmediate},e)}},{key:"onChoose",value:function(){var e=this;if(!this.isGoogleReady()||!this.isGoogleAuthReady()||!this.isGooglePickerReady()||this.props.disabled)return null;var t=window.gapi.auth.getToken(),n=t&&t.access_token;n?this.createPicker(n):this.doAuth((function(t){t.access_token?e.createPicker(t.access_token):e.props.onAuthFailed(t)}))}},{key:"createPicker",value:function(e){if(this.props.onAuthenticate(e),this.props.createPicker)return this.props.createPicker(google,e);var t=google.picker.ViewId[this.props.viewId],n=new window.google.picker.View(t);if(this.props.mimeTypes&&n.setMimeTypes(this.props.mimeTypes.join(",")),this.props.query&&n.setQuery(this.props.query),!n)throw new Error("Can't find view by viewId");var o=(new window.google.picker.PickerBuilder).addView(n).setOAuthToken(e).setDeveloperKey(this.props.developerKey).setCallback(this.props.onChange);this.props.origin&&o.setOrigin(this.props.origin),this.props.navHidden&&o.enableFeature(window.google.picker.Feature.NAV_HIDDEN),this.props.multiselect&&o.enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED),o.build().setVisible(!0)}},{key:"render",value:function(){return a.default.createElement("div",{onClick:this.onChoose},this.props.children?this.props.children:a.default.createElement("button",null,"Open google chooser"))}}]),t}(a.default.Component);l.propTypes={children:r.default.node,clientId:r.default.string.isRequired,developerKey:r.default.string,scope:r.default.array,viewId:r.default.string,authImmediate:r.default.bool,origin:r.default.string,onChange:r.default.func,onAuthenticate:r.default.func,onAuthFailed:r.default.func,createPicker:r.default.func,multiselect:r.default.bool,navHidden:r.default.bool,disabled:r.default.bool},l.defaultProps={onChange:function(){},onAuthenticate:function(){},onAuthFailed:function(){},scope:["https://www.googleapis.com/auth/drive.readonly"],viewId:"DOCS",authImmediate:!1,multiselect:!1,navHidden:!1,disabled:!1},t.default=l},"./src/lumin-components/CustomCheckbox/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./src/redux/selectors/index.js"),r=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(r),c=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),s=n.n(c),l=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/createClass.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),h=n.n(p),f=n("./node_modules/@babel/runtime/helpers/inherits.js"),b=n.n(f),g=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),y=n.n(g),v=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),k=n.n(v),_=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=n.n(_),w=n("./node_modules/react/index.js"),C=n.n(w),x=n("./node_modules/@material-ui/core/esm/Checkbox/Checkbox.js"),E=n("./node_modules/prop-types/index.js"),O=n.n(E),P=n("./src/lumin-components/SvgElement/index.js");function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return y()(this,n)}}var T={themeMode:O.a.string,dispatch:O.a.func,indeterminate:O.a.bool},F=function(e){b()(n,e);var t=I(n);function n(){var e;return u()(this,n),e=t.call(this),j()(h()(e),"_getSvgIcon",(function(t){var n="light"===e.props.themeMode;return e.isViewer?"".concat(t).concat(n?"-Light":"-Dark"):"".concat(t,"-Light")})),e.inputRef=C.a.createRef(),e.isViewer=window.location.pathname.startsWith("/viewer/"),e}return m()(n,[{key:"render",value:function(){var e=this.props,t=e.indeterminate,n=(e.themeMode,e.dispatch,s()(e,["indeterminate","themeMode","dispatch"])),o=n.size,a=void 0===o?16:o;return C.a.createElement(x.a,i()({},n,{inputRef:this.inputRef,icon:C.a.createElement(P.a,{content:this._getSvgIcon(t?"indeterminate-checkBox":"Checkbox-NotSelected"),width:a}),checkedIcon:C.a.createElement(P.a,{content:this._getSvgIcon("Checkbox-Selected"),width:a})}))}},{key:"checked",get:function(){return this.inputRef.current.checked},set:function(e){this.inputRef.current.checked=e}}]),n}(C.a.PureComponent);F.propTypes=T,F.defaultProps={themeMode:"light",dispatch:function(){},indeterminate:!1};var D=F;t.a=Object(o.c)((function(e){return{themeMode:a.a.getThemeMode(e)}}),null,null,{forwardRef:!0})(D)},"./src/lumin-components/GoogleFilePicker/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/@apollo/react-hoc/lib/react-hoc.esm.js"),r=n("./src/redux/selectors/index.js"),i=n("./src/constants/documentConstants.js"),c=n("./src/redux/actions/index.js"),s=n("./node_modules/@babel/runtime/regenerator/index.js"),l=n.n(s),u=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),d=n.n(u),m=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),p=n.n(m),h=n("./node_modules/@babel/runtime/helpers/createClass.js"),f=n.n(h),b=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),g=n.n(b),y=n("./node_modules/@babel/runtime/helpers/inherits.js"),v=n.n(y),k=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),_=n.n(k),j=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),w=n.n(j),C=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),x=n.n(C),E=n("./node_modules/react/index.js"),O=n.n(E),P=n("./node_modules/prop-types/index.js"),I=n.n(P),T=n("./node_modules/mime-types/index.js"),F=n.n(T),D=n("./node_modules/react-google-picker/dist/react-google-picker.js"),S=n.n(D),M=n("./src/lumin-components/CookieWarningModal/Context.js"),A=n("./src/constants/documentType.js"),R=n("./src/graphql/DocumentGraph.js"),B=n("./src/constants/lumin-common.js"),N=n("./src/constants/supportedFiles.js"),G=n("./src/services/index.js"),L=n("./src/utils/index.js"),V=n("./src/helpers/logger.js");function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=w()(e);if(t){var a=w()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return _()(this,n)}}var W=function(e){v()(n,e);var t=q(n);function n(){var e;p()(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),x()(g()(e),"initialPicker",(function(t,n){var o,a=e.props,r=a.fileName,i=a.mimeType,c=a.isRequestAccess,s=a.multiSelect;if(!c){var l=[A.b.PDF,A.d.DOCX,A.d.XLSX,A.d.PPTX],u=t.picker.ViewId.DOCS,d=t.picker.ViewId.FOLDERS;return o=(new window.google.picker.PickerBuilder).addView(new t.picker.DocsView(u).setMimeTypes(i||l.join(","))).addView(new t.picker.DocsView(u).setMimeTypes(i||l.join(",")).setIncludeFolders(!0).setEnableDrives(!0)).addView(new t.picker.DocsView(t.picker.ViewId.DOCS_IMAGES)).addView(new t.picker.DocsView(d).setIncludeFolders(!0).setSelectFolderEnabled(!0)).enableFeature(t.picker.Feature.SUPPORT_DRIVES).setAppId("1031094922298").setOAuthToken(n).setDeveloperKey("AIzaSyB2pjSUFbrP4TAtybvtEjx4Bmh0BBg4MUQ").setCallback(e.googlePickerCallback),s&&o.enableFeature(t.picker.Feature.MULTISELECT_ENABLED),o}var m=new t.picker.DocsView(t.picker.ViewId.DOCS).setMimeTypes(i).setQuery(r);return o=(new window.google.picker.PickerBuilder).addView(m).enableFeature(t.picker.Feature.SUPPORT_DRIVES).setAppId("1031094922298").setOAuthToken(n).setDeveloperKey("AIzaSyB2pjSUFbrP4TAtybvtEjx4Bmh0BBg4MUQ").setCallback((function(t){e.googlePickerCallback(t),"cancel"===t.action&&window.location.reload()})),s&&o.enableFeature(t.picker.Feature.MULTISELECT_ENABLED),o})),x()(g()(e),"googlePickerCallback",(function(t){var n=e.props,o=n.closeModal,a=n.onClose,r=n.onPicked;switch(t.action){case"loaded":o();break;case"cancel":a();break;case"picked":e.handlePickFileGoogle(t),r(t)}})),x()(g()(e),"createPicker",function(){var t=d()(l.a.mark((function t(n,o){var a,r,i,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://www.googleapis.com/auth/drive.file",t.next=3,G.e.getCurrentScope();case 3:r=t.sent,i=e.initialPicker(n,o),r.includes(a)?i.build().setVisible(!0):(i.build().setVisible(!1),(c=new window.gapi.auth2.SigninOptionsBuilder).setScope(a),window.gapi.auth2.getAuthInstance().currentUser.get().grant(c).then((function(t){var a=t.getAuthResponse().access_token;(i=e.initialPicker(n,a)).build().setVisible(!0),V.a.logInfo({message:B.t.EVENT.CREATE_GOOGLE_FILE_PICKER,reason:B.t.Service.GOOGLE_API_INFO,attributes:{google:n,oauthToken:o,success:t}})}),(function(e){V.a.logError({reason:B.t.Service.GOOGLE_API_ERROR,error:e}),L.J.openToastMulti({message:"Access Denied",type:B.A.ERROR})})));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),x()(g()(e),"onGoogleAuthenticateError",(function(){e.context.cookiesDisabled&&e.context.setCookieModalVisible(!0)})),x()(g()(e),"onAuthenticate",(function(){console.info("On auth successfully!")})),x()(g()(e),"getDocumentList",(function(e,t){return Promise.all(e.docs.map(function(){var e=d()(l.a.mark((function e(n){var o,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=L.o.getExtension(n.name),"gdoc"===F.a.extension(n.mimeType)&&(o="".concat(n.name,".docx")),"gsheet"===F.a.extension(n.mimeType)&&(o="".concat(n.name,".xlsx")),N.c.includes(a)||N.d.includes(a)||(o="".concat(n.name,".").concat(F.a.extension(n.mimeType))),e.abrupt("return",{remoteId:n.id,name:o||n.name,size:n.sizeBytes,mimeType:n.mimeType,service:"google",isPersonal:!0,remoteEmail:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),x()(g()(e),"handlePickFileGoogle",function(){var t=d()(l.a.mark((function t(n){var o,a,r,c,s,u,m,p,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props,a=o.currentUser,r=o.client,c=o.currentFolderType,s=o.uploadFiles,u=o.updateDocumentData,!o.isUpload){t.next=18;break}if(window.gapi.drive){t.next=5;break}return t.next=5,window.gapi.client.load("drive","v3",null);case 5:return t.next=7,G.e.getCurrentRemoteEmail();case 7:if(m=t.sent,c!==i.t.INDIVIDUAL){t.next=16;break}return window.scrollTo({top:0,left:0,behavior:"smooth"}),t.next=12,e.getDocumentList(n,m);case 12:p=t.sent,r.mutate({mutation:R.c,variables:{input:{clientId:a._id,documents:p,role:"owner"}}}).then(function(){var e=d()(l.a.mark((function e(t){var o,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.data.createDocuments,a=c,Promise.all(n.docs.map((function(e,t){var n=o.documents[t]._id;G.e.getFileInfo(e.id).then(function(){var t=d()(l.a.mark((function t(o){var r,i,c,s,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.thumbnailLink,t.prev=1,!r){t.next=15;break}return t.next=5,L.o.getCanvasFromUrl(r);case 5:return i=t.sent,t.next=8,L.o.convertThumnailCanvasToFile(i.imgSrc,L.o.getFilenameWithoutExtension(e.name));case 8:return c=t.sent,t.next=11,G.c.uploadThumbnail(n,c);case 11:s=t.sent,d=s.data,u(a,{_id:n,thumbnail:d}),V.a.logInfo({message:B.t.EVENT.GET_FILE_INFO,reason:B.t.Service.GOOGLE_API_INFO,attributes:{data:o}});case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),V.a.logError({reason:B.t.Service.GOOGLE_API_ERROR,error:t.t0});case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}())}))),o&&(r={type:B.A.SUCCESS,message:"Your document(s) were successfully imported"},L.J.openToastMulti(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){var e={type:B.A.ERROR,message:"Fail to upload documents from Google Drive"};L.J.openToastMulti(e)})),t.next=18;break;case 16:h=n.docs.map((function(e){var t,n=L.o.getExtension(e.name);return"gdoc"===F.a.extension(e.mimeType)&&(t="".concat(e.name,".docx")),"gsheet"===F.a.extension(e.mimeType)&&(t="".concat(e.name,".xlsx")),N.c.includes(n)||N.d.includes(n)||(t="".concat(e.name,".").concat(F.a.extension(e.mimeType))),U(U({},e),{},{name:t||e.name,type:e.mimeType,size:e.sizeBytes})})),s(h,B.J.GOOGLE);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return f()(n,[{key:"render",value:function(){var e=this;return O.a.createElement(S.a,{clientId:"1031094922298-hcmpll8999ct57grncagnql87pnihmmi.apps.googleusercontent.com",developerKey:"AIzaSyB2pjSUFbrP4TAtybvtEjx4Bmh0BBg4MUQ",onChange:function(t){return e.handlePickFileGoogle(t)},scope:["profile","email","https://www.googleapis.com/auth/drive.file"],onAuthenticate:this.onAuthenticate,createPicker:this.createPicker,onAuthFailed:this.onGoogleAuthenticateError,authImmediate:!1,mimeTypes:[A.c.PNG,A.c.JPEG,A.c.JPG,A.b.PDF],viewId:"DOCS"},this.props.children)}}]),n}(O.a.PureComponent);W.propTypes={fileName:I.a.string,mimeType:I.a.string,isRequestAccess:I.a.bool,closeModal:I.a.func,onPicked:I.a.func,children:I.a.any.isRequired,currentUser:I.a.object,client:I.a.object,uploadFiles:I.a.func,currentFolderType:I.a.string.isRequired,onClose:I.a.func,updateDocumentData:I.a.func,isUpload:I.a.bool,multiSelect:I.a.bool},W.defaultProps={fileName:"",mimeType:"",isRequestAccess:!1,closeModal:function(){},currentUser:{},client:{},uploadFiles:function(){},onPicked:function(){},onClose:function(){},updateDocumentData:function(){},isUpload:!0,multiSelect:!0},W.contextType=M.a;var H=W;t.a=Object(o.c)((function(e){return{currentUser:r.a.getCurrentUser(e),currentTeam:r.a.getCurrentTeam(e),currentFolderType:r.a.getCurrentFolderType(e),ownedFilterCondition:r.a.getCurrentOwnedFilter(e),lastModifiedFilterCondition:r.a.getCurrentLastModifiedFilter(e)}}),(function(e){return{dispatch:e,updateDocumentData:function(t,n){switch(t){case i.t.INDIVIDUAL:e(c.a.updateDocumentPersonal(n));break;case i.t.TEAMS:e(c.a.updateDocumentTeam(n));break;case i.t.ORGANIZATION:e(c.a.updateDocumentOrganization(n))}}}}))(Object(a.a)(H))},"./src/lumin-components/MaterialModal/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/react/index.js"),a=n.n(o),r=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/prop-types/index.js"),c=n.n(i),s=n("./node_modules/react-router-dom/esm/react-router-dom.js"),l=n("./node_modules/classnames/index.js"),u=n.n(l),d=n("./src/lumin-components/Dialog/index.js"),m=n("./src/lumin-components/SvgElement/index.js"),p=n("./src/lumin-components/ButtonMaterial/index.js"),h=n("./src/lumin-components/GoogleFilePicker/index.js"),f=n("./src/lumin-components/CircularLoading/index.js"),b=n("./src/lumin-components/CustomCheckbox/index.js"),g=n("./src/redux/selectors/index.js"),y=n("./src/redux/actions/index.js"),v=n("./src/constants/lumin-common.js"),k=n("./assets/images/cannot-open-document.png"),_=n.n(k);w.propTypes={closeModal:c.a.func,themeMode:c.a.string,modalData:c.a.object,onAfterPicked:c.a.func},w.defaultProps={closeModal:function(){},themeMode:"",modalData:{open:!1,type:v.A.WARNING,isFullWidthButton:!1,onConfirm:function(){}},onAfterPicked:function(){}};var j="MaterialButton__btn--full";function w(e){var t=e.closeModal,n=e.themeMode,o=e.modalData,r=o.fullScreen,i=o.cancelButtonTitle,c=o.open,l=o.type,g=o.title,y=o.boldMessage,k=o.message,w=o.confirmButtonTitle,C=o.confirmButtonType,x=void 0===C?"button":C,E=o.href,O=void 0===E?"":E,P=o.onCancel,I=o.onConfirm,T=o.color,F=o.isFullWidthButton,D=o.isCustomModal,S=o.firstButtonTitle,M=o.secondButtonTitle,A=o.onFirstButtonClick,R=o.onSecondButtonClick,B=o.disableBackdropClick,N=o.disableEscapeKeyDown,G=o.isGoogleModal,L=o.nameOfFileRequest,V=o.mimeTypeOfFileRequest,z=o.onAfterPicked,U=o.customIcon,q=o.className,W=void 0===q?"":q,H=o.closeOnConfirm,K=void 0===H||H,J=o.isProcessing,Q=o.submitId,X=o.checkboxMessage,$=void 0===X?"":X,Y=o.onClose,Z=/^\/viewer\//.test(window.location.pathname),ee=!1;function te(){P&&P(),Y&&Y(),t()}function ne(){return J?a.a.createElement(f.a,{color:"inherit",size:22,style:{color:v.f.WHITE}}):w||("warning"!==l?"Ok":"Delete")}var oe=function(){I&&($.length?I(ee):I()),K&&t()};function ae(){return a.a.createElement(a.a.Fragment,null,P&&a.a.createElement(p.a,{className:"MaterialButton__btn secondary ".concat(F?j:""),onClick:te,disabled:J},i||"Cancel"),function(){switch(x){case"button":return a.a.createElement(p.a,{className:"MaterialButton__btn primary ".concat(T," ").concat(F?j:""),disabled:J,onClick:oe,id:Q},ne());case"link":return a.a.createElement(p.a,{className:"MaterialButton__btn primary ".concat(T," ").concat(F?j:""," ButtonMaterial--link"),onClick:t,disabled:J},a.a.createElement(s.a,{to:O,onClick:function(){return!J},target:"_blank"},ne()));default:return null}}())}return c?a.a.createElement(d.a,{disableBackdropClick:B,disableEscapeKeyDown:N,fullScreen:r,open:c,onClose:te,className:"theme-".concat(Z?n:"")},a.a.createElement("div",{className:"MaterialDialog ".concat(W)},a.a.createElement("div",{className:"Container"},U?a.a.createElement(a.a.Fragment,null,U):a.a.createElement("div",{className:"Container__Icon"},G?a.a.createElement("img",{className:"Container__image",src:_.a}):(null===l||void 0===l?void 0:l.length)>0&&a.a.createElement(m.a,{content:"icon-".concat(l),width:48,height:48})),a.a.createElement("div",{className:"Container__Content"},a.a.createElement("div",{className:"Container__Content--title"},g),G?a.a.createElement("div",{className:"Container__Content--message Container__Content--google-message"},a.a.createElement("p",null,"There may be the reasons and the instructions according to:"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("b",null,"(1): The document you are attempting to open may be removed from Google Drive.")," ",a.a.createElement("p",null,"Please make sure that you have not accidentally deleted it.")),a.a.createElement("li",null,a.a.createElement("b",null,"(2): The scope of the Google Drive may be updated, please re-upload this document."),a.a.createElement("p",null,"We're sorry to inform that if you have to start your work again."))),a.a.createElement("span",null,"If there are troubles still, please send us your concern.")):y?a.a.createElement("div",{className:"Container__Content--message"},a.a.createElement("span",{className:"Container__Content--message-bold"},y),a.a.createElement("span",null,k)):a.a.createElement("div",{className:"Container__Content--message"},k),$.length?a.a.createElement("div",{className:"Container__Content--checkbox"},a.a.createElement(b.a,{type:"checkbox",onChange:function(e){var t=e.target.checked;$&&(ee=t)}}),a.a.createElement("span",null,$)):null,a.a.createElement("div",{className:u()("Container__Content--button",{"Container__button--full":F})},G?a.a.createElement("div",{className:"Container__btn-group"},a.a.createElement(p.a,{className:"MaterialButton__btn secondary ".concat(F?j:""),disabled:J,onClick:te},i||"Cancel"),a.a.createElement(h.a,{fileName:L,isRequestAccess:!0,closeModal:t,mimeType:V,onPicked:z},a.a.createElement(p.a,{className:"MaterialButton__btn primary ".concat(T," ").concat(F?j:""),disabled:J,onClick:function(){}},w||("warning"!==l?"Ok":"Delete")))):D?a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{className:"MaterialButton__btn primary ".concat(F?j:""),disabled:J,onClick:function(){A&&A(),t()}},S),a.a.createElement(p.a,{className:"MaterialButton__btn primary ".concat(T," ").concat(F?j:""),disabled:J,onClick:function(){R&&R(),t()}},M)):ae()))))):null}var C=Object(r.c)((function(e){return{modalData:g.a.getModalData(e),themeMode:g.a.getThemeMode(e)}}),(function(e){return{closeModal:function(){return e(y.a.closeModal())}}}))(w);t.default=C}}]);