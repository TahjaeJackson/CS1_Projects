(window.webpackJsonp=window.webpackJsonp||[]).push([[39,103,117,135],{"./assets/images/bookmark-darkmode-active.png":function(e,t,n){e.exports=n.p+"assets/images/bookmark-darkmode-active.png"},"./assets/images/bookmark-darkmode-inactive.png":function(e,t,n){e.exports=n.p+"assets/images/bookmark-darkmode-inactive.png"},"./assets/images/hand-like.svg":function(e,t){e.exports="data:image/svg+xml,%3C?xml version='1.0' encoding='UTF-8'?%3E %3Csvg width='81px' height='83px' viewBox='0 0 81 83' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E %3Ctitle%3E4073625B-8237-490A-963A-FDF8155E9DBB%3C/title%3E %3Cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E %3Cg id='Personal-Document_Rate-Lumin' transform='translate(-224.000000, -770.000000)'%3E %3Cg id='Group-34' transform='translate(64.000000, 750.000000)'%3E %3Cg id='Group-147' transform='translate(160.000000, 20.000000)'%3E %3Cpath d='M26.7936,40.1559343 C26.7936,40.1559343 34.8643,37.2265343 37.337,32.3377343 C38.2044,30.6227343 39.1111,28.8394343 39.9224,27.2463343 C41.3253,24.4923343 45.3818,24.8518343 46.2609,27.8151343 C46.8389,29.7646343 47.0069,32.1511343 46.171,34.8935343 C43.7518,42.8275343 47.0913,46.1688343 47.0913,46.1688343 L26.7936,40.1559343 Z' id='Path' fill='%23FFCFC2' fill-rule='nonzero'%3E%3C/path%3E %3Cpath d='M63.6044,45.4239343 C63.6044,42.5148343 61.2462,40.1559343 58.3371,40.1559343 L17.684,40.1559343 L17.684,66.2399343 C17.684,75.1077343 24.8725,82.2962343 33.741,82.2962343 L58.3371,82.2962343 C61.2462,82.2962343 63.6044,79.9380343 63.6044,77.0289343 C63.6044,74.1197343 61.2462,71.7615343 58.3371,71.7615343 C61.2462,71.7615343 63.6044,69.4032343 63.6044,66.4941343 C63.6044,63.5849343 61.2462,61.2267343 58.3371,61.2267343 C61.2462,61.2267343 63.6044,58.8679343 63.6044,55.9587343 C63.6044,53.0495343 61.2462,50.6913343 58.3371,50.6913343 C61.2462,50.6913343 63.6044,48.3331343 63.6044,45.4239343 Z' id='Path' fill='%23FFE2D9' fill-rule='nonzero'%3E%3C/path%3E %3Cpath d='M33.3833,74.2004343 C19.575,69.1570343 19.0493,43.2960343 19.0493,43.2960343 L17.684,43.2960343 L17.684,66.2393343 C17.684,75.1071343 24.8725,82.2963343 33.741,82.2963343 L45.7309,82.2963343 C43.1831,79.4499343 39.2736,76.3518343 33.3833,74.2004343 Z' id='Path' fill='%23FFCFC2' fill-rule='nonzero'%3E%3C/path%3E %3Cpath d='M6.56253,79.6388343 L12.4867,79.6388343 C16.1112,79.6388343 19.0492,76.7008343 19.0492,73.0763343 L19.0492,44.1559343 C19.0492,41.9468343 17.2584,40.1559343 15.0492,40.1559343 L6.56253,40.1559343 C2.93809,40.1559343 0,43.0940343 0,46.7185343 L0,73.0763343 C0,76.7008343 2.93809,79.6388343 6.56253,79.6388343 Z' id='Path' fill='%23FFFFFF' fill-rule='nonzero'%3E%3C/path%3E %3Cpath d='M6.56253,40.1559343 C2.93809,40.1559343 0,43.0940343 0,46.7185343 L0,73.0763343 C0,76.7008343 2.93809,79.6388343 6.56253,79.6388343 L7.4188,79.6388343 C7.9328,78.6539343 8.829,77.4345343 10.3895,76.2828343 C13.7991,73.7664343 13.3645,69.1422343 13.3645,69.1422343 C13.3645,69.1422343 7.1362,59.8460343 6.34216,53.1770343 C5.54808,46.5086343 9.5246,40.1559343 9.5246,40.1559343 L6.56253,40.1559343 Z' id='Path' fill='%23B3CEFA' fill-rule='nonzero'%3E%3C/path%3E %3Cpath d='M15.6798,70.1361343 C15.6798,72.2573343 13.9605,73.9766343 11.8399,73.9766343 C9.7193,73.9766343 8,72.2573343 8,70.1361343 C8,68.0155343 9.7193,66.2962343 11.8399,66.2962343 C13.9605,66.2962343 15.6798,68.0155343 15.6798,70.1361343 Z' id='Path' fill='%233C80EF' fill-rule='nonzero'%3E%3C/path%3E %3Cpath d='M65.9719103,1.76911778 L67.4980813,4.86161041 C68.2819568,6.44966697 69.7965516,7.54982129 71.5489314,7.80505331 L74.9621444,8.30095258 C77.5652582,8.67905791 78.604283,11.8785006 76.721021,13.7145127 L74.2510337,16.1220121 C72.982847,17.3573601 72.4047448,19.1380898 72.7036002,20.8832641 L73.2867818,24.2826564 C73.7318757,26.8756116 71.0101647,28.8526645 68.681927,27.628184 L65.6293487,26.0233419 C64.0617159,25.1995403 62.1893214,25.1995403 60.6222792,26.0233419 L57.569819,27.628184 C55.2415814,28.8526645 52.5198703,26.8756116 52.964846,24.2826564 L53.5473189,20.8832641 C53.8468831,19.1380898 53.2680721,17.3573601 52.0007123,16.1220121 L49.5306069,13.7145127 C47.6466361,11.8785006 48.6864878,8.67905791 51.2896017,8.30095258 L54.7026965,7.80505331 C56.4550763,7.54982129 57.9697892,6.44966697 58.7528378,4.86161041 L60.2798357,1.76911778 C61.4439546,-0.589705928 64.8076733,-0.589705928 65.9719103,1.76911778 Z' id='Path' fill='%23FFBC41'%3E%3C/path%3E %3Cpath d='M28.7155,14.9996343 L29.2609,15.9974343 C29.8056,16.9928343 30.6237,17.8115343 31.6197,18.3557343 L32.6175,18.9017343 C33.6388,19.4606343 33.6388,20.9275343 32.6175,21.4858343 L31.6197,22.0318343 C30.6243,22.5760343 29.8056,23.3947343 29.2609,24.3900343 L28.7155,25.3879343 C28.1565,26.4097343 26.6896,26.4097343 26.1313,25.3879343 L25.5853,24.3900343 C25.0412,23.3947343 24.2225,22.5760343 23.2271,22.0318343 L22.2293,21.4858343 C21.2074,20.9275343 21.2074,19.4606343 22.2293,18.9017343 L23.2271,18.3557343 C24.2225,17.8115343 25.0412,16.9928343 25.5853,15.9974343 L26.1313,14.9996343 C26.6896,13.9784343 28.1565,13.9784343 28.7155,14.9996343 Z' id='Path' fill='%23D3E0F5' fill-rule='nonzero'%3E%3C/path%3E %3Cpath d='M76.0148,37.7152343 L76.5608,38.7130343 C77.105,39.7090343 77.9237,40.5271343 78.919,41.0719343 L79.9169,41.6173343 C80.9381,42.1762343 80.9381,43.6431343 79.9169,44.2014343 L78.919,44.7474343 C77.9237,45.2916343 77.105,46.1103343 76.5608,47.1056343 L76.0148,48.1035343 C75.4565,49.1253343 73.9896,49.1253343 73.4313,48.1035343 L72.8853,47.1056343 C72.3405,46.1103343 71.5224,45.2916343 70.5264,44.7474343 L69.5286,44.2014343 C68.5074,43.6431343 68.5074,42.1762343 69.5286,41.6173343 L70.5264,41.0719343 C71.5224,40.5271343 72.3405,39.7090343 72.8853,38.7130343 L73.4313,37.7152343 C73.9896,36.6940343 75.4565,36.6940343 76.0148,37.7152343 Z' id='Path' fill='%2386B4FF' fill-rule='nonzero'%3E%3C/path%3E %3C/g%3E %3C/g%3E %3C/g%3E %3C/g%3E %3C/svg%3E"},"./assets/images/logo_bd.png":function(e,t,n){e.exports=n.p+"assets/images/logo_bd.png"},"./package.json":function(e){e.exports=JSON.parse('{"name":"lumin-pdf","author":"Lumin PDF","version":"6.5.6","description":"WebViewer UI built in React","main":"src/index.js","scripts":{"download-webviewer":"npx @pdftron/webviewer-downloader --core-only --v 8.1.0 --path ./lib","start":"npm run prebuild && NODE_ENV=development babel-node ./dev-server.js","test":"babel-node ./test/test-server.js","test-jest":"jest -w 1 --config ./jest.config.json -u","test-jest:silent":"jest --config ./jest.config.json --reporters=jest-silent-reporter -u","test-jest:coverage":"jest -w 1 --config ./jest.config.json --coverage -u","test-jest:badges":"jest -w 1 --config ./jest.config.json --coverage -u && jest-coverage-badges input \\"src/coverage/coverage-summary.json\\" output \\"badges\\"","cypress:open":"cypress open --project ./test/cypress","lint":"eslint ./src/**/*.js","lint:fix":"eslint --fix ./src/**/*.js","clean":"rimraf build","bundle:dev":"webpack --progress --config ./webpack.config.prod.js","build:dev":"npm run clean && npm run prebuild && npm run bundle:dev","bundle:staging":"webpack --progress --config ./webpack.config.prod.js","build:staging":"npm run clean && npm run prebuild && npm run bundle:staging","bundle:preprod":"webpack --progress --config ./webpack.config.prod.js","build:preprod":"npm run clean && npm run prebuild && npm run bundle:preprod","bundle:prod":"webpack --progress --config ./webpack.config.prod.js","build:prod":"npm run clean && npm run prebuild && npm run bundle:prod","bundle":"webpack --progress --config ./webpack.config.prod.js","build":"npm run clean && npm run prebuild && npm run bundle","translation":"node ./scripts/translate-i18n-files.js","generate-build-version":"node ./scripts/generate-build-version","prebuild":"npm run generate-build-version && NODE_ENV=production","preinstall":"npx npm-force-resolutions"},"lint-staged":{"src/**/*.{js,jsx}":["eslint --fix","git add"],"src/**/*.{css,scss,styled.js}":["stylelint --fix","git add"]},"husky":{"hooks":{"pre-commit":"lint-staged"}},"devDependencies":{"@apollo/react-testing":"^3.1.3","@babel/cli":"^7.7.7","@babel/core":"^7.7.7","@babel/node":"^7.7.7","@babel/plugin-proposal-class-properties":"^7.7.4","@babel/plugin-proposal-decorators":"^7.7.4","@babel/plugin-proposal-export-namespace-from":"^7.7.4","@babel/plugin-proposal-function-sent":"^7.7.4","@babel/plugin-proposal-json-strings":"^7.7.4","@babel/plugin-proposal-nullish-coalescing-operator":"^7.14.5","@babel/plugin-proposal-numeric-separator":"^7.7.4","@babel/plugin-proposal-optional-chaining":"^7.8.3","@babel/plugin-proposal-throw-expressions":"^7.7.4","@babel/plugin-syntax-dynamic-import":"^7.7.4","@babel/plugin-syntax-import-meta":"^7.7.4","@babel/plugin-transform-runtime":"^7.7.6","@babel/preset-env":"^7.10.2","@babel/preset-react":"^7.7.4","@babel/runtime":"^7.7.7","@google-cloud/translate":"^6.0.3","babel-eslint":"^10.0.3","babel-loader":"^8.0.0","babel-plugin-import":"^1.13.3","babel-plugin-lodash":"^3.3.4","babel-plugin-styled-components":"^1.12.0","babel-preset-stage-2":"^6.24.1","body-parser":"^1.19.0","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^6.0.3","css-loader":"^3.3.0","dotenv":"^8.2.0","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","enzyme-to-json":"^3.4.3","eslint":"^7.2.0","eslint-config-airbnb":"^18.2.1","eslint-import-resolver-webpack":"^0.13.0","eslint-plugin-babel":"^5.3.0","eslint-plugin-import":"^2.22.1","eslint-plugin-jsx-a11y":"^6.4.1","eslint-plugin-react":"^7.21.5","eslint-plugin-react-hooks":"^4.0.0","eslint-plugin-sonarjs":"^0.6.0","express":"^4.17.1","html-webpack-plugin":"4.5.0","husky":"^4.2.5","i18next-xhr-backend":"^3.2.2","identity-obj-proxy":"^3.0.0","ip":"^1.1.5","jest":"^26.1.0","jest-canvas-mock":"^2.2.0","jest-coverage-badges":"^1.1.2","jest-silent-reporter":"^0.3.0","lint-staged":"^10.2.7","opn":"^6.0.0","optimize-css-assets-webpack-plugin":"^5.0.4","postcss-flexbugs-fixes":"^4.2.1","postcss-import":"^12.0.1","postcss-loader":"3.0.0","postcss-preset-env":"6.7.0","postcss-safe-parser":"^5.0.2","react-dev-utils":"^11.0.4","react-list":"^0.8.13","redux-logger":"^3.0.6","redux-mock-store":"^1.5.3","rimraf":"^3.0.0","sass":"^1.35.1","sass-loader":"^10.0.5","script-ext-html-webpack-plugin":"^2.1.5","speed-measure-webpack-plugin":"^1.5.0","style-loader":"1.3.0","stylelint":"^13.13.1","stylelint-config-recommended":"^3.0.0","stylelint-scss":"^3.17.2","svg-inline-loader":"^0.8.0","svg-url-loader":"^2.3.3","terser-webpack-plugin":"^4.1.0","url-loader":"^2.3.0","webpack":"^4.46.0","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.10","webpack-dev-middleware":"^3.7.2","webpack-hot-middleware":"^2.25.1","webpack-version-file":"^0.1.5","workbox-webpack-plugin":"^6.1.5"},"dependencies":{"@apollo/react-hooks":"^3.1.3","@aws-amplify/analytics":"3.3.10","@aws-amplify/auth":"3.4.10","@datadog/browser-logs":"^3.4.0","@hookform/resolvers":"^2.7.1","@loadable/component":"^5.14.1","@logdna/logger":"^2.1.3","@material-ui/core":"^4.8.0","@material-ui/icons":"^4.5.1","@material-ui/lab":"^4.0.0-alpha.36","@material-ui/styles":"^4.8.2","@pdftron/webviewer-downloader":"^1.4.2","@stripe/react-stripe-js":"^1.4.1","@stripe/stripe-js":"^1.15.1","apollo-cache-inmemory":"^1.6.5","apollo-client":"^2.6.8","apollo-link":"^1.2.13","apollo-link-error":"^1.1.12","apollo-link-http":"^1.5.16","apollo-link-schema":"^1.2.4","apollo-link-ws":"^1.0.19","apollo-utilities":"^1.3.3","autolinker":"^3.14.1","autoprefixer":"^9.7.3","axios":"^0.22.0","classnames":"^2.2.6","compressorjs":"^1.0.6","dayjs":"^1.9.4","dompurify":"^2.2.6","dotenv-webpack":"^1.7.0","downshift":"^5.0.6","file-saver":"^2.0.2","fuse.js":"^6.4.6","graphql":"^14.5.8","graphql-tag":"^2.10.1","graphql-tools":"^4.0.6","history":"^4.10.1","hotkeys-js":"^3.7.3","html2canvas":"git+https://github.com/mparizeau/html2canvas.git","i18next":"^19.3.4","immer":"^9.0.6","jss":"^10.0.2","lodash":"^4.17.21","mime-types":"^2.1.25","mini-css-extract-plugin":"^1.6.0","papaparse":"^5.3.0","polished":"^4.1.1","postcss-cssnext":"^3.1.0","postcss-normalize":"^8.0.1","promise-timeout":"^1.3.0","prop-types":"^15.7.2","react":"^16.14.0","react-adsense":"0.1.0","react-apollo":"^3.1.3","react-circular-progressbar":"^2.0.3","react-color":"^2.19.3","react-contexify":"git+https://github.com/nhuttm/react-contexify.git#wip/enable-dist","react-custom-scrollbars":"^4.2.1","react-dom":"^16.14.0","react-draggable":"^4.2.0","react-dropbox-chooser":"git+https://github.com/nhuttm/react-dropbox-chooser.git","react-dropzone":"^10.2.1","react-google-login":"^5.0.7","react-google-picker":"^0.1.0","react-google-recaptcha":"^2.1.0","react-helmet":"^5.2.1","react-highlight-words":"^0.16.0","react-hook-form":"^7.12.2","react-hot-loader":"^4.13.0","react-i18next":"^11.3.4","react-idle-timer":"^4.2.12","react-input-autosize":"^2.2.2","react-joyride":"^2.3.0","react-loader-spinner":"^3.1.14","react-lottie":"^1.2.3","react-measure":"^2.3.0","react-notifications-component":"^2.2.4","react-onclickoutside":"^6.9.0","react-redux":"^7.1.3","react-responsive-carousel":"^3.2.9","react-router":"^5.1.2","react-router-dom":"^5.1.2","react-slider":"^1.1.4","react-spring":"^9.1.2","react-transition-group":"^4.4.2","react-use":"^15.3.4","react-virtualized":"^9.21.2","react-window":"^1.8.5","recharts":"^1.8.5","recompose":"^0.30.0","redux":"^4.0.5","redux-devtools-extension":"^2.13.9","redux-thunk":"^2.3.0","regenerator-runtime":"^0.13.3","socket.io-client":"git+https://github.com/nhuttm/socket.io-client.git","styled-components":"^5.2.1","subscriptions-transport-ws":"^0.10.0","swiper":"^6.8.4","unfetch":"^4.1.0","uuid":"^3.3.3","validator":"^13.5.2","yup":"^0.32.9","zenscroll":"^4.0.2"},"resolutions":{"xmlhttprequest-ssl":"1.6.2","css-what":"5.0.1","trim-newlines":"3.0.1","normalize-url":"^4.5.1","set-value":"^4.0.1","axios":"^0.21.2","immer":"^9.0.6","glob-parent":"5.1.2","@aws-sdk/shared-ini-file-loader":"1.0.0-rc.9"},"browserslist":["defaults"]}')},"./src/HOC/withDocumentItemAuthorization/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var o=n("./node_modules/@babel/runtime/helpers/extends.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/inherits.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),f=n.n(p),g=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(g),b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(b),E=n("./node_modules/react/index.js"),y=n.n(E),C=n("./node_modules/react-redux/es/index.js"),T=n("./node_modules/prop-types/index.js"),P=n.n(T),w=n("./src/redux/selectors/index.js"),j=n("./src/utils/index.js");function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return f()(this,n)}}var O=function(e){var t=function(t){m()(o,t);var n=k(o);function o(){var e;i()(this,o);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a)),v()(u()(e),"getWithAuthorize",(function(){var t=e.props,n=t.document,o=t.organizations,a=t.teams,r=o.data;return Object(j.s)({document:n,teams:a,orgData:r})})),e}return c()(o,[{key:"render",value:function(){var t=this.getWithAuthorize();return y.a.createElement(e,a()({},this.props,{withAuthorize:t}))}}]),o}(y.a.PureComponent);return t.propTypes={document:P.a.object.isRequired,organizations:P.a.object,teams:P.a.array},t.defaultProps={organizations:{},teams:[]},Object(C.c)((function(e){return{organizations:w.a.getOrganizationList(e),teams:w.a.getTeams(e)}}))(t)}},"./src/constants/commentState.js":function(e,t,n){"use strict";var o="Reopened the comment";t.a={Resolved:{state:"Completed",message:"Marked as resolved"},Open:{state:"None",message:o},Cancelled:{state:"Cancelled",message:o},Rejected:{state:"Rejected",message:o}}},"./src/constants/customDataConstant.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var o={APPLIED:{key:"isApplied",truthyValue:"true"}},a={IS_HIGHLIGHT_COMMENT:{key:"isHighlightComment",truthyValue:"true"},HIGHLIGHT_HAS_CONTENT:{key:"hasContent",noValue:"false",hasValue:"true"},HIGHLIGHT_TEXT:{key:"highlightText"},STICKY_ID:{key:"stickyLinkId"}},r={MENTION:{key:"trn-mention"}}},"./src/constants/pikaday.scss":function(e,t,n){},"./src/constants/quill.scss":function(e,t,n){},"./src/constants/sortStrategies.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("./node_modules/i18next/dist/esm/i18next.js"),a=n("./node_modules/dayjs/dayjs.min.js"),r=n.n(a),i=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),c=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(c),u=n("./src/core/index.js"),d=new function e(){s()(this,e),l()(this,"getDocumentCenter",(function(e){var t;return{x:(t=e<=u.default.getTotalPages()?u.default.getPageInfo(e):{width:0,height:0}).width/2,y:t.height/2}})),l()(this,"getRotationRad",(function(e){return(4-u.default.getRotation(e))*(Math.PI/2)})),l()(this,"getRotationDeg",(function(e){return 90*(4-u.default.getRotation(e))}))},m=function(e,t,n,o,a){var r=Math.sin(a),i=Math.cos(a);return{x:i*(n-e)+r*(o-t)+e,y:i*(o-t)-r*(n-e)+t}},p=function(e){var t=e.getReplies().reduce((function(e,t){var n=t.DateModified||t.DateCreated;return n&&new Date(n)>new Date(e)?n:e}),0);return t||(e.DateModified?e.DateModified:e.DateCreated?e.DateCreated:new Date)},f={position:{getSortedNotes:function(e){return e.sort((function(e,t){if(e.PageNumber===t.PageNumber){var n=u.default.docViewer&&u.default.getTotalPages(),o=e.PageNumber>n?n:e.PageNumber,a=d.getRotationRad(o),r=d.getDocumentCenter(o),i=[m(r.x,r.y,e.X,e.Y,a),m(r.x,r.y,e.X+e.Width,e.Y+e.Height,a)],s=[m(r.x,r.y,t.X,t.Y,a),m(r.x,r.y,t.X+t.Width,t.Y+t.Height,a)];return i.reduce((function(e,t){return t.y<e?t.y:e}),Number.MAX_SAFE_INTEGER)-s.reduce((function(e,t){return t.y<e?t.y:e}),Number.MAX_SAFE_INTEGER)}return e.PageNumber-t.PageNumber}))},shouldRenderSeparator:function(e,t){return t.PageNumber!==e.PageNumber},getSeparatorContent:function(e,t,n){var a=n.pageLabels;return"".concat(o.a.t("option.shared.page")," ").concat(a[t.PageNumber-1])}},time:{getSortedNotes:function(e){return e.sort((function(e,t){return p(t)-p(e)}))},shouldRenderSeparator:function(e,t){return r()(p(e)).format("MMM D, YYYY")!==r()(p(t)).format("MMM D, YYYY")},getSeparatorContent:function(e,t){var n=r()(new Date).format("MMM D, YYYY"),a=r()(new Date(new Date-864e5)).format("MMM D, YYYY"),i=r()(p(t)).format("MMM D, YYYY");return i===n?o.a.t("option.notesPanel.separator.today"):i===a?o.a.t("option.notesPanel.separator.yesterday"):i}}},g=function(){return f}},"./src/constants/timeTracking.js":function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var o="waitingForViewer",a="startDownloadDocument",r="downloadDocumentComplete",i="firstPageRender",s="pdfOpen"},"./src/constants/tokenType.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={INVITE:"invite",SHARE:"share"}},"./src/constants/toolsName.js":function(e,t,n){"use strict";t.a={SQUIGGLY:"AnnotationCreateTextSquiggly",HIGHTLIGHT:"AnnotationCreateTextHighlight",UNDERLINE:"AnnotationCreateTextUnderline",STRIKEOUT:"AnnotationCreateTextStrikeout",FREETEXT:"AnnotationCreateFreeText",FREEHAND:"AnnotationCreateFreeHand",STICKY:"AnnotationCreateSticky",SIGNATURE:"AnnotationCreateSignature",REDACTION:"AnnotationCreateRedaction",STAMP:"AnnotationCreateStamp",ERASER:"AnnotationEraserTool"}},"./src/constants/types.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={PDF:"pdf",OFFICE:"office",BLACKBOX:"blackbox",XOD:"xod",ALL:"all"}},"./src/helpers/MentionsManager.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),f=n.n(p),g=n("./node_modules/@babel/runtime/helpers/createClass.js"),h=n.n(g),b=n("./src/core/index.js"),v=n("./src/services/graphServices/documentGraphServices.js"),E=n("./src/redux/actions/index.js"),y=n("./src/redux/selectors/index.js"),C=n("./src/redux/store/index.js"),T=n("./src/constants/customDataConstant.js");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(){function e(){f()(this,e)}return h()(e,[{key:"initialize",value:function(e,t){var n=this;this.isInitialize=!0,this.store=e,this.events={},this.idMentionDataMap={},this.allowedTrailingCharacters=[" "],t.addEventListener("annotationChanged",(function(e,t,o){!o.imported&&e.length&&n.getUserData().length&&("add"===t?n.handleAnnotationsAdded(e):"modify"===t?n.handleAnnotationsModified(e):"delete"===t&&n.handleAnnotationsDeleted(e))}))}},{key:"handleAnnotationsAdded",value:function(e){var t=this,n=[];e.forEach((function(e){var o=t.extractMentionDataFromAnnot(e);t.idMentionDataMap[e.Id]=o,n=n.concat(o.mentions)})),n.length&&this.trigger("mentionChanged",[n,"add"])}},{key:"handleAnnotationsModified",value:function(e){var t=this,n=[],o=[],a=[];e.forEach((function(e){var r=t.idMentionDataMap[e.Id]||{mentions:[],contentWithoutMentions:""},i=t.extractMentionDataFromAnnot(e),s=r.mentions,c=i.mentions;t.idMentionDataMap[e.Id]=i,c.forEach((function(e){!s.find((function(n){return t.isSameMention(n,e)}))&&n.push(e)})),s.forEach((function(e){!c.find((function(n){return t.isSameMention(e,n)}))&&a.push(e)})),s.length&&r.contentWithoutMentions!==i.contentWithoutMentions&&(o=o.concat(c))})),n.length&&this.trigger("mentionChanged",[n,"add"]),o.length&&this.trigger("mentionChanged",[o,"modify"]),a.length&&this.trigger("mentionChanged",[a,"delete"])}},{key:"handleAnnotationsDeleted",value:function(e){var t=this,n=[];e.forEach((function(e){t.idMentionDataMap[e.Id]&&(n=n.concat(t.idMentionDataMap[e.Id].mentions),delete t.idMentionDataMap[e.Id])})),n.length&&this.trigger("mentionChanged",[n,"delete"])}},{key:"extractMentionDataFromStr",value:function(e){for(var t,n=/@\[(.*?)\]\((.*?)\)/g,o=[],a=e;null!==(t=n.exec(e));){var r=t,i=m()(r,3),s=i[0],c=i[1],l=i[2];o.push(l),a=a.replace(s.slice(1),c)}return{plainTextValue:a,ids:o}}},{key:"extractMentionDataFromAnnot",value:function(e){var t=this,n=e.getCustomData(T.a.MENTION.key),o=n&&JSON.parse(n),a=this.getUserData(),r=e.getContents(),i={mentions:[],contentWithoutMentions:r};return o?(a.forEach((function(n){o.ids.includes(n.id)&&t.isValidMention(r,n.value)&&(i.mentions.push(w(w({},n),{},{annotId:e.Id})),i.contentWithoutMentions=i.contentWithoutMentions.replace("@".concat(n.value),""))})),i):i}},{key:"isValidMention",value:function(e,t){t="@".concat(t);var n=e.indexOf(t),o=e[n+t.length],a="undefined"===typeof o,r=this.getAllowedTrailingCharacters();return a||"*"===r||r.includes(o)}},{key:"isSameMention",value:function(e,t){for(var n in e)if(e[n]!==t[n])return!1;return!0}},{key:"createMentionReply",value:function(e,t){var n=this.extractMentionDataFromStr(t),o=n.plainTextValue,a=n.ids,r=new Annotations.StickyAnnotation;r.InReplyTo=e.Id,r.X=e.X,r.Y=e.Y,r.PageNumber=e.PageNumber,r.Author=b.default.getCurrentUser(),r.setContents(o||""),r.setCustomData(T.a.MENTION.key,JSON.stringify({contents:t,ids:a})),e.addReply(r),b.default.addAnnotations([r],{})}},{key:"setUserData",value:function(e){e=e.filter((function(e){return e.name})).map((function(e){return w(w({},e),{},{id:e.id||e.email||e.value})})),this.store.dispatch(E.a.setUserData(e))}},{key:"initUserData",value:function(){var e=c()(i.a.mark((function e(t){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentDocument,0!==Object.keys(n).length){e.next=3;break}return e.abrupt("return",null);case 3:if(!n.isGuest){e.next=7;break}this.setUserData([]),e.next=11;break;case 7:return e.next=9,v.a.getMentionList({documentId:n._id});case 9:o=e.sent,this.setUserData(o.map((function(e){return{name:e.name,email:e.email,avatarRemoteId:e.avatarRemoteId,id:e._id}})));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserData",value:function(){return y.a.getUserData(this.store.getState())}},{key:"setAllowedTrailingCharacters",value:function(e){this.allowedTrailingCharacters=e}},{key:"getAllowedTrailingCharacters",value:function(){return this.allowedTrailingCharacters}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this}},{key:"off",value:function(e,t){return this.events?("undefined"===typeof e&&(this.events={}),this.events[e]?(this.events[e]=t?this.events[e].filter((function(e){return e!==t})):[],this):this):this}},{key:"one",value:function(e,t){var n=this,o=t;return t=function(){n.off(e,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];o.apply(n,r)},this.on(e,t)}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return this.events&&this.events[e]?(1===o.length&&Array.isArray(o[0])&&(o=o[0]),this.events[e].forEach((function(e){e.call.apply(e,[t].concat(a()(o)))})),this):this}},{key:"addEventListener",value:function(){this.on.apply(this,arguments)}},{key:"setEventListener",value:function(){this.on.apply(this,arguments)}},{key:"removeEventListener",value:function(){this.off.apply(this,arguments)}},{key:"isInit",get:function(){return this.isInitialize}}]),e}();t.a=new j(C.a)},"./src/helpers/copyText.js":function(e,t,n){"use strict";var o=n("./src/core/index.js"),a=n("./src/services/index.js"),r=n("./src/constants/messages.js");t.a=function(){if(window.clipboardData)window.clipboardData.setData("Text",o.default.getSelectedText());else{var e=document.getElementById("copy-textarea");e.value=o.default.getSelectedText(),e.select(),e.setSelectionRange(0,99999);try{document.execCommand("copy"),e.blur()}catch(t){a.g.error({errorMessage:r.z.UNSUPPORTED_COPY_TEXT,code:JSON.stringify(t)})}}}},"./src/helpers/createTextAnnotationAndSelect.js":function(e,t,n){"use strict";var o=n("./src/core/index.js"),a=n("./src/helpers/getToolStyles.js"),r=n("./src/helpers/scrollToAnnotation.js"),i=n("./src/constants/map.js"),s=n("./src/constants/customDataConstant.js"),c=n("./src/redux/actions/index.js");t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=l(e,t,n);o.default.clearSelection(),o.default.addAnnotations(a,{}),o.default.selectAnnotations(a),e(c.a.closeElement("textPopup"))};var l=function(e,t,n){var a=[],i=o.default.getSelectedTextQuads();return Object.keys(i).forEach((function(l){l=parseInt(l,10);var p=u(t,l,i);if(!window.Tools.TextAnnotationCreateTool.AUTO_SET_TEXT||p instanceof window.Annotations.RedactionAnnotation||p.setContents(o.default.getSelectedText(l)),p instanceof window.Annotations.RedactionAnnotation&&m(p),p instanceof window.Annotations.TextHighlightAnnotation&&n){p.setCustomData(s.b.IS_HIGHLIGHT_COMMENT.key,s.b.IS_HIGHLIGHT_COMMENT.truthyValue),p.setCustomData(s.b.HIGHLIGHT_HAS_CONTENT.key,s.b.HIGHLIGHT_HAS_CONTENT.noValue),p.NoResize=!0,p.NoMove=!0;var f=new window.Annotations.StickyAnnotation;f.X=p.X+p.Width/2,f.Y=p.Y+p.Height/2-f.Height/2,f.PageNumber=p.PageNumber,f.setCustomData(s.b.HIGHLIGHT_TEXT.key,o.default.getSelectedText()),f.NoView=!0,f.NoMove=!0,f.NoZoom=!0,f.Author=o.default.getCurrentUser(),p.setCustomData(s.b.STICKY_ID.key,f.Id),a.push(f),e(c.a.triggerNoteEditing()),e(c.a.closeElements(["leftPanel","searchPanel","searchOverlay"])),"Continuous"!==o.default.getDisplayMode()&&(o.default.setDisplayMode("Continuous"),Object(r.a)(o.default.getScrollViewElement(),p))}d(p),a.push(p)})),a},u=function(e,t,n){var a=new e;return a.PageNumber=t,a.Quads=n[t],a.Author=o.default.getCurrentUser(),a},d=function(e){var t=Object(i.d)(e);if(t){var n=Object(a.a)(t).StrokeColor;e.StrokeColor=n}},m=function(e){var t=o.default.getToolModeMap().AnnotationCreateRedaction.defaults,n=void 0===t?{}:t;if(n){if(n.StrokeColor){var a=n.StrokeColor;e.StrokeColor=new window.Annotations.Color(a.R,a.G,a.B,a.A)}if(n.StrokeThickness&&(e.StrokeThickness=n.StrokeThickness),n.FillColor){var r=n.FillColor;e.FillColor=new window.Annotations.Color(r.R,r.G,r.B,r.A)}}}},"./src/helpers/documentContainerHelper.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var o=n("./src/helpers/device.js"),a=function(e,t,n){var o=t.leftPanelWidth,a=void 0===o?300:o;e.isLeftPanelOpen&&!t.isLeftPanelOpen&&(i(a,n),n.style.marginLeft="0px"),e.isRightPanelOpen&&!t.isRightPanelOpen&&i(300,n),!e.isLeftPanelOpen&&t.isLeftPanelOpen&&(s(a,n),n.style.marginLeft="".concat(a,"px")),t.isLeftPanelOpen&&e.leftPanelWidth!==t.leftPanelWidth&&(n.style.width="".concat(window.innerWidth-a,"px"),n.style.marginLeft="".concat(a,"px")),!e.isRightPanelOpen&&t.isRightPanelOpen&&s(300,n)},r=function(e){var t=e.style.transition;e.style.transition="none";var n=parseInt(window.getComputedStyle(e).width,10);return e.style.transition=t,n},i=function(e,t){var n=r(t);if(o.j&&(t.style.width="".concat(n+e,"px")),o.i){t.style.width="".concat(n+e+17,"px")}},s=function(e,t){var n=r(t);if(o.j&&(t.style.width="".concat(n-e,"px")),o.i){t.style.width="".concat(n-e+17,"px")}},c=function(e){return["DocumentContainer",e.isHeaderOpen?"":"no-header",e.isSearchOverlayOpen?"search-overlay":""].join(" ").trim()},l=function(e,t){var n=e.isLeftPanelOpen,o=e.isRightPanelOpen,a=e.leftPanelWidth,r=void 0===a?300:a,i=window.innerWidth;n&&(i-=r),o&&(i-=300),t.style.width="".concat(i,"px")}},"./src/helpers/downloadPdf.js":function(e,t,n){"use strict";var o=n("./node_modules/file-saver/dist/FileSaver.min.js"),a=n("./src/core/index.js"),r=n("./src/helpers/device.js"),i=n("./src/helpers/fireEvent.js"),s=n("./src/redux/actions/index.js"),c=n("./src/utils/index.js");t.a=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=n.filename,u=void 0===l?(null===(t=a.default.getDocument())||void 0===t?void 0:t.getFilename())||"document":l,d=n.includeAnnotations,m=void 0===d||d,p=n.externalURL;n.downloadType||(n.downloadType="pdf"),e(s.a.openElement("loadingModal")),a.default.getAnnotationsList().forEach((function(e){Math.round(e.X)||(e.X=1),Math.round(e.Y)||(e.Y=1),Math.round(e.Width)||(e.Width=1),Math.round(e.Height)||(e.Height=1),a.default.getAnnotationManager().redrawAnnotation(e)}));var f=m&&!n.xfdfString?a.default.exportAnnotations():Promise.resolve("<xfdf></xfdf>");return f.then((function(t){n.xfdfString=n.xfdfString||t;var l=c.o.convertExtensionToPdf(u),d=a.default.getDocument();if(!p)return d.getFileData(n).then((function(t){var n,a=new Uint8Array(t);n=r.h?new Blob([a],{type:"application/pdf"}):new File([a],l,{type:"application/pdf"}),Object(o.saveAs)(n,l),e(s.a.closeElement("loadingModal")),Object(i.a)("finishedSavingPDF")}),(function(t){throw e(s.a.closeElement("loadingModal")),new Error(t.message)}));var m=document.getElementById("download-iframe")||document.createElement("iframe");m.width=0,m.height=0,m.id="download-iframe",m.src=null,document.body.appendChild(m),m.src=p,e(s.a.closeElement("loadingModal")),Object(i.a)("finishedSavingPDF")})).catch((function(){e(s.a.closeElement("loadingModal"))}))}},"./src/helpers/eventHandler.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return ce})),n.d(t,"b",(function(){return le}));var o,a,r=n("./src/core/index.js"),i=n("./src/redux/actions/index.js"),s=n("./src/helpers/device.js"),c=function(e){return new Array(e).fill().map((function(e,t){return"".concat(t+1)}))},l=n("./src/helpers/fireEvent.js"),u=n("./src/helpers/getHashParams.js"),d=n("./src/helpers/isDataElementPanel.js"),m=n("./src/redux/selectors/index.js"),p=n("./src/constants/types.js"),f=n("./src/constants/actionPriority.js"),g=!0,h=n("./src/helpers/localStorageManager.js"),b=n("./src/constants/messages.js"),v=n("./src/helpers/logger.js"),E=n("./src/constants/lumin-common.js"),y=function(e,t){try{localStorage.setItem("toolData-".concat(e),JSON.stringify(t))}catch(n){v.a.logInfo({message:"".concat(b.z.UNACCESS_LOCALSTORAGE," ").concat(n.message),reason:E.t.Service.PDFTRON})}},C=n("./src/constants/defaultTool.js"),T=n("./node_modules/@babel/runtime/regenerator/index.js"),P=n.n(T),w=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),j=n.n(w),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))},O=function(e,t){e.forEach((function(e){r.default.deleteAnnotations(e.getReplies(),{imported:t})}))},_=n("./src/helpers/openFilePicker.js"),A=n("./src/helpers/copyText.js"),x=n("./src/helpers/setToolModeAndGroup.js"),S=n("./src/helpers/zoom.js"),D=n("./src/helpers/print.js"),R=n("./src/helpers/createTextAnnotationAndSelect.js"),I=n("./src/constants/documentConstants.js"),M=n("./src/helpers/isFocusingElement.js"),N=n("./src/utils/activeToolsByHotkey.js"),L=n("./src/constants/customDataConstant.js"),B=n("./src/redux/store/index.js"),U=B.a.dispatch,F=(o=U,function(){o(i.a.closeElement("passwordModal"));var e=r.default.getTotalPages();s.k&&r.default.CoreControls.SetPreRenderLevel(2),e>=500&&r.default.setDisplayMode(r.default.CoreControls.DisplayModes.Single),o(i.a.setPageLabels(c(e))),o(i.a.setTotalPages(e));var t=r.default.getCurrentPage();o(i.a.setCurrentPage(t))}),G=function(e){return function(){e(i.a.closeElements(["annotationPopup","textPopup","contextMenuPopup"])),e(i.a.setDisplayMode(r.default.getDisplayMode())),Object(l.a)("layoutModeChanged",[r.default.getDisplayModeObject()])}}(U),H=(a=B.a,function(){var e=a.dispatch,t=a.getState;e(i.a.openElement("pageNavOverlay")),e(i.a.setLoadingProgress(1)),setTimeout((function(){e(i.a.closeElement("progressModal")),e(i.a.resetLoadingProgress())}),0),g&&(g=!1,Object(u.a)("enableRedaction",!1)||r.default.isCreateRedactionEnabled()?r.default.enableRedaction():r.default.disableRedaction(),r.default.isCreateRedactionEnabled()?e(i.a.enableElement("redactionButton",f.c)):e(i.a.disableElement("redactionButton",f.c))),r.default.setOptions({enableAnnotations:!0}),r.default.getOutlines((function(t){e(i.a.setOutlines(t))}));var n=r.default.getDocument();n.isWebViewerServerDocument()||n.getLayersArray().then((function(n){if(0===n.length){e(i.a.disableElement("layersPanel",f.a)),e(i.a.disableElement("layersPanelButton",f.a));var o=t();if("layersPanel"===m.a.getActiveLeftPanel(o)){var a=Object(d.b)(o).find((function(e){return!m.a.isElementDisabled(o,e)}));e(i.a.setActiveLeftPanel(a))}}else e(i.a.enableElement("layersPanel",f.a)),e(i.a.enableElement("layersPanelButton",f.a)),e(i.a.setLayers(n))})),n.getType()===p.a.PDF?e(i.a.enableElement("cropToolButton",f.a)):e(i.a.disableElement("cropToolButton",f.a)),Object(l.a)("documentLoaded")}),z=function(e){return function(){e(i.a.closeElements(["pageNavOverlay","notesPanel","searchPanel","leftPanel"])),e(i.a.setOutlines([])),e(i.a.setTotalPages(0))}}(U),W=function(e){return function(t){var n=r.default.docViewer;t===n.FitMode.Zoom?e(i.a.setFitMode("Zoom")):t===n.FitMode.FitWidth?e(i.a.setFitMode("FitWidth")):t===n.FitMode.FitPage&&(s.c&&r.default.fitToZoom(),e(i.a.setFitMode("FitPage"))),Object(l.a)("fitModeChanged",[t])}}(U),V=function(e){return function(t){e(i.a.setRotation(t)),Object(l.a)("rotationChanged",[t])}}(U),q=function(e){return function(t){var n=t.name,o=t.defaults;o&&h.a.isLocalStorageEnabled()&&y(n,o);var a=r.default.getToolMode();a&&a.name===n&&e(i.a.setActiveToolStyles(o))}}(U),Y=function(e){return function(t,n){n&&"TextSelect"===n.name&&(r.default.clearSelection(),e(i.a.closeElement("textPopup"))),t&&t.name===C.a&&(e(i.a.setActiveToolGroup("")),e(i.a.closeElement("toolsOverlay"))),e(i.a.setActiveToolNameAndStyle(t)),Object(l.a)("toolModeChanged",[t,n])}}(U),Z=function(e){return function(t){e(i.a.setZoom(t)),Object(l.a)("zoomChanged",[t])}}(U),K=function(e){return function(t){e(i.a.setCurrentPage(t)),Object(l.a)("pageChanged",[t])}}(U),X=function(e){return function(){var t=e.dispatch,n=["annotationPopup","toolsButton","linkButton"];r.default.isReadOnlyModeEnabled()?(r.default.disableTools(e),t(i.a.disableElements(n,f.a)),r.default.setToolMode(C.a)):(r.default.enableTools(e),t(i.a.enableElements(n,f.a))),t(i.a.setReadOnly(r.default.isReadOnlyModeEnabled())),t(i.a.setAdminUser(r.default.isUserAdmin())),t(i.a.setUserName(r.default.getCurrentUser())),r.default.drawAnnotationsFromList(r.default.getSelectedAnnotations())}}(B.a),J=function(e,t,n){var o=n.imported;"delete"===t&&O(e,o)},Q=function(e){return function(){e(i.a.setAnnotationsLoaded())}}(U),$=function(){r.default.setToolMode(C.a)},ee=function(){var e=j()(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.default.setToolMode(C.a),r.default.getTool("AnnotationCreateSignature").showPreview(),r.default.selectAnnotation(t),r.default.getTool("AnnotationCreateSignature").annot=null,e.next=7,k();case 7:r.default.getTool("AnnotationCreateSignature").hidePreview();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t=e.dispatch,n=e.getState;return function(e){var o=n(),a=m.a.isElementDisabled(o,"notesPanel"),s=m.a.isElementOpen(o,"leftPanel"),c=m.a.isElementOpen(o,"searchPanel");r.default.setToolMode(C.a),c&&t(i.a.closeElements(["searchPanel","searchOverlay"])),a||(s?(r.default.selectAnnotation(e),t(i.a.triggerNoteEditing())):(r.default.selectAnnotation(e),setTimeout((function(){document.body.style.pointerEvents="",t(i.a.triggerNoteEditing())}),300)))}}(B.a),ne=function(e){return function(t){var n,o=e.dispatch,a=(0,e.getState)(),s=r.default.getSelectedText(),c=window.getSelection().toString(),l=r.default.getSelectedAnnotations(),u=m.a.isOpenModalData(a),d=m.a.isElementOpen(a,"signInUseCommentModal"),p=m.a.getIsDialogOpen(a),f=m.a.isElementOpen(a,"signatureModal"),g=m.a.getIsNetworkDisconnected(a),h=m.a.getCurrentDocument(a),b=h&&(null===(n=h.documentStatus)||void 0===n?void 0:n.isPremium);if(t.shiftKey&&l.length>0&&l.forEach((function(e){e.Subject!==I.g.COMMENT&&(e.MaintainAspectRatio=!0)})),"Escape"!==t.key&&27!==t.which||(t.preventDefault(),Object(x.a)(e,"AnnotationEdit"),o(i.a.closeElements(["annotationPopup","textPopup","contextMenuPopup","toolStylePopup","annotationStylePopup","signatureModal","printModal","searchOverlay"]))),!(u||d||p||f||g))if(t.metaKey||t.ctrlKey){if("z"===t.key||90===t.which){var v=m.a.getCareTaker(a);t.shiftKey?v.redoAnnotation():v.undoAnnotation()}if(t.shiftKey)"+"===t.key||"="===t.key||"Add"===t.key||187===t.which?(t.preventDefault(),r.default.rotateClockwise()):"-"!==t.key&&"Subtract"!==t.key&&189!==t.which||(t.preventDefault(),r.default.rotateCounterClockwise());else if("c"===t.key||67===t.which)s&&!m.a.isFeatureDisabled(a,"copyText")?(Object(A.a)(),o(i.a.closeElement("textPopup"))):r.default.getSelectedAnnotations().length>0&&!c&&r.default.updateCopiedAnnotations();else if("v"===t.key||86===t.which){if(!Object(M.a)()){t.preventDefault();var E=r.default.getSelectedAnnotations().filter((function(e){return e.Subject===I.g.COMMENT&&e.getCustomData(L.b.HIGHLIGHT_TEXT.key)}));E.length>0&&(r.default.getAnnotationManager().deselectAnnotations(E),r.default.updateCopiedAnnotations()),r.default.pasteCopiedAnnotations()}}else if("o"===t.key||79===t.which)t.preventDefault(),Object(_.a)();else if("f"===t.key||70===t.which)t.preventDefault(),o(i.a.openElement("searchOverlay"));else if("+"===t.key||"="===t.key||"Add"===t.key||187===t.which)t.preventDefault(),Object(S.a)();else if("-"===t.key||"Subtract"===t.key||189===t.which)t.preventDefault(),Object(S.b)();else if("0"===t.key||48===t.which)t.preventDefault(),window.innerWidth>640?r.default.fitToPage():r.default.fitToWidth();else if("P"===t.key||80===t.which){t.preventDefault(),m.a.isElementDisabled(a,"printModal")?console.warn("Print has been disabled."):Object(D.a)(o,m.a.isEmbedPrintSupported(a))}}else if("PageUp"===t.key||33===t.which)t.preventDefault(),r.default.getCurrentPage()>1&&r.default.setCurrentPage(r.default.getCurrentPage()-1);else if("PageDown"===t.key||34===t.which)t.preventDefault(),r.default.getCurrentPage()<r.default.getTotalPages()&&r.default.setCurrentPage(r.default.getCurrentPage()+1);else if(s)s&&b&&("g"!==t.key&&71!==t.which||r.default.getTool("AnnotationCreateTextSquiggly").disabled?"h"!==t.key&&72!==t.which||r.default.getTool("AnnotationCreateTextHighlight").disabled?"k"!==t.key&&75!==t.which||r.default.getTool("AnnotationCreateTextStrikeout").disabled?"u"!==t.key&&85!==t.which||r.default.getTool("AnnotationCreateTextUnderline").disabled||Object(R.a)(o,window.Annotations.TextUnderlineAnnotation):Object(R.a)(o,window.Annotations.TextStrikeoutAnnotation):Object(R.a)(o,window.Annotations.TextHighlightAnnotation):Object(R.a)(o,window.Annotations.TextSquigglyAnnotation));else{if(Object(M.a)())return;"p"===t.key||80===t.which?Object(x.a)(e,"Pan"):t.which>64&&t.which<91&&("a"===t.key||65===t.which?Object(N.a)("shapeToolGroupButton","arrowToolButton","AnnotationCreateArrow"):"e"===t.key||69===t.which?Object(N.a)("eraserToolButton"):"f"===t.key||70===t.which?Object(N.a)("freeHandToolGroupButton"):"g"===t.key||71===t.which?Object(N.a)("textToolGroupButton","squigglyToolButton","AnnotationCreateTextSquiggly"):"h"===t.key||72===t.which?Object(N.a)("highlightToolButton","toolStylePopup"):"i"===t.key||73===t.which?Object(N.a)("stampToolButton"):"k"===t.key||75===t.which?Object(N.a)("textToolGroupButton","strikeoutToolButton","AnnotationCreateTextStrikeout"):"l"===t.key||76===t.which?Object(N.a)("shapeToolGroupButton","lineToolButton","AnnotationCreateLine"):"n"===t.key||78===t.which?Object(N.a)("stickyToolButton"):"o"===t.key||79===t.which?Object(N.a)("shapeToolGroupButton","ellipseToolButton","AnnotationCreateEllipse"):"r"===t.key||82===t.which?Object(N.a)("shapeToolGroupButton","rectangleToolButton","AnnotationCreateRectangle"):"s"===t.key||83===t.which?Object(N.a)("signatureToolButton"):"t"===t.key||84===t.which?Object(N.a)("freeTextToolButton"):"u"!==t.key&&85!==t.which||Object(N.a)("textToolGroupButton","underlineToolButton","AnnotationCreateTextUnderline"))}}}(B.a),oe=function(e){var t=e.dispatch;return function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e=!!e,t(i.a.setFullScreen(e))}}(B.a),ae=function(e){return function(t){var n=t.added,o=t.removed;if(n.length||o.length){var a=r.default.getTotalPages();e(i.a.setTotalPages(a)),setTimeout((function(){e(i.a.setPageLabels(c(a)))}),0)}}}(U),re=function(e){return j()(P.a.mark((function t(){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.default.getTool("AnnotationCreateSignature"),t.next=3,n.isEmptySignature();case 3:if(t.sent){t.next=7;break}n.addSignature(),t.next=9;break;case 7:Object(s.p)()&&e.dispatch(i.a.setActiveHeaderGroup("tools")),e.dispatch(i.a.toggleElement("signatureOverlay"));case 9:case"end":return t.stop()}}),t)})))}(B.a),ie=function(e){return function(t){e.getState().viewer.isAccessibleMode&&r.default.getDocument().loadPageText(t,(function(e){var n=document.createElement("div");n.tabIndex=0,n.textContent="Page ".concat(t+1,".\n").concat(e,"\nEnd of page ").concat(t+1,"."),n.style="font-size: 5px; overflow: auto; position: relative; z-index: -99999";var o="pageText".concat(t);n.id=o;var a=document.getElementById("pageContainer".concat(t)),r=a.querySelector("#".concat(o));r&&a.removeChild(r),a.appendChild(n)}))}}(B.a),se=(B.a,function(e){var t=r.default.getSelectedAnnotations();16===e.keyCode&&t.length>0&&t.forEach((function(e){e.Subject!==I.g.COMMENT&&(e.MaintainAspectRatio=!1)}))}),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e)return document.addEventListener("keydown",ne),void document.addEventListener("keyup",se);r.default.addEventListener("beforeDocumentLoaded",F),r.default.addEventListener("displayModeUpdated",G),r.default.addEventListener("documentLoaded",H),r.default.addEventListener("documentUnloaded",z),r.default.addEventListener("fitModeUpdated",W),r.default.addEventListener("rotationUpdated",V),r.default.addEventListener("toolUpdated",q),r.default.addEventListener("toolModeUpdated",Y),r.default.addEventListener("zoomUpdated",Z),r.default.addEventListener("pageNumberUpdated",K),r.default.addEventListener("layoutChanged",ae),r.default.addEventListener("updateAnnotationPermission",X),r.default.addEventListener("annotationChanged",J),r.default.addEventListener("annotationsLoaded",Q),r.default.addEventListener("pageComplete",ie),r.default.getTool("AnnotationCreateStamp").addEventListener("annotationAdded",$),r.default.getTool("AnnotationCreateSticky").addEventListener("annotationAdded",te),r.default.getTool("AnnotationCreateSignature").addEventListener("locationSelected",re),r.default.getTool("AnnotationCreateSignature").addEventListener("annotationAdded",ee),document.addEventListener("keydown",ne),document.addEventListener("keyup",se),document.addEventListener("fullscreenchange",oe),document.addEventListener("mozfullscreenchange",oe),document.addEventListener("webkitfullscreenchange",oe),document.addEventListener("MSFullscreenChange",oe)},le=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e)return document.removeEventListener("keydown",ne),void document.removeEventListener("keyup",se);r.default.removeEventListener("beforeDocumentLoaded",F),r.default.removeEventListener("displayModeUpdated",G),r.default.removeEventListener("documentLoaded",H),r.default.removeEventListener("documentUnloaded",z),r.default.removeEventListener("fitModeUpdated",W),r.default.removeEventListener("rotationUpdated",V),r.default.removeEventListener("toolUpdated",q),r.default.removeEventListener("toolModeUpdated",Y),r.default.removeEventListener("zoomUpdated",Z),r.default.removeEventListener("pageNumberUpdated",K),r.default.removeEventListener("layoutChanged",ae),r.default.removeEventListener("updateAnnotationPermission",X),r.default.removeEventListener("annotationChanged",J),r.default.removeEventListener("annotationsLoaded",Q),r.default.removeEventListener("pageComplete",ie),r.default.getTool("AnnotationCreateStamp").removeEventListener("annotationAdded",$),r.default.getTool("AnnotationCreateSticky").removeEventListener("annotationAdded",te),r.default.getTool("AnnotationCreateSignature").removeEventListener("locationSelected",re),document.removeEventListener("fullscreenchange",oe),document.removeEventListener("mozfullscreenchange",oe),document.removeEventListener("webkitfullscreenchange",oe),document.removeEventListener("MSFullscreenChange",oe),document.removeEventListener("keydown",ne),document.removeEventListener("keyup",se)}},"./src/helpers/getClassName.js":function(e,t,n){"use strict";t.a=function(e,t){return[e,t.isOpen?"open":"closed"].join(" ").trim()}},"./src/helpers/getOverlayPositionBasedOn.js":function(e,t,n){"use strict";t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",o=document.querySelector("[data-element=".concat(e,"]")),a=0,r="auto";if(!o||!t.current)return{left:-9999,right:r};var i=o.getBoundingClientRect(),s=i.left,c=i.right,l=i.width,u=t.current.getBoundingClientRect(),d=u.width;if("left"===n)if(s+d>window.innerWidth){var m=16;a="auto",r=m}else a=s,r="auto";else if("center"===n)if(s+(d+l)/2>window.innerWidth){var p=16;a="auto",r=p}else a=s+l/2-d/2,r="auto";else if(c-d<0){var f=16;r="auto",a=f}else r="auto",a=s-(d-l);return{left:isNaN(a)?a:Math.max(a,0),right:r}}},"./src/helpers/getRichTextCSSStyle.js":function(e,t,n){"use strict";t.a=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={0:t},o=e.length,a=0;a<o;a++)"\n"===e[a]&&(n[a]={},n[a+1]=t);return n[o]={},n}},"./src/helpers/getToolPopper.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(o),r=n("./src/constants/lumin-common.js"),i=n("./src/constants/documentConstants.js"),s=n("./src/constants/paymentConstant.js"),c=n("./src/constants/UrlSearchParam.js"),l=n("./src/constants/freeTrialExpire.js"),u=n("./src/constants/Routers.js"),d=n("./src/utils/index.js"),m=n("./src/constants/toolsName.js");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e,t){var n,o={title:"Premium feature",message:"",buttons:[]},a=(e||{}).documentStatus,r=void 0===a?{}:a;r.accountableBy===i.a.ORGANIZATION?o=f(f({},o),{},{message:"This is a premium feature. Unlock now for your organization to enjoy!",buttons:[{url:"".concat(u.c.ORG_ANNUAL_PAYMENT_URL,"?").concat(c.a.PAYMENT_ORG_TARGET,"=").concat(r.targetId),label:"Go Business",type:"danger"}]}):o=(null===(n=t.FREE_TRIAL_30)||void 0===n?void 0:n.status)===l.b?f(f({},o),{},{message:"Start your free ".concat(s.d," day trial to experience this feature"),buttons:[{label:"Go Premium",type:"primary",url:"/plans"},{label:"Start free trial",type:"danger",url:"/payment/free-trial"}]}):f(f({},o),{},{message:"Upgrade to premium to unlock this feature",buttons:[{url:u.c.PLANS,label:"Go Premium",type:"danger"}]});return o};function h(e){var t=e.toolName,n=e.currentUser,o=e.currentDocument,a=e.expires,i=d.M.validateFeature({currentUser:n,currentDocument:o}),s={title:"",message:"",buttons:[]};if(i===r.n.SIGNIN_REQUIRED)s=f(f({},s),{},{title:"Sign in required",message:"Sign in to unlock this feature",buttons:[{url:"/authentication/signin",label:"Sign In Now",type:"primary"}]});else switch(t){case m.a.STICKY:break;case m.a.FREETEXT:case m.a.FREEHAND:case m.a.SIGNATURE:if(i===r.n.PERMISSION_REQUIRED){var c={title:"Permission required",message:"Only user with Edit permission can use this feature"};s=f(f({},s),c)}break;case m.a.REDACTION:if(i===r.n.PREMIUM_FEATURE){var l=g(o,a);return s=f(f({},s),l)}if(i===r.n.PERMISSION_REQUIRED||"EDITOR"===o.roleOfDocument.toUpperCase())return s=f(f({},s),{},{title:"Permission required",message:"Only user with Share permission can use this feature"});break;default:if(i===r.n.PERMISSION_REQUIRED){var u={title:"Permission required",message:"Only user with Edit permission can use this feature"};s=f(f({},s),u)}if(i===r.n.PREMIUM_FEATURE){var p=g(o,a);s=f(f({},s),p)}}return s}},"./src/helpers/getToolStyles.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(o),r=n("./src/core/index.js");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=r.default.getTool(e),n=window.Tools.ToolNames;return(null===t||void 0===t?void 0:t.name)===n.REDACTION&&(t.defaults=s(s({},t.defaults),{},{StrokeThickness:null,Opacity:null,FontSize:null})),((null===t||void 0===t?void 0:t.name)===n.HIGHLIGHT||(null===t||void 0===t?void 0:t.name)===n.HIGHLIGHT2||(null===t||void 0===t?void 0:t.name)===n.HIGHLIGHT3||(null===t||void 0===t?void 0:t.name)===n.HIGHLIGHT4)&&!r.default.isBlendModeSupported("multiply")&&(t.defaults.Opacity=null),null===t||void 0===t?void 0:t.defaults}},"./src/helpers/isFocusingElement.js":function(e,t,n){"use strict";var o=n("./src/core/index.js");t.a=function(){var e=o.default.getAnnotationsList().filter((function(e){return e instanceof window.Annotations.FreeTextAnnotation})).some((function(e){var t;return null===(t=e.getEditor())||void 0===t?void 0:t.hasFocus()})),t=document.activeElement;return t instanceof window.HTMLInputElement||t instanceof window.HTMLTextAreaElement||e}},"./src/helpers/loadDocument.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(o),r=n("./src/lumin-components/PasswordModal/index.js"),i=n("./src/core/index.js"),s=n("./src/helpers/getHashParams.js"),c=n("./src/constants/lumin-common.js"),l=n("./src/helpers/logger.js"),u=n("./src/constants/urls.js"),d=n("./src/redux/actions/index.js"),m=n("./src/constants/timeTracking.js"),p=n("./src/screens/Viewer/time-tracking.js");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n=g(g({},h()),n)).docId=n.documentId||null,n.onLoadingProgress=function(t){return e(d.a.setLoadingProgress(t))},n.password=v(n.password,e),n.xodOptions=E(n),n.onError=function(t){l.a.logError({message:JSON.stringify(t),reason:(null===t||void 0===t?void 0:t.type)||c.t.Service.PDFTRON});var n={};n="InvalidPDF"===t.type?{type:c.A.ERROR,title:" Can not open document",message:"Lumin was unable to open this document. There may be a problem with the document. Please try again or use another document.",cancelButtonTitle:"Try again",confirmButtonTitle:"Send us your question",isFullWidthButton:!0,onCancel:function(){return window.location.reload()},onConfirm:function(){return window.open("".concat(u.j,"/contact"),"_self")}}:{type:c.A.ERROR,title:" Can not open document",message:"Something went wrong. Please try again or send us your concern.",cancelButtonTitle:"Try again",confirmButtonTitle:"Send us your question",isFullWidthButton:!0,onCancel:function(){return window.location.reload()},onConfirm:function(){window.location.href="".concat(u.j,"/contact")}},e(d.a.openModal(n)),e(d.a.closeElement("loadingModal"))},e(d.a.closeElement("passwordModal")),i.default.loadDocument(t,n),p.a.finishTracking(m.e),e(d.a.openElement("progressModal"))};var h=function(){return{startOffline:Object(s.a)("startOffline",!1),azureWorkaround:Object(s.a)("azureWorkaround",!1),pdftronServer:Object(s.a)("pdftronServer",""),singleServerMode:Object(s.a)("singleServerMode",!1),forceClientSideInit:Object(s.a)("forceClientSideInit",!1),disableWebsockets:Object(s.a)("disableWebsockets",!1),cacheKey:JSON.parse(Object(s.a)("cacheKey",null)),streaming:Object(s.a)("streaming",!1),useDownloader:Object(s.a)("useDownloader",!0),backendType:Object(s.a)("pdf",null),loadAsPDF:Object(s.a)("loadAsPDF",null)}},b=0,v=function(e,t){var n=!1;return function(o){n||"string"!==typeof e?(n&&console.error("Wrong password has been passed as an argument. WebViewer will open password modal."),Object(r.setCheckPasswordFunction)(o),t(d.a.setPasswordAttempts(b++)),t(d.a.openElement("passwordModal"))):(o(e),n=!0)}},E=function(e){var t={};return e.decryptOptions&&(t.decrypt=i.default.CoreControls.Encryption.decrypt,t.decryptOptions=e.decryptOptions),e.decrypt&&(t.decrypt=e.decrypt),e.streaming&&(t.streaming=e.streaming),e.azureWorkaround&&(t.azureWorkaround=e.azureWorkaround),e.startOffline&&(t.startOffline=e.startOffline),t}},"./src/helpers/openFilePicker.js":function(e,t,n){"use strict";t.a=function(){var e;null===(e=document.getElementById("file-picker"))||void 0===e||e.click()}},"./src/helpers/print.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("./node_modules/@babel/runtime/regenerator/index.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),i=n.n(r),s=n("./node_modules/i18next/dist/esm/i18next.js"),c=n("./src/redux/actions/index.js"),l=(n("./node_modules/dayjs/dayjs.min.js"),n("./src/constants/types.js")),u=(n("./src/constants/sortStrategies.js"),n("./src/helpers/device.js")),d=n("./src/core/index.js"),m=[],p=!1,f=1,g=function(){var e=i()(a.a.mark((function e(t,n,o,r,i){var u,m,f,g,E,y,C;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&(u=i.allPages,p=i.includeAnnotations,i.includeComments,m=i.pagesToPrint),d.default.getDocument()){e.next=3;break}return e.abrupt("return");case 3:if(d.default.getAnnotationsList().forEach((function(e){Math.round(e.X)||(e.X=1),Math.round(e.Y)||(e.Y=1),Math.round(e.Width)||(e.Width=1),Math.round(e.Height)||(e.Height=1),d.default.getAnnotationManager().redrawAnnotation(e)})),f=d.default.getDocument().getType(),g=d.default.getPrintablePDF())(E=window.open("","_blank")).document.write(s.a.t("message.preparingToPrint")),g.then((function(e){E.location.href=e.url}));else if(n&&f===l.a.PDF)t(c.a.openElement("loadingModal")),h().then((function(){t(c.a.closeElement("loadingModal"))}));else{if(t(c.a.openElement("loadingModal")),u)for(m=[],y=1;y<=d.default.getTotalPages();y++)m.push(y);C=b(m,!0,!0,!0,o,r),Promise.all(C).then((function(e){t(c.a.closeElement("loadingModal")),v(e)})).catch((function(e){console.error(e)}))}case 7:case"end":return e.stop()}}),e)})));return function(t,n,o,a,r){return e.apply(this,arguments)}}(),h=function(){return d.default.exportAnnotations().then((function(e){return d.default.getDocument().getFileData({xfdfString:e,printDocument:!0}).then((function(e){var t=new Uint8Array(e),n=new Blob([t],{type:"application/pdf"}),o=document.getElementById("print-handler");return o.src=URL.createObjectURL(n),new Promise((function(e){o.addEventListener("load",(function t(){o.contentWindow.print(),o.removeEventListener("load",t),e()}))}))}))}))},b=function(e,t,n,o,a,r,i){var s=[];return m=[],p=n,f=o,r,e.forEach((function(e){var t=E(e);s.push(y(e,t))})),s},v=function(e){var t=document.getElementById("print-handler");t.innerHTML="";var n=document.createDocumentFragment();e.forEach((function(e){n.appendChild(e)})),t.appendChild(n),u.o&&!u.e?document.execCommand("print"):window.print()},E=function(e){return d.default.getAnnotationsList().filter((function(t){return t.Listable&&t.PageNumber===e&&!t.isReply()&&!t.isGrouped()&&t.Printable}))},y=function(e,t){return new Promise((function(n){var o=C(e),r=function(){var o=i()(a.a.mark((function o(r){var i;return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(m=m.filter((function(e){return e!==s})),T(r,e),!p){o.next=7;break}return o.next=5,P(r,e);case 5:o.next=11;break;case 7:return t.forEach((function(e){return e.Printable=!1})),o.next=10,P(r,e);case 10:t.forEach((function(e){return e.Printable=!0}));case 11:(i=document.createElement("img")).src=r.toDataURL(),i.onload=function(){n(i)};case 14:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}(),s=d.default.getDocument().loadCanvasAsync({pageNumber:e,zoom:1,pageRotation:o,drawComplete:r,multiplier:f});m.push(s)}))},C=function(e){var t=d.default.getPageInfo(e),n=t.width,o=t.height,a=(4-w(e))%4;return a%2===0&&n>o?a++:a%2===1&&o>n&&a--,a},T=function(e,t){var n=d.default.getPageInfo(t),o=n.width,a=n.height,r=w(t),i=e.getContext("2d");switch(r){case 1:i.translate(o,0);break;case 2:i.translate(o,a);break;case 3:i.translate(0,a);break;default:return}i.rotate(90*r*Math.PI/180)},P=function(e,t){if(0===d.default.getAnnotationsList().filter((function(e){return e.PageNumber===t&&e instanceof window.Annotations.WidgetAnnotation})).length)return d.default.drawAnnotations(t,e);var o=j(t);return d.default.drawAnnotations(t,e,!0,o).then((function(){return document.body.appendChild(o),n.e(37).then(n.t.bind(null,"./node_modules/html2canvas/dist/npm/index.js",7)).then((function(t){return(0,t.default)(o,{canvas:e,backgroundColor:null,scale:1,logging:!1}).then((function(){document.body.removeChild(o)}))}))}))},w=function(e){return(d.default.getCompleteRotation(e)-d.default.getRotation(e)+4)%4},j=function(e){var t=d.default.getPageInfo(e),n=t.width,o=t.height,a=document.createElement("div");return a.id="printWidgetContainer",a.style.width=n,a.style.height=o,a.style.position="relative",a.style.top="-10000px",a}},"./src/helpers/scrollToAnnotation.js":function(e,t,n){"use strict";var o=n("./src/core/index.js");t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"smooth",a=o.default.getCurrentPage()===t.PageNumber,r=o.default.getDisplayMode()===o.default.CoreControls.DisplayModes.Continuous;a||r||o.default.setCurrentPage(t.PageNumber);var i=o.default.docViewer.getDisplayModeManager().getDisplayMode(),s=e.clientHeight,c=e.clientWidth,l=e.getBoundingClientRect().top+window.pageYOffset,u=e.getBoundingClientRect().left+window.pageXOffset,d={x1:t.X,y1:t.Y,x2:t.X+t.Width,y2:t.Y+t.Height},m=i.pageToWindow({x:d.x1,y:d.y1},t.PageNumber),p=i.pageToWindow({x:d.x2,y:d.y2},t.PageNumber),f=m.y<p.y?m.y:p.y,g=m.y>p.y?m.y:p.y,h=m.x<p.x?m.x:p.x,b=m.x>p.x?m.x:p.x,v=f-s/2+(g-f)/2-l,E=h-c/2+(b-h)/2-u;e.scrollTo({top:v,left:E,behavior:n})}},"./src/helpers/setCurrentPage.js":function(e,t,n){"use strict";var o=n("./src/core/index.js");t.a=function(e){var t=o.default.getTotalPages(),n=o.default.getCurrentPage(),a=Math.min(t,e);(a=Math.max(1,e))!==n&&o.default.setCurrentPage(a)}},"./src/helpers/setToolModeAndGroup.js":function(e,t,n){"use strict";var o=n("./src/core/index.js"),a=n("./src/helpers/toolStylesExist.js"),r=n("./src/redux/actions/index.js"),i=n("./src/redux/selectors/index.js");t.a=function(e,t){var n,s,c=e.dispatch,l=e.getState,u=(null===(n=i.a.getToolButtonObject(l(),t))||void 0===n?void 0:n.group)||"";c(u?r.a.openElement("toolsOverlay"):r.a.closeElement("toolsOverlay")),(null===(s=o.default.getToolMode())||void 0===s?void 0:s.name)===t&&Object(a.a)(t)?c(r.a.toggleElement("toolStylePopup")):(window.innerWidth<=900&&"Pan"!==t&&"AnnotationEdit"!==t&&c(r.a.setActiveHeaderGroup("tools")),c(r.a.closeElement("toolStylePopup")),o.default.setToolMode(t),c(r.a.setActiveToolGroup(u)))}},"./src/helpers/toolStylesExist.js":function(e,t,n){"use strict";var o=n("./src/core/index.js");t.a=function(e){if("CropPage"===e||"AnnotationCreateRubberStamp"===e)return!1;var t=o.default.getTool(e);return!(null===t||void 0===t||!t.defaults)&&Object.keys(t.defaults).length>0}},"./src/helpers/zoom.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l}));var o=n("./src/core/index.js"),a=n("./src/constants/zoomFactors.js"),r=function(){var e=o.default.getZoom();if(e!==Object(a.a)()){var t=e+s(e);l(Math.min(t,Object(a.a)()))}},i=function(){var e=o.default.getZoom();if(e!==Object(a.b)()){var t=e-s(e);l(Math.max(t,Object(a.b)()))}},s=function(e){var t=Object.keys(a.e).find((function(t){var n=a.e[t];return c(e,n)}));return parseFloat(t)},c=function(e,t){return null===t[0]?e<=t[1]:null===t[1]?e>=t[0]:e>=t[0]&&e<=t[1]},l=function(e){var t=o.default.getZoom(),n=u(e/t),a=n.x,r=n.y;o.default.zoomTo(e,a,r)},u=function(e){var t=document.getElementsByClassName("DocumentContainer")[0],n=document.getElementsByClassName("document")[0],o=window.innerWidth/2,a=window.innerHeight/2;return{x:(o+t.scrollLeft-n.offsetLeft)*e-o+t.offsetLeft,y:(a+t.scrollTop-n.offsetTop)*e-a+t.offsetTop}}},"./src/hooks/useTrackingModalEvent.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("./node_modules/react/index.js"),a=n("./node_modules/react-redux/es/index.js"),r=n("./src/redux/selectors/index.js"),i=n("./src/utils/Factory/EventCollection/ModalEventCollection.js");function s(e){var t=e.modalName,n=e.modalPurpose,s=e.isOpen,c=void 0!==s&&s,l=Object(a.f)(r.a.getOrganizationList,a.d),u=l.data,d=l.loading;Object(o.useEffect)((function(){c&&u&&!d&&t&&i.c.modalViewed({modalName:t,modalPurpose:n})}),[c,d]);return{trackModalViewed:function(){return t&&i.c.modalViewed({modalName:t,modalPurpose:n})},trackModalConfirmation:function(){return t&&i.c.modalConfirmation({modalName:t,modalPurpose:n})},trackModalDismiss:function(){return t&&i.c.modalDismiss({modalName:t,modalPurpose:n})},trackModalHidden:function(){return t&&i.c.modalHidden({modalName:t,modalPurpose:n})}}}},"./src/lumin-components/AccessUpdateToast/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),a=n.n(o),r=n("./node_modules/@material-ui/core/esm/Button/Button.js"),i=function(e){var t=e.title,n=void 0===t?"Access has been updated.":t;return a.a.createElement("div",{className:"AccessUpdateToast"},a.a.createElement("div",{className:"AccessUpdateToast__container"},a.a.createElement("span",{className:"AccessUpdateToast__message"},n),a.a.createElement(r.a,{className:"AccessUpdateToast__btn",onClick:function(){return window.location.reload()}},"Reload")))};t.a=i},"./src/lumin-components/ActionButton/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./src/lumin-components/ButtonLumin/index.js"),r=Object(o.c)((function(e,t){return{className:"ActionButton ".concat(t.className||"")}}),(function(e,t){return{onClick:function(){t.onClick(e)}}}))(a.a);t.a=r},"./src/lumin-components/ButtonLumin/index.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(r),s=n("./node_modules/react/index.js"),c=n.n(s),l=n("./node_modules/prop-types/index.js"),u=n.n(l),d=n("./node_modules/react-redux/es/index.js"),m=n("./src/lumin-components/Icon/index.js"),p=n("./src/lumin-components/Icomoon/index.js"),f=n("./src/lumin-components/ButtonMaterial/index.js"),g=n("./src/redux/selectors/index.js");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={disabled:u.a.bool,isActive:u.a.bool,arrow:u.a.bool,mediaQueryClassName:u.a.string,img:u.a.string,label:u.a.oneOfType([u.a.string,u.a.number]),title:u.a.string,color:u.a.string,dataElement:u.a.string,className:u.a.string,placement:u.a.string,iconSize:u.a.number,onClick:u.a.func.isRequired},E=function(e){var t,n=Object(d.f)((function(t){return[g.a.isElementDisabled(t,e.dataElement),g.a.getCustomElementOverrides(t,e.dataElement)]}),d.d),o=i()(n,2),a=o[0],r=o[1],s=void 0===r?{}:r,l=b(b({},e),s),u=l.disabled,h=l.isActive,v=l.arrow,E=l.mediaQueryClassName,y=l.img,C=l.label,T=l.color,P=l.dataElement,w=l.onClick,j=l.className,k=l.title,O=l.iconSize,_=l.icon,A=["ButtonLumin square",j||"",v?"down-arrow":"",h?"active":"inactive",C?"label":"icon",E||""].join(" ").trim(),x=null===y||void 0===y?void 0:y.trim().startsWith("data:"),S=y&&!x&&(!y.includes(".")||y.startsWith("<svg"));return S?t=c.a.createElement(m.a,{glyph:y,color:T}):y&&!S?t=c.a.createElement("img",{src:y}):C?t=c.a.createElement("p",null,C):_&&!S&&(t=c.a.createElement(p.a,{className:"".concat(_," ").concat("#FFFFFF"===T?"bordered":""),color:T,size:O})),c.a.createElement(f.a,{className:A,onClick:w,title:k,dataElement:P,disabled:a||u},c.a.createElement("span",{className:"ButtonLumin__content"},t))};E.propTypes=v,E.defaultProps={mediaQueryClassName:"",img:"",label:"",title:"",color:"",dataElement:"",className:"",placement:"",isActive:!1,arrow:!1,disabled:!1,iconSize:20};var y=c.a.memo(E);t.a=y},"./src/lumin-components/CopyDocumentModal/index.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/extends.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/regenerator/index.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),f=n.n(p),g=n("./node_modules/react/index.js"),h=n.n(g),b=n("./node_modules/prop-types/index.js"),v=n.n(b),E=n("./node_modules/react-router/esm/react-router.js"),y=n("./node_modules/react-redux/es/index.js"),C=n("./node_modules/react-hook-form/dist/index.esm.js"),T=n("./node_modules/@material-ui/styles/esm/makeStyles/makeStyles.js"),P=n("./node_modules/@hookform/resolvers/yup/dist/yup.module.js"),w=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),j=n("./src/lumin-components/Dialog/index.js"),k=n("./src/lumin-components/Shared/Input/index.js"),O=n("./src/lumin-components/Shared/Tooltip/index.js"),_=n("./src/lumin-components/Icomoon/index.js"),A=n("./src/lumin-components/CircularLoading/index.js"),x=n("./src/hooks/index.js"),S=n("./src/redux/selectors/index.js"),D=n("./src/services/index.js"),R=n("./src/utils/index.js"),I=n("./src/constants/styles/index.js"),M=n("./src/constants/documentConstants.js"),N=n("./src/utils/errorInterceptor.js"),L=n("./src/constants/lumin-common.js"),B=n("./src/constants/messages.js"),U=n("./src/constants/errorCode.js"),F=n("./node_modules/@material-ui/core/esm/FormControlLabel/FormControlLabel.js"),G=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),H=n.n(G),z=n("./node_modules/polished/dist/polished.esm.js"),W=n("./src/lumin-components/ButtonMaterial/index.js"),V=n("./src/utils/styles/mediaQuery.js"),q=n("./src/lumin-components/CustomCheckbox/index.js"),Y=n("./src/utils/styled.js"),Z=n("./node_modules/@material-ui/styles/esm/withStyles/withStyles.js");function K(){var e=H()(["\n    font-size: 18px;\n  "]);return K=function(){return e},e}function X(){var e=H()(["\n    padding: 12px 16px;\n    margin: 24px 0 16px;\n    font-size: 14px;\n  "]);return X=function(){return e},e}function J(){var e=H()(["\n    padding: 24px;\n  "]);return J=function(){return e},e}function Q(){var e=H()(["\n  padding: 16px;\n  ","\n  ","\n"]);return Q=function(){return e},e}var $=w.d.div.withConfig({componentId:"btuaod-0"})(["width:100%;max-width:500px;border-radius:4px;background-color:",";"," box-sizing:border-box;border:2px solid ",";color:",";"],(function(e){return e.theme.BACKGROUND}),(function(e){return Object(Y.a)(e)&&"box-shadow: ".concat(I.f.CONTAINER_SHADOW,";")}),(function(e){return e.theme.BORDER}),(function(e){return e.theme.PRIMARY_TEXT})),ee=Object(Y.c)(w.d.form)(Q(),(function(e){return e.loading&&"min-height: 200px;"}),V.a.md(J())),te=w.d.div.withConfig({componentId:"btuaod-1"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:3;width:50px;height:50px;display:flex;align-items:center;justify-content:center;"]),ne=w.d.div.withConfig({componentId:"btuaod-2"})(["display:flex;justify-content:center;align-items:center;margin-bottom:16px;"]),oe=w.d.p.withConfig({componentId:"btuaod-3"})(["width:100%;background-color:",";border-radius:4px;color:",";font-weight:500;box-sizing:border-box;line-height:1.5;font-size:12px;padding:8px 16px;margin:16px 0;",""],(function(e){return Object(Y.a)(e)?Object(z.a)(I.b.RED,.2):"#FFBCBF"}),I.b.RED,V.a.sm(X())),ae=w.d.h2.withConfig({componentId:"btuaod-4"})(["font-size:16px;font-weight:600;text-align:center;margin-right:12px;",""],V.a.sm(K())),re=Object(w.d)(W.a).withConfig({componentId:"btuaod-5"})(["flex:1;&.secondary{",";border:none;}"],(function(e){return!Object(Y.a)(e)&&"\n      background-color: ".concat(I.b.KASHMIR_BLUE,";\n      color: ").concat(I.b.ROCK_BLUE,";\n    ")})),ie=w.d.div.withConfig({componentId:"btuaod-6"})(["display:flex;align-items:center;margin-top:16px;","{&:not(:first-child){margin-left:16px;}}"],re),se=w.d.div.withConfig({componentId:"btuaod-7"})(["margin-bottom:16px;"]),ce=Object(Z.a)({label:{fontSize:14,fontWeight:500,color:I.b.PRIMARY}})(F.a),le=Object(w.d)(ce).withConfig({componentId:"btuaod-8"})(["margin-right:0;align-items:flex-start;"]),ue=Object(w.d)(q.a).withConfig({componentId:"btuaod-9"})(["margin-top:-6px;"]),de=n("./src/constants/organizationConstants.js"),me=Object(T.a)({label:{color:function(e){return e.color}}});function pe(e){var t=e.control,n=Object(g.useState)(!0),o=f()(n,2),r=o[0],s=o[1],l=Object(g.useContext)(w.a),d=me({color:l.PRIMARY_TEXT}),m=Object(C.f)({control:t,name:"destinationType"}),p=Object(C.f)({control:t,name:"destinationId"}),b=Object(g.useCallback)(u()(c.a.mark((function e(){var t,n,o,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.h.getTotalMembers({orgId:p});case 3:t=e.sent,n=t.pending,o=t.member,a=t.guest,s(o+a+n>de.b),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),D.g.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[p]);return Object(g.useEffect)((function(){m===M.e.ORGANIZATION&&b()}),[b,m]),m!==M.e.ORGANIZATION||r?null:h.a.createElement(C.a,{control:t,name:"notifyUpload",render:function(e){var t=e.field,n=t.value,o=t.onChange,r=i()(t,["value","onChange"]);return h.a.createElement(le,a()({classes:d,control:h.a.createElement(ue,{type:"checkbox",onChange:o}),label:"Notify everyone in that organization",checked:n},r))}})}pe.propTypes={control:v.a.object.isRequired};var fe=pe,ge=n("./node_modules/@apollo/react-hooks/lib/react-hooks.esm.js"),he=n("./src/graphql/OrganizationGraph.js"),be=n("./src/lumin-components/MaterialPopper/index.js"),ve=Object(T.a)({popper:{width:452,zIndex:"1301!important",boxSizing:"border-box"}}),Ee=Object(w.d)(k.a).withConfig({componentId:"sc-1998qgu-0"})(["padding-right:40px;&:read-only{pointer-events:auto;cursor:pointer;background-color:",";color:",";}"],(function(e){return Object(Y.a)(e)?I.b.WHITE:"#263d58"}),(function(e){return Object(Y.a)(e)?I.b.PRIMARY:I.b.SELAGO})),ye=w.d.div.withConfig({componentId:"sc-1998qgu-1"})(["position:absolute;top:50%;transform:translate3d(0,-50%,0);right:16px;display:flex;align-items:center;pointer-events:none;"]);function Ce(e){var t=e.value,n=e.onClick,o=e.children,r=e.inputProps,i=e.onClosed,s=Object(g.useState)(!1),c=f()(s,2),l=c[0],u=c[1],d=Object(g.useState)(0),m=f()(d,2),p=m[0],b=m[1],v=Object(g.useRef)(null),E=ve();return Object(g.useEffect)((function(){!function(){if(null!==v&&void 0!==v&&v.current){var e=v.current.getBoundingClientRect(),t=e.top,n=e.height,o=window.innerHeight-(t+n);b(o)}}()}),[l]),h.a.createElement("div",null,h.a.createElement(Ee,a()({},r,{postfix:h.a.createElement(ye,null,h.a.createElement(_.a,{className:"dropdown",size:16,color:I.b.SECONDARY})),value:t,onClick:function(){u(!0),n()},readOnly:!0,inputRef:v})),h.a.createElement(be.a,{open:l,anchorEl:null===v||void 0===v?void 0:v.current,placement:"bottom-end",handleClose:function(){u(!1)},onExited:i,parentOverflow:"viewport",disablePortal:!0,classes:E.popper,style:{width:"".concat(null!==v&&void 0!==v&&v.current?v.current.offsetWidth:320,"px")}},o({closePopper:function(){u(!1)},maxPopperHeight:p})))}Ce.propTypes={value:v.a.string,onClick:v.a.func,children:v.a.func.isRequired,inputProps:v.a.object,onClosed:v.a.func},Ce.defaultProps={value:"",inputProps:{},onClick:function(){},onClosed:function(){}};var Te=Ce,Pe=n("./src/constants/graphConstant.js"),we=n("./node_modules/react-transition-group/esm/CSSTransition.js"),je=n("./node_modules/fuse.js/dist/fuse.esm.js"),ke=n("./src/lumin-components/MaterialAvatar/index.js"),Oe=n("./src/lumin-components/CustomRadio/CustomRadio.js"),_e=n("./node_modules/@material-ui/core/esm/Button/Button.js");function Ae(){var e=H()(["\n    margin-left: 8px;\n  "]);return Ae=function(){return e},e}var xe=Object(Z.a)({root:{position:"relative",zIndex:1},label:{width:"100%",height:"100%",padding:"0 16px",display:"flex",alignItems:"center",boxSizing:"border-box"}})(_e.a),Se=w.d.div.withConfig({componentId:"sc-71zwgr-0"})(["position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0);z-index:1;display:flex;justify-content:center;align-items:center;width:24px;height:24px;background-color:transparent;border-radius:4px;opacity:0;transition:all 0.3s ease;:hover{background-color:",";}"],I.b.WHITE),De=Object(w.d)(xe).withConfig(Object(Y.b)(["selected"])).withConfig({componentId:"sc-71zwgr-1"})(["width:100%;height:44px;padding:0;text-align:left;text-transform:none;border-radius:0;color:",";border-radius:4px;",";.DestinationItem__checked{transition:opacity 0.3s ease;}&:hover{background-color:",";","}"],(function(e){return e.theme.PRIMARY_TEXT}),(function(e){return e.selected&&Object(Y.a)(e)&&"\n    background-color: ".concat(I.b.HAWKES_BLUE,";\n    color: ").concat(I.b.DARK_SKY_BLUE,";\n  ")}),(function(e){return Object(Y.a)(e)?I.b.SOLITUDE:I.b.SAN_JUAN}),(function(e){return e.showArrow&&"\n      .DestinationItem__checked {\n        opacity: 0;\n      }\n      ".concat(Se," {\n        opacity: 1;\n      }\n    ")})),Re=w.d.p.withConfig({componentId:"sc-71zwgr-2"})(["font-size:12px;font-weight:600;line-height:1.5;flex:1;margin-left:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",""],V.a.sm(Ae())),Ie=w.d.div.withConfig({componentId:"sc-71zwgr-3"})(["margin-left:8px;position:relative;width:24px;height:24px;display:flex;justify-content:center;align-items:center;"]),Me=w.d.div.withConfig({componentId:"sc-71zwgr-4"})(["height:44px;display:flex;align-items:center;cursor:pointer;","{opacity:1;}"],Se),Ne={_id:v.a.string.isRequired,name:v.a.string.isRequired,type:v.a.oneOf(Object.values(M.e)).isRequired,avatarRemoteId:v.a.string,onClick:v.a.func.isRequired,onExpand:v.a.func,selected:v.a.bool.isRequired,canExpand:v.a.bool};function Le(e){var t=e._id,n=e.name,o=e.type,a=e.avatarRemoteId,r=e.canExpand,i=e.selected,s=e.onExpand,c=e.onClick,l=Object(x.l)(),u=Object(g.useContext)(w.a).mode,d=function(e){e.stopPropagation(),s()},m=function(){var e=u===L.N.LIGHT?I.b.PRIMARY:I.b.SELAGO;switch(o){case M.e.PERSONAL:return{defaultSrc:R.d.getTextAvatar(n),variant:"circular",canExpand:!1};case M.e.ORGANIZATION:return{defaultSrc:h.a.createElement(_.a,{className:"organization-default",size:12,color:e}),variant:"rounded",canExpand:r};case M.e.ORGANIZATION_TEAM:return{defaultSrc:h.a.createElement(_.a,{className:"team",size:12,color:e}),variant:"circular",canExpand:!1};default:return null}}(),p=m.defaultSrc,f=m.canExpand,b=m.variant;return l?h.a.createElement(De,{showArrow:f,selected:i,onClick:function(){return c({name:n,type:o,_id:t})}},h.a.createElement(ke.a,{src:R.d.getAvatar(a),size:24,variant:b,secondary:!0,hasBorder:!0},p),h.a.createElement(Re,null,n),(i||f)&&h.a.createElement(Ie,null,i&&h.a.createElement(_.a,{className:"check DestinationItem__checked",size:14,color:I.b.DARK_SKY_BLUE}),f&&h.a.createElement(O.a,{title:"Go to list teams of this organization",placement:"bottom-end"},h.a.createElement(Se,{onClick:d},h.a.createElement(_.a,{className:"light-arrow-right",size:18,color:I.b.SECONDARY}))))):h.a.createElement(Me,{onClick:function(){return c({name:n,type:o,_id:t})}},h.a.createElement(Oe.a,{checked:i}),h.a.createElement(Re,null,n),f&&h.a.createElement(Ie,null,h.a.createElement(Se,{onClick:d},h.a.createElement(_.a,{className:"light-arrow-right",size:20,color:I.b.SECONDARY}))))}Le.propTypes=Ne,Le.defaultProps={avatarRemoteId:null,onExpand:function(){},canExpand:!1};var Be=Le,Ue=n("./node_modules/react-custom-scrollbars/lib/index.js"),Fe=n.n(Ue),Ge=n("./src/lumin-components/Shared/ButtonIcon/index.js");function He(){var e=H()(["\n    font-size: 14px;\n    margin-top: 16px;\n  "]);return He=function(){return e},e}function ze(){var e=H()(["\n    font-size: 14px;\n  "]);return ze=function(){return e},e}function We(){var e=H()(["\n    margin-bottom: 4px;\n  "]);return We=function(){return e},e}function Ve(){var e=H()(["\n    padding: 0 24px;\n  "]);return Ve=function(){return e},e}function qe(){var e=H()(["\n        padding-bottom: 24px;\n        max-height: ","px !important;\n      "]);return qe=function(){return e},e}function Ye(){var e=H()(["\n    padding-top: 24px;\n  "]);return Ye=function(){return e},e}var Ze=Object(w.d)(Fe.a).withConfig({componentId:"sc-82n2g1-0"})(["padding-top:16px;box-sizing:border-box;"," > div{&:first-child{padding-bottom:16px;box-sizing:border-box;margin-bottom:0 !important;max-height:","px !important;overflow-x:hidden !important;","}&:last-child{> div{background-color:"," !important;}}}"],V.a.sm(Ye()),(function(e){return e.autoHeightMax-16}),V.a.sm(qe(),(function(e){return e.autoHeightMax-24})),I.b.CLOUDYBLUE),Ke=w.d.div.withConfig({componentId:"sc-82n2g1-1"})(["padding:0 16px;box-sizing:border-box;"," color:",";"],V.a.sm(Ve()),(function(e){return e.theme.PRIMARY_TEXT})),Xe=w.d.div.withConfig({componentId:"sc-82n2g1-2"})(["position:sticky;top:0;background-color:",";z-index:2;"],(function(e){return Object(Y.a)(e)?I.b.WHITE:I.b.PRIMARY})),Je=w.d.h5.withConfig({componentId:"sc-82n2g1-3"})(["font-size:16px;font-weight:600;margin-bottom:8px;line-height:1.5;"]),Qe=w.d.div.withConfig({componentId:"sc-82n2g1-4"})(["margin-bottom:0;",""],V.a.sm(We())),$e=w.d.div.withConfig({componentId:"sc-82n2g1-5"})(["display:flex;align-items:center;margin-bottom:8px;"]),et=w.d.h6.withConfig({componentId:"sc-82n2g1-6"})(["font-size:16px;font-weight:600;margin-left:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",""],V.a.sm(ze())),tt=w.d.p.withConfig({componentId:"sc-82n2g1-7"})(["margin-bottom:0;font-size:12px;font-weight:500;color:",";margin-top:12px;",""],(function(e){return e.theme.SECONDARY_TEXT}),V.a.sm(He())),nt=Object(w.d)(Ge.a).withConfig({componentId:"sc-82n2g1-8"})(["",""],(function(e){return!Object(Y.a)(e)&&"\n    background-color: transparent;\n  "})),ot={organizations:v.a.array,destinationId:v.a.string.isRequired,maxHeight:v.a.number.isRequired,onSelected:v.a.func.isRequired,onExpand:v.a.func.isRequired},at={keys:["name"]};function rt(e){var t=e.destinationId,n=e.organizations,o=e.maxHeight,a=e.onSelected,r=e.onExpand,i=Object(g.useState)(""),s=f()(i,2),c=s[0],l=s[1],u=Object(y.f)(S.a.getCurrentUser,y.d),d=Object(g.useMemo)((function(){return new je.a(n,at)}),[n]),m=c?d.search(c).map((function(e){return e.item})):n;return h.a.createElement(Ze,{autoHeightMin:100,autoHeightMax:o-30,autoHeight:!0},h.a.createElement(Ke,null,h.a.createElement("div",null,h.a.createElement(Xe,null,h.a.createElement(Je,null,"Personal Documents")),h.a.createElement(Be,{_id:u._id,type:M.e.PERSONAL,avatarRemoteId:u.avatarRemoteId,name:u.name,selected:t===u._id,onClick:a})),Boolean(n.length)&&h.a.createElement("div",{style:{marginTop:8}},h.a.createElement(Xe,null,h.a.createElement(Je,null,"Organization Documents (",n.length,")"),h.a.createElement(Qe,null,h.a.createElement(k.a,{placeholder:"Search by organization name",autoFocus:!0,value:c,onChange:function(e){return l(e.target.value)},showClearButton:!0,icon:"search"}))),!m.length&&h.a.createElement(tt,null,"No organization matched this search"),m.map((function(e){var n=e._id,o=e.name,i=e.avatarRemoteId,s=e.teams;return h.a.createElement(Be,{_id:n,key:n,type:M.e.ORGANIZATION,avatarRemoteId:i,name:o,canExpand:Boolean(s.length),selected:t===n,onClick:a,onExpand:function(){return r(n)}})})))))}rt.propTypes=ot,rt.defaultProps={organizations:[]};var it=rt,st=n("./node_modules/react-use/esm/usePrevious.js"),ct={keys:["name"]};function lt(e){var t=e.destinationId,n=e.organization,o=e.maxHeight,a=e.onBack,r=e.onSelected,i=Object(st.a)(n),s=n||i,c=s.teams,l=s.name,u=Object(x.g)(c,ct),d=u.searchText,m=u.setSearchText,p=u.results,f=c.length;return h.a.createElement(Ze,{autoHeightMin:100,autoHeightMax:o-30,autoHeight:!0},h.a.createElement(Ke,null,h.a.createElement(Xe,null,h.a.createElement($e,null,h.a.createElement(nt,{icon:"arrow-left",onClick:a,size:32}),h.a.createElement(et,null,"Your Teams in ",l," (",f,")")),h.a.createElement(Qe,null,h.a.createElement(k.a,{placeholder:"Search by team name",autoFocus:!0,value:d,onChange:function(e){return m(e.target.value)},showClearButton:!0,icon:"search"}))),!p.length&&h.a.createElement(tt,null,"No team matched this search"),p.map((function(e){var n=e._id,o=e.name,a=e.avatarRemoteId;return h.a.createElement(Be,{_id:n,key:n,type:M.e.ORGANIZATION_TEAM,avatarRemoteId:a,name:o,selected:t===n,onClick:r})}))))}lt.propTypes={organization:v.a.object,destinationId:v.a.string.isRequired,maxHeight:v.a.number.isRequired,onBack:v.a.func.isRequired,onSelected:v.a.func.isRequired},lt.defaultProps={organization:null};var ut={Main:it,Team:lt},dt=function(e){return e.className},mt=.4,pt=w.d.div.withConfig({componentId:"sc-11vm85c-0"})(["position:relative;overflow:hidden;"]),ft=w.d.div.withConfig({componentId:"sc-11vm85c-1"})(["width:100%;top:0;left:0;will-change:transform;&.","-enter{transform:translateX(-110%);opacity:0;}&.","-enter-active{transform:translateX(0%);opacity:1;transition:all ","s ease;}&.","-exit{position:absolute;}&.","-exit-active{transform:translateX(-110%);opacity:0;transition:all ","s ease;}"],dt,dt,mt,dt,dt,mt),gt=Object(w.d)(ft).withConfig({componentId:"sc-11vm85c-2"})(["&.","-enter{opacity:0;transform:translateX(110%);}&.","-enter-active{transform:translateX(0%);opacity:1;transition:all ","s ease;}&.","-exit{position:absolute;}&.","-exit-active{opacity:0;transform:translateX(110%);transition:all ","s ease;}"],dt,dt,mt,dt,dt,mt);function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vt="main-destination",Et="team-destination",yt=h.a.forwardRef((function(e,t){var n=e.control,o=e.setValue,a=e.setFetching,r=Object(C.f)({control:n,name:"destinationType"}),s=Object(C.f)({control:n,name:"destinationId"});Object(g.useImperativeHandle)(t,(function(){return{showCompletedToast:A}}));var c=Object(g.useState)(null),l=f()(c,2),u=l[0],d=l[1],m=Object(g.useState)(""),p=f()(m,2),b=p[0],v=p[1],E=Object(y.f)(S.a.getCurrentUser,y.d),T=Object(ge.b)(he.t,{fetchPolicy:Pe.a.NETWORK_ONLY,onCompleted:function(){a(!1)}}).data,P=Object(g.useMemo)((function(){return((null===T||void 0===T?void 0:T.orgsOfUser)||[]).map((function(e){return e.organization}))}),[T]),w=Object(g.useMemo)((function(){return P.find((function(e){return e._id===u}))}),[u,P]),j=Object(g.useMemo)((function(){return P.reduce((function(e,t){return t.teams.map((function(n){e[n._id]=t._id})),e}),{})}),[P]),k=function(){var e=P.find((function(e){return e._id===j[s]}))||{},t=(e.teams||[]).find((function(e){return e._id===s}));return{teamName:null===t||void 0===t?void 0:t.name,orgName:e.name}},O=function(){var e=P.find((function(e){return e._id===s}));return null===e||void 0===e?void 0:e.name},_=function(e){return h.a.createElement("span",{className:"Toast__message--primary"},e)};function A(){var e=_("Personal Documents");switch(r){case M.e.ORGANIZATION:var t=O();e=h.a.createElement(h.a.Fragment,null,_(t)," organization");break;case M.e.ORGANIZATION_TEAM:var n=k(),o=n.teamName,a=n.orgName;e=h.a.createElement(h.a.Fragment,null,_(o)," team in ",_(a)," organization")}R.J.openToastMulti({type:L.A.SUCCESS,message:h.a.createElement(h.a.Fragment,null,"Document has been copied to"," ",e)})}var x=function(e){return function(t){t._id!==s&&(e(),function(e){var t=e._id,n=e.type,a=e.name;o("destinationId",t),o("destinationType",n),n!==M.e.ORGANIZATION&&o("notifyUpload",!1),v(a)}(t))}},D=function(e){d(e)},I=function(e){return Math.min(e,L.y)},N=function(){r!==M.e.ORGANIZATION_TEAM&&d(null)};Object(g.useEffect)((function(){var e=null;switch(r){case M.e.PERSONAL:e=E.name;break;case M.e.ORGANIZATION_TEAM:e=k().teamName;break;case M.e.ORGANIZATION:e=O()}v(e)}),[P]);return h.a.createElement(C.a,{control:n,name:"destinationId",render:function(e){var t=e.field,n=(t.ref,i()(t,["ref"]));return h.a.createElement(Te,{value:b,onClosed:N,inputProps:bt(bt({},n),{},{label:"Destination"})},(function(e){var t=e.closePopper,o=e.maxPopperHeight;return h.a.createElement(pt,null,h.a.createElement(we.a,{in:!w,timeout:400,unmountOnExit:!0,classNames:vt},h.a.createElement(ft,{className:vt,style:{pointerEvents:w?"none":"auto"}},h.a.createElement(ut.Main,{onSelected:function(e){return x(t)(e)},onExpand:D,organizations:P,destinationId:n.value,maxHeight:I(o)}))),h.a.createElement(we.a,{in:Boolean(w),timeout:400,unmountOnExit:!0,classNames:Et},h.a.createElement(gt,{className:Et},h.a.createElement(ut.Team,{closePopper:t,organization:w,onBack:function(){return d(null)},destinationId:n.value,onSelected:function(e){return x(t)(e)},maxHeight:I(o)}))))}))}})}));yt.propTypes={control:v.a.object.isRequired,setValue:v.a.func.isRequired,setFetching:v.a.func.isRequired};var Ct=yt;function Tt(e){var t=e.formState,n=e.onClose,o=e.control,a=e.canDuplicate,r=Object(C.f)({control:o,name:"documentName"}).trim(),i=Object.keys(t.errors).length,s=Boolean(i||t.isSubmitting||!r.length||!a);return h.a.createElement(ie,null,h.a.createElement(re,{className:"secondary",onClick:n},"Cancel"),h.a.createElement(re,{disabled:s,loading:t.isSubmitting,className:"primary",type:"submit",id:"copy-document-submit"},t.isSubmitting?"Copying...":"Copy"))}Tt.propTypes={formState:v.a.object.isRequired,control:v.a.object.isRequired,onClose:v.a.func.isRequired,canDuplicate:v.a.bool.isRequired};var Pt=Tt;function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt={document:v.a.object.isRequired,visible:v.a.bool.isRequired,onClose:v.a.func.isRequired},Ot=Object(T.a)({paper:{overflowY:"visible"}}),_t=R.N.object().shape({documentName:R.N.string().required(B.k).preventSpaces(B.k).max(M.k,B.g.MAX_LENGTH),destinationId:R.N.string().required(),destinationType:R.N.string().required(),notifyUpload:R.N.bool().required()});function At(e){var t=e.document,n=e.visible,o=e.onClose,r=Object(g.useRef)(null),s=Object(x.l)(),l=Object(E.k)("/viewer/:documentId"),d=Ot(),m=Object(g.useState)(!0),p=f()(m,2),b=p[0],v=p[1],T=Object(g.useState)(!0),B=f()(T,2),F=B[0],G=B[1],H=Object(g.useState)(null),z=f()(H,2),W=z[0],V=z[1],q=Object(y.f)(S.a.getCurrentUser,y.d),Y=Object(y.f)(S.a.getThemeMode,y.d),Z=Object(y.f)(S.a.getOrganizationList,y.d).data||[],K=!l||Y===L.N.LIGHT,X=Object(C.e)({mode:"onChange",defaultValues:jt(jt({documentName:"Copy of ".concat(R.o.getFilenameWithoutExtension(t.name))},function(){var e=Z.map((function(e){return e.organization}));switch(t.documentType){case M.e.PERSONAL:return ce();case M.e.ORGANIZATION_TEAM:return function(e){if(!e.some((function(e){return e.teams.some((function(e){return e._id===t.clientId}))})))return ce();return{destinationId:t.clientId,destinationType:t.documentType}}(e);case M.e.ORGANIZATION:return function(e){if(!e.some((function(e){return e._id===t.clientId})))return ce();return{destinationId:t.clientId,destinationType:t.documentType}}(e);default:throw new Error("Document type is not valid")}}()),{},{notifyUpload:!1}),resolver:Object(P.a)(_t)}),J=X.control,Q=X.formState,re=X.setValue,ie=X.handleSubmit;function ce(){return{destinationId:q._id,destinationType:M.e.PERSONAL}}var le=function(e){var t=R.m.extractGqlError(e).code,n=[U.a.Document.OVER_FILE_SIZE_FREE,U.a.Document.OVER_FILE_SIZE_PREMIUM].includes(t);G(!(R.m.isRateLimitError(e)||n));var o=N.a.getDocumentErrorMessage(e);V(o)},ue=function(){var e=u()(c.a.mark((function e(n){var a,i,s,l,u,d,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.documentName,i=n.destinationId,s=n.destinationType,l=n.notifyUpload,e.prev=1,V(null),e.next=5,xt(t);case 5:if(u=e.sent,t.service===M.r.s3||u){e.next=8;break}return e.abrupt("return");case 8:if(d=null,!u){e.next=14;break}return e.next=12,D.l.linearPdfFromFiles(u);case 12:m=e.sent,d=m.linearizedFile;case 14:return e.next=16,D.c.duplicateDocument({documentId:t._id,documentName:a.trim(),destinationId:i,destinationType:s,notifyUpload:l,file:d});case 16:r.current&&r.current.showCompletedToast(),o(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),le(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),de=Q.isSubmitting||b,me=K?jt(jt({},I.e),{},{mode:L.N.LIGHT}):jt(jt({},I.c),{},{mode:L.N.DARK});return h.a.createElement(w.b,{theme:me},h.a.createElement(j.a,{open:n,PaperComponent:$,classes:d,onClose:o},h.a.createElement("div",{className:"theme-".concat(me.mode)},h.a.createElement(ee,{onSubmit:ie(ue),loading:de},b&&h.a.createElement(te,null,h.a.createElement(A.a,null)),h.a.createElement(ne,null,h.a.createElement(ae,null,"Make a Copy"),h.a.createElement(O.a,{tooltipStyle:jt({fontSize:14,maxWidth:130},!s&&{marginTop:12}),title:"Annotations, page manipulations and comments will be copied.",placement:s?"right":"bottom"},h.a.createElement(_.a,{className:"info",size:20,color:K?I.b.SECONDARY:I.b.ROCK_BLUE}))),W&&h.a.createElement(oe,null,W),h.a.createElement(se,null,h.a.createElement(C.a,{control:J,name:"documentName",render:function(e){var t,n=e.field,o=(n.ref,i()(n,["ref"])),r=e.fieldState;return h.a.createElement(k.a,a()({},o,{label:"Name",placeholder:"Document name",autoComplete:"off",errorMessage:null===(t=r.error)||void 0===t?void 0:t.message}))}})),h.a.createElement(se,null,h.a.createElement(Ct,{ref:r,control:J,setValue:re,setFetching:v})),h.a.createElement(fe,{control:J}),h.a.createElement(Pt,{control:J,formState:Q,onClose:o,canDuplicate:F})))))}function xt(e){return St.apply(this,arguments)}function St(){return(St=u()(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=t.service,e.t0=n,e.next=e.t0===M.r.s3?5:e.t0===M.r.google?6:8;break;case 5:return e.abrupt("return",null);case 6:return e.next=8,D.e.validateGoogleAuthConnection(t);case 8:return e.next=10,R.u.getDocument(t);case 10:return e.abrupt("return",e.sent);case 11:e.next=17;break;case 13:return e.prev=13,e.t1=e.catch(0),R.J.openToastMulti({type:L.A.ERROR,message:"Failed to get remote file!"}),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}At.propTypes=kt,At.defaultProps={};var Dt=At;t.a=Dt},"./src/lumin-components/CustomCheckbox/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./src/redux/selectors/index.js"),r=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/createClass.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),f=n.n(p),g=n("./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(g),b=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),v=n.n(b),E=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),y=n.n(E),C=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),T=n.n(C),P=n("./node_modules/react/index.js"),w=n.n(P),j=n("./node_modules/@material-ui/core/esm/Checkbox/Checkbox.js"),k=n("./node_modules/prop-types/index.js"),O=n.n(k),_=n("./src/lumin-components/SvgElement/index.js");function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return v()(this,n)}}var x={themeMode:O.a.string,dispatch:O.a.func,indeterminate:O.a.bool},S=function(e){h()(n,e);var t=A(n);function n(){var e;return u()(this,n),e=t.call(this),T()(f()(e),"_getSvgIcon",(function(t){var n="light"===e.props.themeMode;return e.isViewer?"".concat(t).concat(n?"-Light":"-Dark"):"".concat(t,"-Light")})),e.inputRef=w.a.createRef(),e.isViewer=window.location.pathname.startsWith("/viewer/"),e}return m()(n,[{key:"render",value:function(){var e=this.props,t=e.indeterminate,n=(e.themeMode,e.dispatch,c()(e,["indeterminate","themeMode","dispatch"])),o=n.size,a=void 0===o?16:o;return w.a.createElement(j.a,i()({},n,{inputRef:this.inputRef,icon:w.a.createElement(_.a,{content:this._getSvgIcon(t?"indeterminate-checkBox":"Checkbox-NotSelected"),width:a}),checkedIcon:w.a.createElement(_.a,{content:this._getSvgIcon("Checkbox-Selected"),width:a})}))}},{key:"checked",get:function(){return this.inputRef.current.checked},set:function(e){this.inputRef.current.checked=e}}]),n}(w.a.PureComponent);S.propTypes=x,S.defaultProps={themeMode:"light",dispatch:function(){},indeterminate:!1};var D=S;t.a=Object(o.c)((function(e){return{themeMode:a.a.getThemeMode(e)}}),null,null,{forwardRef:!0})(D)},"./src/lumin-components/CustomElement/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./src/redux/selectors/index.js"),r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),c=n.n(s),l=n("./node_modules/react/index.js"),u=n.n(l),d=n("./node_modules/classnames/index.js"),m=n.n(d),p=n("./node_modules/prop-types/index.js"),f=n.n(p),g=n("./src/lumin-components/Tooltip/index.js"),h={className:f.a.string,dataElement:f.a.string,display:f.a.string,render:f.a.func,mediaQueryClassName:f.a.string,title:f.a.string,isDisabled:f.a.bool},b=function(e){var t,n=e.className,o=e.dataElement,a=e.display,r=e.render,s=e.mediaQueryClassName,d=e.title,p=e.isDisabled,f=Object(l.useState)(null),h=c()(f,2),b=h[0],v=h[1],E=Object(l.useRef)(),y=Object(l.useRef)();if(Object(l.useEffect)((function(){if(!p){var e=r();if(function(e){try{return e instanceof window.Element||e instanceof window.parent.Element}catch(t){return!1}}(e)){for(var t=y.current?y.current:E.current;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(e)}else!function(e){return u.a.isValidElement(e)}(e)?console.warn("The object returned by the render function does not seem to be either a DOM element or a React Component"):v(e)}}),[p,r]),p)return null;var C=u.a.createElement("div",{className:m()((t={},i()(t,n,!!n),i()(t,s,!!s),t)),ref:E,"data-element":o,style:{display:a}},b);return d?u.a.createElement(g.a,{content:d,ref:y},C):C};b.propTypes=h,b.defaultProps={className:"CustomElement",dataElement:"",display:"",render:function(){},mediaQueryClassName:"",title:"",isDisabled:!1};var v=b;t.a=Object(o.c)((function(e,t){return{isDisabled:a.a.isElementDisabled(e,t.dataElement)}}))(v)},"./src/lumin-components/CustomHeader/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),a=n.n(o),r=n("./node_modules/react-helmet/lib/Helmet.js"),i=n("./node_modules/prop-types/index.js"),s=n.n(i),c={noIndex:s.a.bool,title:s.a.string,description:s.a.string,sharable:s.a.bool},l=function(e){var t=e.noIndex,n=e.title,o=e.description,i=e.sharable;return a.a.createElement(r.Helmet,null,t&&a.a.createElement("meta",{name:"robots",content:"noindex, nofollow"}),o&&a.a.createElement("meta",{name:"description",content:o}),n&&a.a.createElement("title",null,n),i&&a.a.createElement("meta",{property:"og:image",content:"".concat(window.location.origin,"/assets/images/lumin-thumbnail.png")}))};l.propTypes=c,l.defaultProps={noIndex:!1,title:"",description:"",sharable:!1};var u=l;t.a=u},"./src/lumin-components/CustomRadio/CustomRadio.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/extends.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(p),g=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(g),b=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(b),E=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),y=n.n(E),C=n("./node_modules/react/index.js"),T=n.n(C),P=n("./node_modules/@material-ui/styles/esm/withStyles/withStyles.js"),w=n("./node_modules/@material-ui/core/esm/Radio/Radio.js"),j=n("./src/lumin-components/SvgElement/index.js");function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return h()(this,n)}}var O=Object(P.a)({root:{padding:"6px"}})(w.a),_=function(e){f()(n,e);var t=k(n);function n(e){var o;return c()(this,n),o=t.call(this,e),y()(m()(o),"_getSvgIcon",(function(e){var t="light"===o.props.themeMode;return o.isViewer?e+"".concat(t?"-Light":""):e+"-Light"})),o.inputRef=T.a.createRef(),o.isViewer=window.location.pathname.startsWith("/viewer/"),o}return u()(n,[{key:"render",value:function(){var e=this.props,t=(e.themeMode,e.dispatch,i()(e,["themeMode","dispatch"])),n=t.size,o=void 0===n?16:n;return T.a.createElement(O,a()({},t,{inputRef:this.inputRef,icon:T.a.createElement(j.a,{content:this._getSvgIcon("Radio-NotSelected"),width:o}),checkedIcon:T.a.createElement(j.a,{content:this._getSvgIcon("Radio-Selected"),width:o})}))}},{key:"checked",get:function(){return this.inputRef.current.checked},set:function(e){this.inputRef.current.checked=e}}]),n}(T.a.PureComponent);t.a=_},"./src/lumin-components/CustomRadio/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./src/redux/selectors/index.js"),r=n("./src/lumin-components/CustomRadio/CustomRadio.js");t.a=Object(o.c)((function(e){return{themeMode:a.a.getThemeMode(e)}}),null,null,{forwardRef:!0})(r.a)},"./src/lumin-components/DisconnectToast/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),a=n.n(o),r=n("./node_modules/react-redux/es/index.js"),i=n("./src/redux/selectors/index.js"),s=n("./node_modules/@material-ui/core/esm/Button/Button.js"),c=function(){var e=Object(r.f)(i.a.getIsNetworkDisconnected);return a.a.createElement(a.a.Fragment,null,e?a.a.createElement("div",{className:"DisconnectToast"},a.a.createElement("div",{className:"DisconnectToast__container"},a.a.createElement("span",{className:"DisconnectToast__message"},"Lost connection."),a.a.createElement(s.a,{className:"DisconnectToast__btn",onClick:function(){return window.location.reload()}},"Reload"))):null)};t.a=c},"./src/lumin-components/DocumentContainer/DocumentContainer.scss":function(e,t,n){},"./src/lumin-components/FavoriteIcon/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./src/redux/selectors/index.js"),r=n("./src/redux/actions/index.js"),i=n("./node_modules/@babel/runtime/regenerator/index.js"),s=n.n(i),c=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),l=n.n(c),u=n("./node_modules/react/index.js"),d=n.n(u),m=n("./node_modules/prop-types/index.js"),p=n.n(m),f=n("./node_modules/classnames/index.js"),g=n.n(f),h=n("./src/lumin-components/LuminButton/index.js"),b=n("./src/lumin-components/Shared/Tooltip/index.js"),v=n("./src/services/graphServices/documentGraphServices.js"),E=n("./src/constants/socketConstant.js"),y=n("./src/socket/index.js"),C={document:p.a.object,currentUser:p.a.object,className:p.a.string,callback:p.a.func},T=function(e){var t=e.document,n=e.currentUser,o=e.className,a=e.callback,r=t.listUserStar&&t.listUserStar.includes(n._id),i=r?"#ffbc41":"#b0c4d6",c=r?"Remove from Starred":"Add to Starred",u=function(){var e=l()(s.a.mark((function e(o){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.stopPropagation(),n){e.next=3;break}return e.abrupt("return");case 3:r=n._id,v.a.starDocumentMutation({document:t,currentUser:n,clientId:r,callback:a}),y.a.emit(E.a.UPDATE_DOCUMENT,{roomId:t._id,type:"star"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d.a.createElement("div",{className:"FavoriteIcon"},d.a.createElement(b.a,{title:c},d.a.createElement(h.a,{className:g()("FavoriteIcon__button",o,{"FavoriteIcon__button--active":r}),square:!0,isIconButton:!0,icon:"star-filled",iconColor:i,onClick:u})))};T.propTypes=C,T.defaultProps={document:{},currentUser:{},className:"",callback:function(){}};var P=T;t.a=Object(o.c)((function(e){return{currentUser:a.a.getCurrentUser(e),currentTeam:a.a.getCurrentTeam(e),currentFolderType:a.a.getCurrentFolderType(e)}}),(function(e){return{dispatch:e,openToast:function(t){return e(r.a.openToast(t))}}}))(P)},"./src/lumin-components/GoogleFilePicker/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/@apollo/react-hoc/lib/react-hoc.esm.js"),r=n("./src/redux/selectors/index.js"),i=n("./src/constants/documentConstants.js"),s=n("./src/redux/actions/index.js"),c=n("./node_modules/@babel/runtime/regenerator/index.js"),l=n.n(c),u=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),d=n.n(u),m=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),p=n.n(m),f=n("./node_modules/@babel/runtime/helpers/createClass.js"),g=n.n(f),h=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),b=n.n(h),v=n("./node_modules/@babel/runtime/helpers/inherits.js"),E=n.n(v),y=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),C=n.n(y),T=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),P=n.n(T),w=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=n.n(w),k=n("./node_modules/react/index.js"),O=n.n(k),_=n("./node_modules/prop-types/index.js"),A=n.n(_),x=n("./node_modules/mime-types/index.js"),S=n.n(x),D=n("./node_modules/react-google-picker/dist/react-google-picker.js"),R=n.n(D),I=n("./src/lumin-components/CookieWarningModal/Context.js"),M=n("./src/constants/documentType.js"),N=n("./src/graphql/DocumentGraph.js"),L=n("./src/constants/lumin-common.js"),B=n("./src/constants/supportedFiles.js"),U=n("./src/services/index.js"),F=n("./src/utils/index.js"),G=n("./src/helpers/logger.js");function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=P()(e);if(t){var a=P()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return C()(this,n)}}var V=function(e){E()(n,e);var t=W(n);function n(){var e;p()(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),j()(b()(e),"initialPicker",(function(t,n){var o,a=e.props,r=a.fileName,i=a.mimeType,s=a.isRequestAccess,c=a.multiSelect;if(!s){var l=[M.b.PDF,M.d.DOCX,M.d.XLSX,M.d.PPTX],u=t.picker.ViewId.DOCS,d=t.picker.ViewId.FOLDERS;return o=(new window.google.picker.PickerBuilder).addView(new t.picker.DocsView(u).setMimeTypes(i||l.join(","))).addView(new t.picker.DocsView(u).setMimeTypes(i||l.join(",")).setIncludeFolders(!0).setEnableDrives(!0)).addView(new t.picker.DocsView(t.picker.ViewId.DOCS_IMAGES)).addView(new t.picker.DocsView(d).setIncludeFolders(!0).setSelectFolderEnabled(!0)).enableFeature(t.picker.Feature.SUPPORT_DRIVES).setAppId("1031094922298").setOAuthToken(n).setDeveloperKey("AIzaSyB2pjSUFbrP4TAtybvtEjx4Bmh0BBg4MUQ").setCallback(e.googlePickerCallback),c&&o.enableFeature(t.picker.Feature.MULTISELECT_ENABLED),o}var m=new t.picker.DocsView(t.picker.ViewId.DOCS).setMimeTypes(i).setQuery(r);return o=(new window.google.picker.PickerBuilder).addView(m).enableFeature(t.picker.Feature.SUPPORT_DRIVES).setAppId("1031094922298").setOAuthToken(n).setDeveloperKey("AIzaSyB2pjSUFbrP4TAtybvtEjx4Bmh0BBg4MUQ").setCallback((function(t){e.googlePickerCallback(t),"cancel"===t.action&&window.location.reload()})),c&&o.enableFeature(t.picker.Feature.MULTISELECT_ENABLED),o})),j()(b()(e),"googlePickerCallback",(function(t){var n=e.props,o=n.closeModal,a=n.onClose,r=n.onPicked;switch(t.action){case"loaded":o();break;case"cancel":a();break;case"picked":e.handlePickFileGoogle(t),r(t)}})),j()(b()(e),"createPicker",function(){var t=d()(l.a.mark((function t(n,o){var a,r,i,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://www.googleapis.com/auth/drive.file",t.next=3,U.e.getCurrentScope();case 3:r=t.sent,i=e.initialPicker(n,o),r.includes(a)?i.build().setVisible(!0):(i.build().setVisible(!1),(s=new window.gapi.auth2.SigninOptionsBuilder).setScope(a),window.gapi.auth2.getAuthInstance().currentUser.get().grant(s).then((function(t){var a=t.getAuthResponse().access_token;(i=e.initialPicker(n,a)).build().setVisible(!0),G.a.logInfo({message:L.t.EVENT.CREATE_GOOGLE_FILE_PICKER,reason:L.t.Service.GOOGLE_API_INFO,attributes:{google:n,oauthToken:o,success:t}})}),(function(e){G.a.logError({reason:L.t.Service.GOOGLE_API_ERROR,error:e}),F.J.openToastMulti({message:"Access Denied",type:L.A.ERROR})})));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),j()(b()(e),"onGoogleAuthenticateError",(function(){e.context.cookiesDisabled&&e.context.setCookieModalVisible(!0)})),j()(b()(e),"onAuthenticate",(function(){console.info("On auth successfully!")})),j()(b()(e),"getDocumentList",(function(e,t){return Promise.all(e.docs.map(function(){var e=d()(l.a.mark((function e(n){var o,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F.o.getExtension(n.name),"gdoc"===S.a.extension(n.mimeType)&&(o="".concat(n.name,".docx")),"gsheet"===S.a.extension(n.mimeType)&&(o="".concat(n.name,".xlsx")),B.c.includes(a)||B.d.includes(a)||(o="".concat(n.name,".").concat(S.a.extension(n.mimeType))),e.abrupt("return",{remoteId:n.id,name:o||n.name,size:n.sizeBytes,mimeType:n.mimeType,service:"google",isPersonal:!0,remoteEmail:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),j()(b()(e),"handlePickFileGoogle",function(){var t=d()(l.a.mark((function t(n){var o,a,r,s,c,u,m,p,f;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props,a=o.currentUser,r=o.client,s=o.currentFolderType,c=o.uploadFiles,u=o.updateDocumentData,!o.isUpload){t.next=18;break}if(window.gapi.drive){t.next=5;break}return t.next=5,window.gapi.client.load("drive","v3",null);case 5:return t.next=7,U.e.getCurrentRemoteEmail();case 7:if(m=t.sent,s!==i.t.INDIVIDUAL){t.next=16;break}return window.scrollTo({top:0,left:0,behavior:"smooth"}),t.next=12,e.getDocumentList(n,m);case 12:p=t.sent,r.mutate({mutation:N.c,variables:{input:{clientId:a._id,documents:p,role:"owner"}}}).then(function(){var e=d()(l.a.mark((function e(t){var o,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.data.createDocuments,a=s,Promise.all(n.docs.map((function(e,t){var n=o.documents[t]._id;U.e.getFileInfo(e.id).then(function(){var t=d()(l.a.mark((function t(o){var r,i,s,c,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.thumbnailLink,t.prev=1,!r){t.next=15;break}return t.next=5,F.o.getCanvasFromUrl(r);case 5:return i=t.sent,t.next=8,F.o.convertThumnailCanvasToFile(i.imgSrc,F.o.getFilenameWithoutExtension(e.name));case 8:return s=t.sent,t.next=11,U.c.uploadThumbnail(n,s);case 11:c=t.sent,d=c.data,u(a,{_id:n,thumbnail:d}),G.a.logInfo({message:L.t.EVENT.GET_FILE_INFO,reason:L.t.Service.GOOGLE_API_INFO,attributes:{data:o}});case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),G.a.logError({reason:L.t.Service.GOOGLE_API_ERROR,error:t.t0});case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}())}))),o&&(r={type:L.A.SUCCESS,message:"Your document(s) were successfully imported"},F.J.openToastMulti(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){var e={type:L.A.ERROR,message:"Fail to upload documents from Google Drive"};F.J.openToastMulti(e)})),t.next=18;break;case 16:f=n.docs.map((function(e){var t,n=F.o.getExtension(e.name);return"gdoc"===S.a.extension(e.mimeType)&&(t="".concat(e.name,".docx")),"gsheet"===S.a.extension(e.mimeType)&&(t="".concat(e.name,".xlsx")),B.c.includes(n)||B.d.includes(n)||(t="".concat(e.name,".").concat(S.a.extension(e.mimeType))),z(z({},e),{},{name:t||e.name,type:e.mimeType,size:e.sizeBytes})})),c(f,L.J.GOOGLE);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return g()(n,[{key:"render",value:function(){var e=this;return O.a.createElement(R.a,{clientId:"1031094922298-hcmpll8999ct57grncagnql87pnihmmi.apps.googleusercontent.com",developerKey:"AIzaSyB2pjSUFbrP4TAtybvtEjx4Bmh0BBg4MUQ",onChange:function(t){return e.handlePickFileGoogle(t)},scope:["profile","email","https://www.googleapis.com/auth/drive.file"],onAuthenticate:this.onAuthenticate,createPicker:this.createPicker,onAuthFailed:this.onGoogleAuthenticateError,authImmediate:!1,mimeTypes:[M.c.PNG,M.c.JPEG,M.c.JPG,M.b.PDF],viewId:"DOCS"},this.props.children)}}]),n}(O.a.PureComponent);V.propTypes={fileName:A.a.string,mimeType:A.a.string,isRequestAccess:A.a.bool,closeModal:A.a.func,onPicked:A.a.func,children:A.a.any.isRequired,currentUser:A.a.object,client:A.a.object,uploadFiles:A.a.func,currentFolderType:A.a.string.isRequired,onClose:A.a.func,updateDocumentData:A.a.func,isUpload:A.a.bool,multiSelect:A.a.bool},V.defaultProps={fileName:"",mimeType:"",isRequestAccess:!1,closeModal:function(){},currentUser:{},client:{},uploadFiles:function(){},onPicked:function(){},onClose:function(){},updateDocumentData:function(){},isUpload:!0,multiSelect:!0},V.contextType=I.a;var q=V;t.a=Object(o.c)((function(e){return{currentUser:r.a.getCurrentUser(e),currentTeam:r.a.getCurrentTeam(e),currentFolderType:r.a.getCurrentFolderType(e),ownedFilterCondition:r.a.getCurrentOwnedFilter(e),lastModifiedFilterCondition:r.a.getCurrentLastModifiedFilter(e)}}),(function(e){return{dispatch:e,updateDocumentData:function(t,n){switch(t){case i.t.INDIVIDUAL:e(s.a.updateDocumentPersonal(n));break;case i.t.TEAMS:e(s.a.updateDocumentTeam(n));break;case i.t.ORGANIZATION:e(s.a.updateDocumentOrganization(n))}}}}))(Object(a.a)(q))},"./src/lumin-components/GoogleRatingModal/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var o=n("./node_modules/lodash/get.js"),a=n.n(o),r=n("./node_modules/react/index.js"),i=n.n(r),s=n("./node_modules/react-redux/es/index.js"),c=n("./src/redux/selectors/index.js"),l=n("./src/redux/actions/index.js"),u=n("./src/services/index.js"),d=n("./src/constants/userConstants.js"),m=n("./assets/images/hand-like.svg"),p=n.n(m),f=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),g=n.n(f),h=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=n("./src/lumin-components/ButtonMaterial/index.js"),v=n("./src/constants/styles/index.js"),E=n("./src/utils/styles/mediaQuery.js");function y(){var e=g()(["\n    width: 400px;\n  "]);return y=function(){return e},e}var C=h.d.div.withConfig({componentId:"ckl372-0"})(["position:fixed;bottom:16px;left:16px;z-index:100;background:",";border-radius:4px;padding:24px;display:flex;flex-direction:column;align-items:center;width:calc(100% - 32px);box-sizing:border-box;",""],v.b.ROYAL_BLUE_80,E.a.md(y())),T=h.d.img.withConfig({componentId:"ckl372-1"})(["width:81px;height:82px;object-fit:fill;margin-bottom:16px;display:block;"]),P=h.d.h3.withConfig({componentId:"ckl372-2"})(["font-size:18px;font-weight:600;font-stretch:normal;font-style:normal;line-height:1.33;letter-spacing:0.34px;text-align:center;color:white;margin-bottom:8px;"]),w=h.d.p.withConfig({componentId:"ckl372-3"})(["font-size:14px;font-weight:500;font-stretch:normal;font-style:normal;line-height:1.43;letter-spacing:0.34px;text-align:center;color:white;margin-bottom:24px;"]),j=h.d.div.withConfig({componentId:"ckl372-4"})(["display:grid;grid-template-columns:1fr 1fr;gap:16px;width:100%;"]),k=Object(h.d)(b.a).withConfig({componentId:"ckl372-5"})(["border:2px solid white;color:",";background:",";&:hover{","}"],(function(e){return e.$secondary?"white":v.b.ROYAL_BLUE_80}),(function(e){return!e.$secondary&&"white"}),(function(e){return!e.$secondary&&Object(h.c)(["background:",";border:2px solid ",";"],v.b.GRAY,v.b.GRAY)}));var O=function(){var e=Object(s.e)(),t=Object(s.f)(c.a.getCurrentUser,s.d),n=a()(t,"metadata.rating.googleModalStatus")===d.a.OPEN,o=function(){e(l.a.updateCurrentUser({metadata:{rating:{googleModalStatus:d.a.HIDE}}})),u.m.hideGoogleRatingModal()};return n?i.a.createElement(C,{className:"fadeInUp"},i.a.createElement(T,{src:p.a,alt:"hand like"}),i.a.createElement(P,null,"How was your experience?"),i.a.createElement(w,null,"Your feedback matters. Please take a moment to review us on Google Workspace\xa0Marketplace."),i.a.createElement(j,null,i.a.createElement(k,{$secondary:!0,onClick:o},"No, thanks"),i.a.createElement(k,{onClick:function(){window.open("https://workspace.google.com/marketplace/app/lumin_pdf/1031094922298"),o()}},"Yes, of course"))):null}},"./src/lumin-components/Header/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./src/redux/selectors/index.js"),r=n("./src/redux/actions/index.js"),i=n("./node_modules/react/index.js"),s=n.n(i),c=n("./node_modules/prop-types/index.js"),l=n.n(c),u=n("./node_modules/@babel/runtime/helpers/extends.js"),d=n.n(u),m=n("./src/lumin-components/ToolButton/index.js"),p=n("./src/lumin-components/ToolGroupButton/index.js"),f=n("./src/lumin-components/ToggleElementButton/index.js"),g=n("./src/lumin-components/ActionButton/index.js"),h=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),b=n.n(h),v=n("./node_modules/@babel/runtime/helpers/createClass.js"),E=n.n(v),y=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),C=n.n(y),T=n("./node_modules/@babel/runtime/helpers/inherits.js"),P=n.n(T),w=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),j=n.n(w),k=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),O=n.n(k),_=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),A=n.n(_),x=n("./node_modules/@material-ui/core/esm/MenuList/MenuList.js"),S=n("./node_modules/@material-ui/core/esm/MenuItem/MenuItem.js"),D=n("./src/lumin-components/PopperButton/index.js"),R=n("./src/constants/lumin-common.js"),I=n("./src/constants/fitMode.js"),M=n("./src/core/index.js");function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return j()(this,n)}}var L=["Fit","50%","75%","100%","125%","150%","200%","300%"],B={zoomRatio:l.a.number,openToast:l.a.func.isRequired},U=function(e){P()(n,e);var t=N(n);function n(e){var o;return b()(this,n),o=t.call(this,e),A()(C()(o),"handleChangeZoomRatio",(function(e,t){var n;if("Fit"===e)M.default.setFitMode(I.a.FitPage),o.setState({zoomRatio:"Fit",showInput:!1},(function(){return t()}));else{n=e.split("%")[0]/100;var a=e?e.includes("%")?e:"".concat(e,"%"):"".concat(100*o.props.zoomRatio,"%");o.setState({zoomRatio:a,showInput:!1},(function(){return t()})),M.default.setZoomLevel(n)}})),A()(C()(o),"handlePressEnter",(function(e,t){13===e.which&&o.handleSubmitZoomRatio(t)})),A()(C()(o),"handleSubmitZoomRatio",(function(e){var t=o.state.zoomRatio,n=Number(t.split("%")[0]);if(n<50||n>500){var a={type:R.A.ERROR,message:"Zoom value must be in range ".concat(50,"&nbsp;-&nbsp;").concat(500),onClickAway:function(){}},r="".concat(n<50?50:500,"%");return o.setState({zoomRatio:r}),o.handleChangeZoomRatio(r,e),o.props.openToast(a)}o.handleChangeZoomRatio(t,e)})),A()(C()(o),"isInputValid",(function(e){return!(!Number(e.target.value)&&""!==e.target.value)})),A()(C()(o),"handleChangeZoomValue",(function(e){o.isInputValid(e)&&o.setState({zoomRatio:e.target.value})})),A()(C()(o),"handleShowInput",(function(){o.setState((function(e){return{showInput:!e.showInput}}))})),A()(C()(o),"handleBlurZoomInput",(function(e){o.handleSubmitZoomRatio(e),o.setState({showInput:!1})})),o.state={zoomRatio:"150%",showInput:!1},o}return E()(n,[{key:"componentDidMount",value:function(){M.default.setFitMode(I.a.FitPage),this.setState({zoomRatio:"Fit"})}},{key:"render",value:function(){var e=this,t=this.state,n=t.showInput,o=t.zoomRatio;return s.a.createElement("div",{className:"ZoomButton"},s.a.createElement(D.a,d()({classes:"hide-in-mobile",ButtonComponent:"div",popperProps:{negativeArrow:!1},renderPopperContent:function(t){var n=t.closePopper;return s.a.createElement(x.a,{className:"ZoomButton__popper"},L.map((function(t,o){return s.a.createElement(S.a,{key:o,className:e.state.zoomRatio===t?"active":"",onClick:function(){e.handleChangeZoomRatio(t,n)}},t)})))}},{zoomRatio:o,showInput:n},{useInput:!0,handleShowInput:this.handleShowInput,handleChangeZoomRatio:this.handleChangeZoomRatio,handleChangeZoomValue:this.handleChangeZoomValue,handlePressEnter:this.handlePressEnter,onBlurZoomInput:this.handleBlurZoomInput})))}}]),n}(s.a.PureComponent);U.propTypes=B,U.defaultProps={zoomRatio:0};var F=U,G=Object(o.c)((function(e){return{zoomRatio:a.a.getZoom(e),isActiveEditMode:a.a.getIsActiveEditMode(e)}}),(function(e){return{setDeactiveEditMode:r.a.setDeactiveEditMode,openToast:function(t){return e(r.a.openToast(t))}}}))(F),H=n("./node_modules/@material-ui/core/esm/Button/Button.js"),z=n("./node_modules/@material-ui/core/esm/Grid/Grid.js"),W=n("./src/lumin-components/MaterialPopper/index.js"),V=n("./src/lumin-components/Icomoon/index.js");function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return j()(this,n)}}var Y=function(e){P()(n,e);var t=q(n);function n(e){var o;return b()(this,n),(o=t.call(this,e)).state={openPopper:!1,pageMode:0},o.pageMode=[{icon:"pages",label:"All Pages"},{icon:"edit",label:"Annotations"},{icon:"bookmark",label:"Bookmarks"}],o._handleChangePageMode=o._handleChangePageMode.bind(C()(o)),o._handleToggle=o._handleToggle.bind(C()(o)),o}return E()(n,[{key:"_handleChangePageMode",value:function(e){this.setState({pageMode:e,openPopper:!1})}},{key:"_handleToggle",value:function(){var e=this.state.openPopper;this.setState({openPopper:!e})}},{key:"render",value:function(){var e=this,t=this.state.openPopper;return s.a.createElement("div",{className:"PageModeButton"},s.a.createElement(H.a,{"aria-label":"page-mode",ref:function(t){e.anchorElPageMode=t},onClick:function(){return e._handleToggle("pageMode")},className:"PageModeButton__btn ".concat(t?"active":"")},s.a.createElement(z.a,{container:!0,spacing:2,alignItems:"center",justify:"space-between",className:"PageModeButton__btn_container"},s.a.createElement(z.a,{item:!0},s.a.createElement(V.a,{className:"".concat(this.pageMode[this.state.pageMode].icon," icon__16")})),s.a.createElement(z.a,{item:!0,className:"PageModeButton__btn_value"},this.pageMode[this.state.pageMode].label),s.a.createElement(z.a,{item:!0},s.a.createElement(V.a,{className:"dropdown"})))),s.a.createElement(W.a,{open:t,anchorEl:this.anchorElPageMode,handleClose:this._handleToggle,negativeArrow:!0},s.a.createElement(x.a,null,s.a.createElement(S.a,{onClick:function(){return e._handleChangePageMode(0)}},s.a.createElement(V.a,{className:"pages icon__16"})," All Pages"),s.a.createElement(S.a,{onClick:function(){return e._handleChangePageMode(1)}},s.a.createElement(V.a,{className:"edit icon__16"})," Annotations"),s.a.createElement(S.a,{onClick:function(){return e._handleChangePageMode(2)}},s.a.createElement(V.a,{className:"bookmark icon__16"})," Bookmarks"))))}}]),n}(s.a.PureComponent),Z=n("./node_modules/react-router/esm/react-router.js"),K=n("./node_modules/@material-ui/core/esm/Divider/Divider.js"),X=n("./src/lumin-components/PDFInfoModal/index.js"),J=n("./src/lumin-components/Tooltip/index.js"),Q=function(){if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&(e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),setTimeout((function(){document.webkitCurrentFullScreenElement||e.webkitRequestFullScreen()}),200))}},$=n("./src/lumin-components/ButtonMaterial/index.js");function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return j()(this,n)}}var te={setDeactiveEditMode:l.a.func,themeMode:l.a.string,setThemeMode:l.a.func,isActiveEditMode:l.a.bool,match:l.a.object.isRequired},ne=function(e){P()(n,e);var t=ee(n);function n(){var e;b()(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),A()(C()(e),"state",{openPdfInfo:!1}),A()(C()(e),"handleChangeToolMode",(function(e,t){M.default.updateToolMode(e),t()})),A()(C()(e),"handleOpenPdfInfo",(function(){e.setState({openPdfInfo:!0})})),A()(C()(e),"handleClosePdfInfo",(function(){e.setState({openPdfInfo:!1})})),A()(C()(e),"setDeactiveEditModePage",(function(){var t=e.props,n=t.setDeactiveEditMode;t.isActiveEditMode&&n()})),A()(C()(e),"changeThemeMode",(function(){var t=e.props,n=t.themeMode;(0,t.setThemeMode)("light"===n?"dark":"light")})),A()(C()(e),"_renderPopperContent",(function(t){var n=t.closePopper,o=e.props,a=o.themeMode,r=o.match,i="dark"===a,c="5cf1b9ee7ba93440bd685ea2"===r.params.documentId||"tour"===r.params.documentId;return s.a.createElement(x.a,null,s.a.createElement(S.a,{onClick:e.changeThemeMode},s.a.createElement(V.a,{className:"".concat(i?"light":"dark","-mode icon__16")}),"".concat(i?"Light":"Dark"," Mode")),s.a.createElement(S.a,{onClick:function(){Q(),n()}},s.a.createElement(V.a,{className:"fullscreen icon__16"}),"Full Screen"),s.a.createElement(S.a,{onClick:function(){return e.handleChangeToolMode("Pan",n)}},s.a.createElement(V.a,{className:"hand icon__16"}),"Pan"),!c&&s.a.createElement("div",null,s.a.createElement(K.a,{light:!0,className:"toolbar__submenu--divider",style:{backgroundColor:i?"#405b77":"#e0e0e0"}}),s.a.createElement(S.a,{onClick:function(){e.handleOpenPdfInfo(),n()}},s.a.createElement(V.a,{className:"info icon__16"}),"File Info")))})),e}return E()(n,[{key:"render",value:function(){var e=this.state.openPdfInfo;return s.a.createElement("div",{className:"MoreButton"},s.a.createElement(D.a,{classes:"hide-in-mobile",ButtonComponent:"div",popperProps:{negativeArrow:!0},renderPopperContent:this._renderPopperContent},s.a.createElement(J.a,{content:"annotation.moreTools"},s.a.createElement($.a,{id:"deactiveEditModePage",className:"square",onClick:this.setDeactiveEditModePage},s.a.createElement(V.a,{className:"more icon__20"})))),s.a.createElement(X.a,{open:e,closeDialog:this.handleClosePdfInfo}))}}]),n}(s.a.PureComponent);ne.propTypes=te,ne.defaultProps={setDeactiveEditMode:function(){},themeMode:"light",setThemeMode:function(){},isActiveEditMode:!1};var oe=Object(Z.l)(ne),ae={setDeactiveEditMode:r.a.setDeactiveEditMode,setThemeMode:r.a.setThemeMode},re=Object(o.c)((function(e){return{isActiveEditMode:a.a.getIsActiveEditMode(e),themeMode:a.a.getThemeMode(e)}}),ae)(oe),ie=n("./src/lumin-components/StatefulButton/index.js"),se=n("./src/lumin-components/CustomElement/index.js"),ce=n("./node_modules/classnames/index.js"),le=n.n(ce),ue={disabled:l.a.bool,onClick:l.a.func,label:l.a.string,icon:l.a.string,iconSize:l.a.number,iconColor:l.a.string,title:l.a.string,location:l.a.string,hidden:l.a.array},de=function(e){var t,n=e.disabled,o=e.onClick,a=e.label,r=e.icon,i=e.iconSize,c=e.iconColor,l=e.title,u=e.location,d=e.hidden,m=le()((t={IconButton:!0},A()(t,d.length?d.map((function(e){return"hide-in-".concat(e)})).join(" "):"",!0),A()(t,"IconButton--disabled",n),t)),p=s.a.createElement(H.a,{"aria-label":a,className:m,disabled:n,onClick:o},s.a.createElement(V.a,{className:r,size:i,color:c}));return l?s.a.createElement(J.a,{content:l,location:u},p):p};de.propTypes=ue,de.defaultProps={disabled:!1,onClick:function(){},label:"none",icon:"",iconSize:16,iconColor:"",title:"",location:"bottom",hidden:[]};var me=de,pe=n("./src/utils/index.js");function fe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return j()(this,n)}}var ge=function(e){P()(n,e);var t=fe(n);function n(){var e;b()(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),A()(C()(e),"handleToggle",(function(){var t=e.props,n=t.setIsShowTopBar,o=t.isShowTopBar,a=t.currentDocument;n(!o),pe.K.saveStateDocumentTopbar(a._id,!o)})),e}return E()(n,[{key:"render",value:function(){var e=this.props,t=e.isShowTopBar,n=e.hidden;return s.a.createElement(me,{icon:t?"arrow-up":"arrow-down",iconSize:16,onClick:this.handleToggle,title:"Hide\xa0the\xa0top\xa0bar",location:"bottom-end",hidden:n})}}]),n}(s.a.PureComponent);A()(ge,"propTypes",{currentDocument:l.a.object,isShowTopBar:l.a.bool.isRequired,setIsShowTopBar:l.a.func.isRequired,hidden:l.a.array});var he=ge,be=Object(o.c)((function(e){return{isShowTopBar:a.a.getIsShowTopBar(e),currentDocument:a.a.getCurrentDocument(e)}}),(function(e){return{setIsShowTopBar:function(t){return e(r.a.setIsShowTopBar(t))}}}))(he),ve=n("./node_modules/@material-ui/core/esm/ButtonGroup/ButtonGroup.js"),Ee=n("./src/constants/plan.js"),ye=n("./src/screens/Viewer/Context.js");function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return j()(this,n)}}var Te={changePageEditDisplayMode:l.a.func.isRequired,isPageEditMode:l.a.bool.isRequired,hidden:l.a.array,openPageEditMode:l.a.func.isRequired,closePageEditMode:l.a.func.isRequired,currentDocument:l.a.object,match:l.a.object,currentUser:l.a.object,isTablet:l.a.bool},Pe=function(e){P()(n,e);var t=Ce(n);function n(){var e;b()(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),A()(C()(e),"handleOpenPageEditMode",(function(){var t=e.props.openPageEditMode,n=e.context.bookmarkIns;n.prevBookmarks=n.bookmarksUser,M.default.deselectAllAnnotations(),M.default.enableReadOnlyMode(),t()})),A()(C()(e),"closeEditMode",(function(){var t=e.props,n=t.closePageEditMode,o=t.changePageEditDisplayMode,a=t.isPageEditMode,r=e.context.bookmarkIns;n(),M.default.disableReadOnlyMode(),e.setTool(),a&&(o("Grid"),r.reGenerateBookmarks())})),A()(C()(e),"setTool",(function(){var t=e.props,n=t.match,o=t.currentUser,a=t.currentDocument;if("tour"===n.params.documentId)return null;var r="",i=a.documentStatus;r=o?i.isPremium?Ee.c.PREMIUM:Ee.c.FREE:Ee.c.NO_PLAN,Object(pe.k)(r,o?a.roleOfDocument:a.shareSetting.permission)})),e}return E()(n,[{key:"render",value:function(){var e=this.props,t=e.isPageEditMode,n=e.hidden,o=e.currentDocument,a=e.isTablet,r=null===o||void 0===o?void 0:o.isOverTimeLimit,i=n.map((function(e){return"hide-in-".concat(e)})).join(" ");return s.a.createElement("div",{className:"EditMode__changeBtn ".concat(i)},s.a.createElement(ve.a,null,s.a.createElement(J.a,{content:"Add comments and annotations",additionalClass:"tooltip_viewer"},s.a.createElement(H.a,{id:"viewer-button-viewer",className:"ChangeEditMode__btn ".concat(t?"inactive":"active"," ").concat(r?"disabled":""),onClick:this.closeEditMode},s.a.createElement(V.a,{className:"edit icon__20 icon"}),s.a.createElement("span",{className:"text"},"Viewer"))),s.a.createElement(J.a,{content:"Rotate, delete, reorder, insert or crop pages",additionalClass:"tooltip_edit ".concat(t?"active":"")},s.a.createElement(H.a,{id:"viewer-button-page-tool",className:"ChangeEditMode__btn ".concat(a?"joyride-viewer-page-tool-tablet":"joyride-viewer-page-tool"," ").concat(t?"active":"inactive"," ").concat(r?"disabled":""),onClick:this.handleOpenPageEditMode},s.a.createElement(V.a,{className:"manipulation icon__20 icon"}),s.a.createElement("span",{className:"text"},"Page Tools")))))}}]),n}(i.PureComponent);Pe.propTypes=Te,Pe.defaultProps={hidden:[],currentDocument:{},match:{},currentUser:{},isTablet:!1},Pe.contextType=ye.a;var we=Pe,je=Object(Z.l)(Object(o.c)((function(e){return{isPageEditMode:a.a.isPageEditMode(e),currentUser:a.a.getCurrentUser(e),currentDocument:a.a.getCurrentDocument(e)}}),(function(e){return{openPageEditMode:function(){return e(r.a.openPageEditMode())},closePageEditMode:function(){return e(r.a.closePageEditMode())},changePageEditDisplayMode:function(t){return e(r.a.changePageEditDisplayMode(t))},setActiveEditMode:function(){return e(r.a.setActiveEditMode())},setDeactiveEditMode:function(){return e(r.a.setDeactiveEditMode())}}}))(we)),ke={signatureToolButton:{initialState:"newSignature",mount:function(e){var t=M.default.getTool("AnnotationCreateSignature");t.addEventListener("saveDefault.sigTool",(function(){e("defaultSignature")})),t.addEventListener("noDefaultSignatures",(function(){e("newSignature")}))},didUpdate:function(e,t,n,o,a){e.openElements!==t.openElements&&a()},unmount:function(){var e=M.default.getTool("AnnotationCreateSignature");e.removeEventListener("saveDefault.sigTool"),e.removeEventListener("noDefaultSignatures")},states:{toolName:"signature",newSignature:{icon:"signature",onClick:function(e,t,n){M.default.deselectAllAnnotations(),n(r.a.toggleElement("signatureOverlay"))},title:"annotation.signature",isActive:function(e){var t=e.openElements;return t.signatureModal||t.signatureOverlay}},defaultSignature:{icon:"signature",onClick:function(e,t,n){M.default.deselectAllAnnotations(),n(r.a.toggleElement("signatureOverlay"))},title:"annotation.signature",isActive:function(e){return e.openElements.signatureOverlay}}}}},Oe=n("./src/lumin-components/ButtonLumin/index.js");function _e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O()(e);if(t){var a=O()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return j()(this,n)}}var Ae={isActive:l.a.bool.isRequired,icon:l.a.string,title:l.a.string,toolName:l.a.string},xe=function(e){P()(n,e);var t=_e(n);function n(){var e;b()(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),A()(C()(e),"onClick",(function(){var t=e.props.toolName;M.default.setToolMode(t)})),e}return E()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title;return s.a.createElement(Oe.a,d()({},this.props,{"aria-label":"selectTool",className:"SelectButton",icon:t,iconSize:16,title:n,onClick:this.onClick}))}}]),n}(i.PureComponent);xe.propTypes=Ae,xe.defaultProps={icon:"",title:"",toolName:""};var Se=xe,De=Object(o.c)((function(e,t){return{isActive:a.a.getActiveToolName(e)===t.toolName}}))(Se);var Re=function(){return s.a.createElement("div",{className:"HeaderTablet"},s.a.createElement("div",null,s.a.createElement(f.a,{type:"toggleElementButton",icon:"panel icon__20",element:"leftPanel",dataElement:"leftPanelButton",title:"component.leftPanel"})),s.a.createElement("div",{className:"HeaderTablet__right"},s.a.createElement(f.a,{type:"toggleElementButton",dataElement:"searchButton",element:"searchOverlay",icon:"search icon__20",title:"component.searchOverlay"}),s.a.createElement("div",{className:"divider"}),s.a.createElement(je,{isTablet:!0}),s.a.createElement("div",{className:"divider"}),s.a.createElement(be,null)))},Ie=n("./src/helpers/logger.js"),Me={items:l.a.arrayOf(l.a.object).isRequired,currentDocument:l.a.object,careTaker:l.a.object};function Ne(e){var t=e.items,n=e.currentDocument,o=e.careTaker;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"HeaderItems"},t.map((function(e,t){var a=e.type,r=e.dataElement,i=e.hidden,c=e.id,l=i?i.map((function(e){return"hide-in-".concat(e)})).join(" "):"",u="".concat(a,"-").concat(r||t);switch(a){case"toolButton":return s.a.createElement(m.a,d()({key:u,mediaQueryClassName:l},e));case"toolGroupButton":return s.a.createElement(p.a,d()({key:u,mediaQueryClassName:l},e));case"toggleElementButton":return s.a.createElement(f.a,d()({key:u,mediaQueryClassName:l},e));case"actionButton":return s.a.createElement(g.a,d()({key:u,mediaQueryClassName:l},e));case"zoomButton":return s.a.createElement(G,{key:u});case"pageModeButton":return s.a.createElement(Y,{key:u});case"moreButton":return s.a.createElement(re,{key:u});case"statefulButton":var h=ke[r]||{};return s.a.createElement(ie.a,d()({key:u,mediaQueryClassName:l},e,h));case"customElement":return s.a.createElement(se.a,d()({key:u,mediaQueryClassName:l},e));case"spacer":case"divider":return s.a.createElement("div",{id:c||"",key:u,className:"".concat(a," ").concat(l)});case"pageManipulation":return s.a.createElement(je,{key:u,currentDocument:n,hidden:["mobile","small-desktop"]});case"hideTopViewer":return s.a.createElement(be,{key:u,hidden:["mobile","small-desktop"]});case"selectButton":return s.a.createElement(De,d()({key:u,mediaQueryClassName:l},e));case"actionUndo":return s.a.createElement(g.a,d()({key:u,mediaQueryClassName:l},e,{onClick:function(){return o.undoAnnotation()}}));case"actionRedo":return s.a.createElement(g.a,d()({key:u,mediaQueryClassName:l},e,{onClick:function(){return o.redoAnnotation()}}));default:Ie.a.logInfo({message:"".concat(a," is not a valid header item type."),reason:R.t.Service.PDFTRON})}}))),s.a.createElement(Re,null))}Ne.propTypes=Me,Ne.defaultProps={currentDocument:{},careTaker:{}};var Le=Ne,Be=s.a.memo(Le),Ue={changePageEditDisplayMode:l.a.func,updateThumbs:l.a.func,pageEditDisplayMode:l.a.oneOf(["Single","Grid"])};function Fe(e){var t=e.changePageEditDisplayMode,n=e.pageEditDisplayMode,o=e.updateThumbs;return s.a.createElement("div",{className:"HeaderEditMode"},s.a.createElement("div",{className:"HeaderEditMode__left"},s.a.createElement(Oe.a,{className:"Grid"===n?"active":"",icon:"gridview icon__20",title:"Grid View",onClick:function(){t("Grid"),o([])}}),s.a.createElement(Oe.a,{className:"Single"===n?"active":"",icon:"single-view icon__20",title:"Single View",onClick:function(){t("Single"),M.default.updateView()}})),s.a.createElement("div",{className:"HeaderEditMode__right"},s.a.createElement(je,{hidden:["mobile"]}),s.a.createElement("div",{className:"divider"}),s.a.createElement(be,null),"Single"===n&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"divider"}),s.a.createElement(G,null))))}Fe.propTypes=Ue,Fe.defaultProps={changePageEditDisplayMode:function(){},updateThumbs:function(){},pageEditDisplayMode:"Grid"};var Ge=Fe,He=Object(o.c)((function(e){return{pageEditDisplayMode:a.a.pageEditDisplayMode(e)}}),(function(e){return{changePageEditDisplayMode:function(t){return e(r.a.changePageEditDisplayMode(t))},updateThumbs:function(t){return e(r.a.updateThumbs(t))}}}))(Ge),ze=n("./src/helpers/getClassName.js"),We={isDisabled:l.a.bool,isOpen:l.a.bool,activeHeaderItems:l.a.array.isRequired,currentDocument:l.a.object,careTaker:l.a.object,isPageEditMode:l.a.bool,isLoadingDocument:l.a.bool,closeElement:l.a.func};function Ve(e){var t=e.isDisabled,n=e.activeHeaderItems,o=e.isPageEditMode,a=e.currentDocument,r=e.careTaker,c=e.isOpen,l=e.isLoadingDocument,u=e.closeElement,d=Object(i.useRef)();Object(i.useEffect)((function(){var e=d.current;return document.addEventListener("click",m,!1),null===e||void 0===e||e.addEventListener("wheel",p),function(){document.removeEventListener("click",m,!1),null===e||void 0===e||e.removeEventListener("wheel",p)}}),[]);var m=function(e){d.current&&d.current.contains(e.target)&&u("annotationPopup")},p=function(e){return e.preventDefault()},f=Object(ze.a)("Header",{isOpen:c});if(t)return null;var g=a.isOverTimeLimit||l;return s.a.createElement("div",{className:f,"data-element":"header",ref:d},g&&s.a.createElement("div",{className:"Header__overlay"}),o?s.a.createElement(He,null):s.a.createElement(Be,{items:n,currentDocument:a,careTaker:r}))}Ve.propTypes=We,Ve.defaultProps={isDisabled:!1,isOpen:!1,currentDocument:{},careTaker:{},isPageEditMode:!1,isLoadingDocument:!1,closeElement:function(){}};var qe=Ve;t.a=Object(o.c)((function(e){return{careTaker:a.a.getCareTaker(e),isDisabled:a.a.isElementDisabled(e,"header"),isOpen:a.a.isElementOpen(e,"header"),activeHeaderItems:a.a.getActiveHeaderItems(e),isPageEditMode:a.a.isPageEditMode(e)}}),(function(e){return{dispatch:e,closeElement:function(t){return e(r.a.closeElement(t))}}}))(qe)},"./src/lumin-components/Icon/index.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(d),p=n("./node_modules/react/index.js"),f=n.n(p),g=n("./node_modules/prop-types/index.js"),h=n.n(g);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return u()(this,n)}}var v={className:h.a.string,glyph:h.a.string.isRequired},E=function(e){c()(n,e);var t=b(n);function n(){var e;return a()(this,n),(e=t.call(this)).icon=f.a.createRef(),e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.glyph;return f.a.createElement("div",{ref:this.icon,className:"Icon ".concat(t)},f.a.createElement("img",{src:"./assets/".concat(n,".svg")}))}}]),n}(f.a.PureComponent);E.propTypes=v,E.defaultProps={className:""};var y=E;t.a=y},"./src/lumin-components/LuminButton/index.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/extends.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),i=n.n(r),s=n("./node_modules/react/index.js"),c=n.n(s),l=n("./node_modules/prop-types/index.js"),u=n.n(l),d=n("./node_modules/@material-ui/core/esm/Button/Button.js"),m=n("./src/lumin-components/Tooltip/index.js"),p=n("./src/lumin-components/Icomoon/index.js"),f=n("./node_modules/lodash/isEmpty.js"),g=n.n(f),h={children:u.a.object,className:u.a.string,disabled:u.a.bool,onClick:u.a.func,onMouseDown:u.a.func,label:u.a.string,icon:u.a.string,iconSize:u.a.number,iconColor:u.a.string,full:u.a.bool,small:u.a.bool,type:u.a.string,fontSecondary:u.a.bool,square:u.a.bool,isIconButton:u.a.bool,hasTooltip:u.a.bool},b=c.a.forwardRef((function(e,t){var n=e.children,o=e.className,r=e.disabled,s=e.onClick,l=e.onMouseDown,u=e.label,f=e.icon,h=e.iconSize,b=e.iconColor,v=e.full,E=e.small,y=e.type,C=e.fontSecondary,T=e.square,P=e.isIconButton,w=e.hasTooltip,j=i()(e,["children","className","disabled","onClick","onMouseDown","label","icon","iconSize","iconColor","full","small","type","fontSecondary","square","isIconButton","hasTooltip"]),k=c.a.createElement(d.a,a()({"aria-label":u,className:"LuminButton ".concat(function(){var e=[];return r&&e.push("disabled"),v&&e.push("full"),y&&e.push(y),E&&e.push("small"),T&&e.push("square"),C&&e.push("font-secondary"),P&&e.push("icon-button"),e.map((function(e){return"".concat("LuminButton","--").concat(e)})).join(" ").trim()}()," ").concat(o),disabled:r,onClick:s,onMouseDown:l,disableRipple:!!P,ref:t},j),f&&c.a.createElement(p.a,{className:"".concat(f," LuminButton__icon"),size:h,color:b}),!w&&u&&c.a.createElement("span",{className:"LuminButton__label"},u),!g()(n)&&n);return w?c.a.createElement(m.a,{content:u},k):k}));b.propTypes=h,b.defaultProps={children:{},className:"",disabled:!1,onClick:function(){},onMouseDown:function(){},label:"",icon:"",iconSize:16,iconColor:"",full:!1,small:!1,type:"primary",fontSecondary:!1,square:!1,isIconButton:!1,hasTooltip:!1};var v=b;t.a=v},"./src/lumin-components/MobileAppCover/index.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=n.n(o),r=n("./node_modules/react/index.js"),i=n.n(r),s=n("./src/lumin-components/ButtonMaterial/index.js"),c=n("./node_modules/@material-ui/core/esm/Grid/Grid.js"),l=n("./src/helpers/device.js"),u=n("./src/lumin-components/SvgElement/index.js"),d=n("./assets/images/logo_bd.png"),m=n.n(d);var p=function(){var e=JSON.parse(localStorage.getItem("showMobileAppCover")),t=Object(r.useState)(e),n=a()(t,2),o=n[0],d=n[1],p=Object(l.a)();return p="Unknown"===p?"Your-Browser":p,i.a.createElement("div",{className:"MobileAppCover hide-in-tablet hide-in-desktop ".concat(o?"hidden":"")},i.a.createElement("div",{className:"MobileAppCover__cover"}),i.a.createElement("div",{className:"MobileAppCover__content"},i.a.createElement(c.a,{container:!0,direction:"row",alignItems:"center"},i.a.createElement(c.a,{item:!0,xs:12,className:"MobileAppCover__title"},"View PDF documents in\u2026"),i.a.createElement(c.a,{item:!0,xs:8,className:"MobileAppCover__iconWithName"},i.a.createElement("img",{className:"MobileAppCover__logo",src:m.a,alt:"Logo",width:"40px"}),i.a.createElement("span",{className:"MobileAppCover__text"},"Lumin PDF App")),i.a.createElement(c.a,{item:!0,xs:4},i.a.createElement(s.a,{className:"primary MobileAppCover__button small",href:"https://luminpdf.app.link/Htl2JX9n0V","data-loading-text":"Loading..."},"Open")),i.a.createElement(c.a,{item:!0,xs:8,className:"MobileAppCover__iconWithName"},i.a.createElement(u.a,{content:p,width:40}),i.a.createElement("span",{className:"MobileAppCover__text"},"Edge"===p?"Microsoft Edge":p.replace("-"," "))),i.a.createElement(c.a,{item:!0,xs:4},i.a.createElement(s.a,{className:"secondary MobileAppCover__button small",onClick:function(){localStorage.setItem("showMobileAppCover",JSON.stringify(!0)),d(!0)}},"Continue")))))};t.a=p},"./src/lumin-components/PDFInfoModal/index.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(o),r=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/react-router/esm/react-router.js"),s=n("./src/redux/selectors/index.js"),c=n("./node_modules/@babel/runtime/regenerator/index.js"),l=n.n(c),u=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),d=n.n(u),m=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),p=n.n(m),f=n("./node_modules/@babel/runtime/helpers/createClass.js"),g=n.n(f),h=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),b=n.n(h),v=n("./node_modules/@babel/runtime/helpers/inherits.js"),E=n.n(v),y=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),C=n.n(y),T=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),P=n.n(T),w=n("./node_modules/react/index.js"),j=n.n(w),k=n("./node_modules/prop-types/index.js"),O=n.n(k),_=n("./node_modules/@material-ui/core/esm/DialogContent/DialogContent.js"),A=n("./node_modules/@material-ui/core/esm/DialogTitle/DialogTitle.js"),x=n("./node_modules/@material-ui/core/esm/Grid/Grid.js"),S=n("./node_modules/mime-types/index.js"),D=n.n(S),R=n("./src/lumin-components/Dialog/index.js"),I=n("./src/lumin-components/SvgElement/index.js"),M=n("./src/lumin-components/ButtonMaterial/index.js"),N=n("./src/lumin-components/CircularLoading/index.js"),L=n("./src/utils/index.js"),B=n("./src/services/index.js");function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=P()(e);if(t){var a=P()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return C()(this,n)}}var F={open:O.a.bool,currentDocument:O.a.object,themeMode:O.a.oneOf(["light","dark"]),closeDialog:O.a.func,match:O.a.object},G=function(e){E()(n,e);var t=U(n);function n(e){var o;return p()(this,n),o=t.call(this,e),a()(b()(o),"_renderRow",(function(e,t){return j.a.createElement(x.a,{container:!0,className:"DialogContent__line"},j.a.createElement(x.a,{item:!0,xs:5,className:"DialogContent__title"},e),j.a.createElement(x.a,{item:!0,xs:7},j.a.createElement("span",{className:"DialogContent__text"},t)))})),a()(b()(o),"_getStorage",(function(e){var t=o.props,n=t.themeMode,a=t.match.url.includes("viewer");return"s3"===e?j.a.createElement(I.a,{content:"primary-logo-".concat(a?n:"light"),width:101,height:24}):j.a.createElement(I.a,{content:e||"google",width:28,height:28})})),o.state={isLoading:!0,pdfInfo:{}},o}return g()(n,[{key:"componentDidMount",value:function(){var e=d()(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.currentDocument,e.next=3,B.c.getPDFInfo(t._id);case 3:n=e.sent,this.setState({pdfInfo:n,isLoading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.open,n=e.themeMode,o=e.closeDialog,a=e.match,r=e.currentDocument,i=this.state,s=i.isLoading,c=i.pdfInfo,l=c.organizationName,u=c.teamName,d=c.fileName,m=c.fileType,p=c.fileSize,f=c.creator,g=c.creationDate,h=c.modificationDate,b=c.storage,v=(null===r||void 0===r?void 0:r.name)||d,E=a.url.includes("viewer"),y=D.a.extension(m),C=E?n:"light",T="tour"===a.params.documentId?"Lumin":f;return j.a.createElement("div",null,j.a.createElement(R.a,{open:t,onClose:o,className:"Dialog theme-".concat(C)},s?j.a.createElement("div",{className:"Dialog__loading"},j.a.createElement(N.a,{size:35})):j.a.createElement("div",{className:"Dialog__container"},j.a.createElement(A.a,{className:"DialogTitle",id:"responsive-dialog-title"},j.a.createElement("span",{className:"Dialog__title"},"File Info")),j.a.createElement(_.a,{className:"DialogContent"},(l||u)&&j.a.createElement(j.a.Fragment,null,l&&this._renderRow("Organization Name",l),u&&this._renderRow("Team Name",u),j.a.createElement("div",{className:"divider"})),this._renderRow("File Name",L.o.getFilenameWithoutExtension(v)),this._renderRow("File Type",y.toString().toUpperCase()),this._renderRow("File Size",Object(L.e)(p)),j.a.createElement("div",{className:"divider"}),this._renderRow("Creator",T),this._renderRow("Creation Date",L.j.formatMDYTime(new Date(1*g))),this._renderRow("Modification Date",L.j.formatMDYTime(new Date(1*h))),j.a.createElement("div",{className:"divider"}),this._renderRow("Storage",this._getStorage(b)),j.a.createElement(M.a,{className:"Dialog__button primary",onClick:o},"OK")))))}}]),n}(j.a.PureComponent);G.propTypes=F,G.defaultProps={open:!1,currentDocument:{},themeMode:"light",closeDialog:function(){},match:{}};var H=G;function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}t.a=Object(r.c)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({currentDocument:s.a.getCurrentDocument(e),themeMode:s.a.getThemeMode(e)},t)}))(Object(i.l)(H))},"./src/lumin-components/PageNavOverlay/index.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/createClass.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/inherits.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),f=n.n(p),g=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),h=n.n(g),b=n("./node_modules/react/index.js"),v=n.n(b),E=n("./node_modules/prop-types/index.js"),y=n.n(E),C=n("./node_modules/react-redux/es/index.js"),T=n("./src/lumin-components/Icomoon/index.js"),P=n("./src/core/index.js"),w=n("./node_modules/classnames/index.js"),j=n.n(w),k=n("./src/redux/selectors/index.js"),O=n("./src/helpers/device.js");function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return m()(this,n)}}var A=function(e){u()(n,e);var t=_(n);function n(e){var o;return a()(this,n),o=t.call(this,e),h()(c()(o),"onClick",(function(){O.k?setTimeout((function(){o.textInput.current.setSelectionRange(0,9999)}),0):o.textInput.current.select()})),h()(c()(o),"onChange",(function(e){e.target.value.length>o.props.totalPages.toString().length||o.setState({input:e.target.value})})),h()(c()(o),"onSubmit",(function(e){e.preventDefault();var t=o.state.input;if(""===t||o.props.pageLabels.includes(t)){var n=o.props.pageLabels.indexOf(t)+1;P.default.setCurrentPage(n)}else o.textInput.current.blur()})),h()(c()(o),"onBlur",(function(){var e=o.props,t=e.currentPage,n=e.pageLabels;o.setState({input:n[t-1]})})),o.textInput=v.a.createRef(),o.state={input:"",isCustomPageLabels:!1},o}return i()(n,[{key:"componentDidUpdate",value:function(e){if(e.pageLabels!==this.props.pageLabels){var t=this.props.pageLabels.some((function(e,t){return e!=="".concat(t+1)}));this.setState({isCustomPageLabels:t})}e.currentPage===this.props.currentPage&&e.pageLabels===this.props.pageLabels||this.setState({input:this.props.pageLabels[this.props.currentPage-1]})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.isDisabled,o=e.isLeftPanelOpen,a=e.isLeftPanelDisabled,r=e.currentPage,i=e.totalPages,s=e.pageEditDisplayMode,c=e.isPageEditMode,l=e.allowPageNavigation,u=e.isCommentPanelOpen;if(n||!t)return null;var d=1===r?"disabled":"",m=r===i?"disabled":"";return"Grid"===s&&!c||"Single"===s&&c?v.a.createElement("div",{className:j()({Overlay:!0,PageNavOverlay:!0,shifted:c||o||o&&!a&&!u}),"data-element":"pageNavOverlay",onClick:this.onClick},v.a.createElement(T.a,{onClick:function(){return P.default.setCurrentPage(1)},className:"first icon__12 ".concat(d)}),v.a.createElement(T.a,{onClick:function(){return null===P.default||void 0===P.default?void 0:P.default.setCurrentPage(Math.max(P.default.getCurrentPage()-1,1))},className:"prev icon__12 ".concat(d)}),v.a.createElement("form",{onSubmit:this.onSubmit,onBlur:this.onBlur},v.a.createElement("input",{ref:this.textInput,disabled:!l,type:"text",value:this.state.input,onChange:this.onChange,tabIndex:-1,style:{width:"".concat(11.5*this.props.totalPages.toString().length,"px")}}),this.state.isCustomPageLabels?" (".concat(r,"/").concat(i,")"):" / ".concat(i)),v.a.createElement(T.a,{onClick:function(){return P.default.docViewer.setCurrentPage(Math.min(P.default.getCurrentPage()+1,P.default.getTotalPages()))},className:"next icon__12 ".concat(m)}),v.a.createElement(T.a,{onClick:function(){return P.default.docViewer.setCurrentPage(P.default.getTotalPages())},className:"last icon__12 ".concat(m)})):null}}]),n}(v.a.PureComponent);A.propTypes={isLeftPanelDisabled:y.a.bool,isLeftPanelOpen:y.a.bool,isDisabled:y.a.bool,isOpen:y.a.bool,currentPage:y.a.number,totalPages:y.a.number,pageLabels:y.a.array.isRequired,isPageEditMode:y.a.bool,allowPageNavigation:y.a.bool.isRequired,pageEditDisplayMode:y.a.string,isCommentPanelOpen:y.a.bool},A.defaultProps={isLeftPanelDisabled:!1,isLeftPanelOpen:!1,isDisabled:!1,isOpen:!1,currentPage:1,totalPages:1,isPageEditMode:!1,pageEditDisplayMode:"Single",isCommentPanelOpen:!1};var x=Object(C.c)((function(e){return{isLeftPanelDisabled:k.a.isElementDisabled(e,"leftPanel"),isLeftPanelOpen:k.a.isElementOpen(e,"leftPanel"),isDisabled:k.a.isElementDisabled(e,"pageNavOverlay"),isOpen:k.a.isElementOpen(e,"pageNavOverlay"),currentPage:k.a.getCurrentPage(e),totalPages:k.a.getTotalPages(e),pageLabels:k.a.getPageLabels(e),pageEditDisplayMode:k.a.pageEditDisplayMode(e),isPageEditMode:k.a.isPageEditMode(e),allowPageNavigation:k.a.getAllowPageNavigation(e),isCommentPanelOpen:k.a.isElementOpen(e,"rightPanelComment")}}))(A);t.a=x},"./src/lumin-components/PasswordModal/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./src/lumin-components/PasswordModal/PasswordModal.js");n.d(t,"setCheckPasswordFunction",(function(){return o.c})),t.default=o.a},"./src/lumin-components/PrintHandler/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=n.n(o),r=n("./node_modules/react/index.js"),i=n.n(r),s=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/classnames/index.js"),l=n.n(c),u=n("./src/core/index.js"),d=n("./src/constants/types.js"),m=n("./src/helpers/device.js"),p=n("./src/redux/selectors/index.js"),f=function e(){var t=Object(s.f)((function(e){return[p.a.isElementDisabled(e,"printHandler"),p.a.isEmbedPrintSupported(e)]}),s.d),n=a()(t,2),o=n[0],c=n[1],f=Object(r.useState)(""),g=a()(f,2),h=g[0],b=g[1];return Object(r.useEffect)((function(){var e=function(){var e=u.default.getDocument().getType();b(e)};return u.default.addEventListener("documentLoaded",e),function(){return u.default.removeEventListener("documentLoaded",e)}})),o?null:i.a.createElement("div",{className:l()({PrintHandler:e,"ios-print":m.k})},c&&h===d.a.PDF?i.a.createElement("iframe",{id:"print-handler",tabIndex:-1}):i.a.createElement("div",{id:"print-handler"}))};t.default=f},"./src/lumin-components/ShareDocumentOrganizationModal/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/recompose/dist/Recompose.esm.js"),r=n("./node_modules/react-router/esm/react-router.js"),i=n("./src/redux/selectors/index.js"),s=n("./src/redux/actions/index.js"),c=n("./src/utils/preloadRoute.js"),l=Object(c.a)((function(){return n.e(48).then(n.bind(null,"./src/lumin-components/ShareDocumentOrganizationModal/ShareDocumentOrganizationModal.js"))}));t.a=Object(a.a)(Object(o.c)((function(e){return{currentUser:i.a.getCurrentUser(e),themeMode:i.a.getThemeMode(e)}}),(function(e){return{dispatch:e,openModal:function(t){return e(s.a.openModal(t))}}})),r.l)(l)},"./src/lumin-components/ShareModal/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/react-router/esm/react-router.js"),r=n("./node_modules/recompose/dist/Recompose.esm.js"),i=n("./node_modules/@apollo/react-hoc/lib/react-hoc.esm.js"),s=n("./node_modules/@loadable/component/dist/loadable.esm.js"),c=n("./src/redux/actions/index.js"),l=n("./src/redux/selectors/index.js"),u=Object(s.a)((function(){return n.e(50).then(n.bind(null,"./src/lumin-components/ShareModal/ShareModal.js"))}));t.a=Object(r.a)(Object(o.c)((function(e){return{currentUser:l.a.getCurrentUser(e),currentTeam:l.a.getCurrentTeam(e),organizations:l.a.getOrganizationList(e),currentFolderType:l.a.getCurrentFolderType(e),themeMode:l.a.getThemeMode(e)}}),(function(e){return{dispatch:e,openModal:function(t){return e(c.a.openModal(t))},closeModal:function(){return e(c.a.closeModal())},openLoading:function(){return e(c.a.openElement("loadingModal"))},closeLoading:function(){return e(c.a.closeElement("loadingModal"))},openToast:function(t){return e(c.a.openToast(t))}}})),i.a,a.l)(u)},"./src/lumin-components/ShareSettingModal/index.js":function(e,t,n){"use strict";var o=n("./node_modules/@loadable/component/dist/loadable.esm.js"),a=n("./node_modules/react-redux/es/index.js"),r=n("./src/redux/selectors/index.js"),i=Object(o.a)((function(){return n.e(80).then(n.bind(null,"./src/lumin-components/ShareSettingModal/ShareSettingModal.js"))}));t.a=Object(a.c)((function(e){return{themeMode:r.a.getThemeMode(e)}}))(i)},"./src/lumin-components/Shared/ButtonIcon/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var o=n("./node_modules/@babel/runtime/helpers/extends.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),i=n.n(r),s=n("./node_modules/react/index.js"),c=n.n(s),l=n("./node_modules/prop-types/index.js"),u=n.n(l),d=n("./node_modules/classnames/index.js"),m=n.n(d),p=n("./node_modules/@material-ui/core/esm/Button/Button.js"),f=n("./node_modules/@material-ui/styles/esm/makeStyles/makeStyles.js"),g=n("./src/lumin-components/Icomoon/index.js"),h=n("./src/constants/styles/Colors.js"),b=Object(f.a)({button:function(e){var t=e.size,n=e.isActive;return{width:t,minWidth:t,height:t,padding:0,borderRadius:4,background:"".concat(n?h.a.PALEBLUE:"white"),transition:"all 0.3s ease","&:hover":n&&{background:h.a.PALEBLUE},"&:disabled":{background:h.a.SMOKE,opacity:.5}}},icon:function(e){var t=e.isActive;return{color:"".concat(t?h.a.PRIMARY:h.a.SECONDARY)}}}),v=c.a.forwardRef((function(e,t){var n=e.icon,o=e.iconColor,r=e.size,s=e.iconSize,l=e.onClick,u=e.className,d=e.isActive,f=e.href,h=i()(e,["icon","iconColor","size","iconSize","onClick","className","isActive","href"]),v=b({size:r,isActive:d});return c.a.createElement(p.a,a()({ref:t,className:m()(v.button,u),onClick:l,href:f},h),c.a.createElement(g.a,{size:s||r/2,color:o,className:m()(n,v.icon)}))}));v.propTypes={icon:u.a.string.isRequired,onClick:u.a.func,size:u.a.number,className:u.a.string,isActive:u.a.bool,href:u.a.string,iconColor:u.a.string,iconSize:u.a.number},v.defaultProps={size:32,onClick:function(){},className:"",isActive:!1,href:"",iconColor:"",iconSize:void 0};var E=v},"./src/lumin-components/StartTrialModal/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/react-router/esm/react-router.js"),r=n("./node_modules/recompose/dist/Recompose.esm.js"),i=n("./src/redux/selectors/index.js"),s=n("./node_modules/@babel/runtime/regenerator/index.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),f=n.n(p),g=n("./node_modules/react/index.js"),h=n.n(g),b=n("./node_modules/prop-types/index.js"),v=n.n(b),E=n("./node_modules/@material-ui/core/esm/styles/makeStyles.js"),y=n("./node_modules/@material-ui/core/esm/Checkbox/Checkbox.js"),C=n("./src/lumin-components/Dialog/index.js"),T=n("./src/lumin-components/SvgElement/index.js"),P=n("./src/lumin-components/Icomoon/index.js"),w=n("./src/lumin-components/ButtonMaterial/index.js"),j=n("./src/constants/freeTrialExpire.js"),k=n("./src/services/userServices.js"),O=n("./src/hooks/index.js"),_=n("./src/hooks/useTrackingModalEvent.js"),A=n("./src/constants/paymentConstant.js"),x=n("./src/utils/Factory/EventCollection/ModalEventCollection.js"),S=Object(E.a)((function(e){return{paperScrollBody:f()({maxWidth:500,minHeight:608},e.breakpoints.down("xs"),{width:"100%",maxWidth:"none"}),root:{zIndex:"1200 !important"}}})),D={expires:v.a.object.isRequired,history:v.a.object.isRequired},R=["Unlimited storage","Collaborate with co-workers","Sign documents with eSignatures"],I=["Add highlights, edit text","Manipulate document structures","And much more!"],M={startTrial:{currentStep:"start-trial-modal",title:"Upgrade to our Professional plan free for ".concat(A.d," days"),subTitle:"You're currently on a free plan. Why not go Professional free for ".concat(A.d," days? Access Premium features, cancel anytime:"),mainBtnContent:"Start Free Trial"},endTrial:{currentStep:"end-trial-modal",title:"Your Free trial has ended. Upgrade now to keep enjoying premium features.",subTitle:"You're currently on a free account. Upgrade now to get more out of Lumin PDF. Access premium features for $10 per month:",mainBtnContent:"Upgrade Now"}},N=function(e){var t,n=e.expires,o=e.history,a=Object(g.useState)(!1),r=m()(a,2),i=r[0],s=r[1],l=Object(g.useState)(!1),d=m()(l,2),p=d[0],f=d[1],b=S(),v=Object(O.j)(),E=null===(t=n.FREE_TRIAL_30)||void 0===t?void 0:t.status,A=E===j.b,D=A?M.startTrial:M.endTrial,N=Object(_.a)({modalName:x.a.PROMPT_UPGRADE_PROFESSIONAL_FREE_TRIAL,modalPurpose:x.b[x.a.PROMPT_UPGRADE_PROFESSIONAL_FREE_TRIAL],isOpen:p}),L=N.trackModalConfirmation,B=N.trackModalDismiss,U=N.trackModalHidden;Object(g.useEffect)((function(){E&&(A&&function(){var e=u()(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.e)(t);case 2:n=e.sent,v.current&&f(!n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(D.currentStep))}),[E]);var F=function(e){return e.map((function(e,t){return h.a.createElement("li",{className:"StartTrialModal__detail",key:t},h.a.createElement(P.a,{className:"check",color:"#3c80ef",size:14}),h.a.createElement("p",{className:"StartTrialModal__detail-message"},e))}))};return h.a.createElement(C.a,{open:p,fullWidth:!0,scroll:"body",classes:{paperScrollBody:b.paperScrollBody,root:b.root}},h.a.createElement("div",{className:"StartTrialModal","aria-label":"StartTrialModal"},h.a.createElement("div",{className:"StartTrialModal__avatar_wrapper"},h.a.createElement(T.a,{content:"start-trial",alt:"Start trial",className:"StartTrialModal__avatar"})),h.a.createElement("div",{className:"StartTrialModal__content"},h.a.createElement("h2",{className:"StartTrialModal__title"},D.title),h.a.createElement("p",{className:"StartTrialModal__subtitle"},D.subTitle),h.a.createElement("div",{className:"StartTrialModal__details"},h.a.createElement("ul",{className:"StartTrialModal__details-left"},F(R)),h.a.createElement("ul",{className:"StartTrialModal__details-right"},F(I))),h.a.createElement("div",{className:"StartTrialModal__btn"},h.a.createElement(w.a,{className:"StartTrialModal__btn-cancel",onClick:function(){A&&B(),i&&Object(k.g)(D.currentStep),f(!1)}},"Not Now"),h.a.createElement(w.a,{className:"danger StartTrialModal__btn-ok",onClick:function(){var e="end-trial-modal"===D.currentStep;e||L(),i&&Object(k.g)(D.currentStep),o.push("/payment/".concat(e?"individual/professional":"free-trial"))}},D.mainBtnContent)),h.a.createElement("div",{className:"StartTrialModal__checkbox"},h.a.createElement(y.a,{id:"StartTrialModal__check",label:"Don't show this again.",checked:i,onChange:function(e){var t=e.target.checked;t&&U(),s(t)}}),h.a.createElement("label",{className:"StartTrialModal__checkbox-label",htmlFor:"StartTrialModal__check"},"Don't show this again.")))))};N.propTypes=D;var L=N;t.a=Object(r.a)(Object(o.c)((function(e){return{expires:i.a.getWillExpireFreeTrial(e),currentUser:i.a.getCurrentUser(e)}})),a.l)(L)},"./src/lumin-components/StatefulButton/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./src/redux/actions/index.js"),r=n("./src/redux/selectors/index.js"),i=n("./node_modules/react-router/esm/react-router.js"),s=n("./node_modules/@babel/runtime/helpers/extends.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/createClass.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),f=n.n(p),g=n("./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(g),b=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),v=n.n(b),E=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),y=n.n(E),C=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),T=n.n(C),P=n("./node_modules/react/index.js"),w=n.n(P),j=n("./node_modules/prop-types/index.js"),k=n.n(j),O=n("./src/lumin-components/ButtonLumin/index.js"),_=n("./src/lumin-components/ToolButtonPopper/index.js"),A=n("./src/constants/lumin-common.js"),x=n("./src/utils/index.js");function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return v()(this,n)}}var D={arrow:k.a.bool,dispatch:k.a.func,initialState:k.a.string.isRequired,mount:k.a.func.isRequired,unmount:k.a.func,didUpdate:k.a.func,states:k.a.shape({activeState:k.a.shape({img:k.a.string,label:k.a.string,onClick:k.a.func.isRequired,title:k.a.string.isRequired,getContent:k.a.func.isRequired}),AnotherState:k.a.shape({img:k.a.string,label:k.a.string,onClick:k.a.func.isRequired,title:k.a.string.isRequired,getContent:k.a.func.isRequired}),toolName:k.a.string}),currentDocument:k.a.object,currentUser:k.a.object,dataElement:k.a.string,closeElements:k.a.func,additionalClass:k.a.string,match:k.a.object},R=function(e){h()(n,e);var t=S(n);function n(e){var o;return u()(this,n),o=t.call(this,e),T()(f()(o),"isToolLimited",(function(){var e=o.props,t=e.currentDocument,n=e.currentUser,a=e.match;if("5cf1b9ee7ba93440bd685ea2"===a.params.documentId||"tour"===a.params.documentId)return!1;if(!t||!n)return!0;var r=x.M.validateFeature({currentUser:n,currentDocument:t});return r===A.n.SIGNIN_REQUIRED||r===A.n.PERMISSION_REQUIRED})),T()(f()(o),"update",(function(e){e?o.setState({activeState:e}):o.forceUpdate()})),T()(f()(o),"onClick",(function(){var e=o.state.activeState,t=o.props,n=t.states,a=t.dispatch,r=t.closeElements;if(o.isToolLimited())return o.togglePopper(),void r(["toolsOverlay","searchOverlay","toolStylePopup","viewControlsOverlay","signatureOverlay"]);o.props.states[e].onClick(o.update,n[e],a)})),T()(f()(o),"togglePopper",(function(){o.setState((function(e){return{openPopper:!e.openPopper}}))})),T()(f()(o),"closePopper",(function(){o.setState({openPopper:!1})})),o.state={activeState:o.props.initialState,openPopper:!1},o}return m()(n,[{key:"componentDidMount",value:function(){var e=this.props.mount;e&&e(this.update)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,o=n.didUpdate,a=n.states;o&&o(e,this.props,a[t.activeState],a[this.state.activeState],this.update)}},{key:"componentWillUnmount",value:function(){var e=this.props.unmount;e&&e()}},{key:"render",value:function(){var e=this.state,t=e.activeState,n=e.openPopper,o=this.props,a=o.states,r=o.additionalClass,i=o.arrow,s=a[t],l=s.title,u=s.img,d=s.getContent,m=s.isActive,p=s.icon,f=a.toolName,g=d?d(a[t]):"",h=["StatefulButton",this.isToolLimited()?"disabled":"",i?"down-arrow":"",a[t].className?a[t].className:"",r,"signature"===f?"joyride-viewer-signature":""].join(" ").trim();return w.a.createElement(_.a,{openPopper:n,closePopper:this.closePopper,icon:p,toolName:f},w.a.createElement(O.a,c()({},this.props,{title:l,className:h,isActive:m&&m(this.props),img:u,icon:p,label:g,onClick:this.onClick})))}}]),n}(w.a.PureComponent);R.propTypes=D,R.defaultProps={arrow:!1,dispatch:function(){},unmount:function(){},didUpdate:function(){},states:{},currentDocument:{},currentUser:{},dataElement:"",closeElements:function(){},additionalClass:"",match:{}};var I=R;t.a=Object(o.c)((function(e,t){return{isOpen:r.a.isElementOpen(e,t.dataElement),openElements:r.a.getOpenElements(e),closeElements:a.a.closeElements,currentDocument:r.a.getCurrentDocument(e),currentUser:r.a.getCurrentUser(e)}}))(Object(i.l)(I))},"./src/lumin-components/TimeLimit/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),a=n.n(o),r=n("./node_modules/prop-types/index.js"),i=n.n(r),s=n("./node_modules/dayjs/dayjs.min.js"),c=n.n(s),l=n("./src/utils/file.js"),u=n("./src/lumin-components/ButtonMaterial/index.js"),d={isShowButton:i.a.bool,createdTime:i.a.string,name:i.a.string,themeMode:i.a.string},m={isShowButton:!1,createdTime:String(Date.now()),name:"",themeMode:"light"},p=function(e){var t=e.isShowButton,n=e.createdTime,o=e.name,r=e.themeMode,i=c()(Number(n)),s=c()().diff(i,"years");return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"TimeLimit"},a.a.createElement("img",{className:"TimeLimit__icon",src:"../../../assets/images/limit-time-".concat(r,".svg"),alt:"Document has been limited"}),a.a.createElement("h2",{className:"TimeLimit__title"},"This document is only stored within one year."),a.a.createElement("p",{className:"TimeLimit__content"},a.a.createElement("strong",null,l.a.getShortFilename(o))," was uploaded on"," ",a.a.createElement("strong",null,i.format("MMM DD, YYYY")," -"," ",s," year",s>1?"s":""," ago"),". Based on our policy, the account with free plan is able to access the documents which are uploaded within one year."),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"TimeLimit__content"},a.a.createElement("a",{href:"/plans",target:"_blank"},"Go Premium")," to access ",a.a.createElement("strong",null,l.a.getShortFilename(o)),"."),a.a.createElement(u.a,{className:"fit-content danger ButtonMaterial--link TimeLimit__button"},a.a.createElement("a",{href:"/plans",target:"_blank"},"Go Premium")))))};p.propTypes=d,p.defaultProps=m;var f=p;t.a=f},"./src/lumin-components/ToggleElementButton/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./src/redux/selectors/index.js"),r=n("./src/redux/actions/index.js"),i=n("./node_modules/react/index.js"),s=n.n(i),c=n("./src/lumin-components/ButtonLumin/index.js");var l=function(e){return s.a.createElement(c.a,e)};t.a=Object(o.c)((function(e,t){var n=a.a.isElementOpen(e,t.element);if("redactionButton"===t.dataElement){var o=a.a.getActiveToolName(e);n=n||"AnnotationCreateRedaction"===o}return{className:t.className||"ToggleElementButton",isActive:n}}),(function(e,t){return{onClick:function(){e(r.a.toggleElement(t.element))}}}))(l)},"./src/lumin-components/ToolButton/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/react-router/esm/react-router.js"),r=n("./src/redux/selectors/index.js"),i=n("./node_modules/@babel/runtime/helpers/extends.js"),s=n.n(i),c=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),l=n.n(c),u=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),d=n.n(u),m=n("./node_modules/react/index.js"),p=n.n(m),f=n("./node_modules/prop-types/index.js"),g=n.n(f),h=n("./node_modules/classnames/index.js"),b=n.n(h),v=n("./src/lumin-components/ButtonLumin/index.js"),E=n("./src/lumin-components/ToolButtonPopper/index.js"),y=n("./src/core/index.js"),C=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),T=n.n(C),P=n("./node_modules/hotkeys-js/dist/hotkeys.esm.js"),w=n("./src/helpers/openFilePicker.js"),j=n("./src/helpers/copyText.js"),k=n("./src/helpers/setToolModeAndGroup.js"),O=n("./src/helpers/zoom.js"),_=n("./src/helpers/print.js"),A=n("./src/helpers/createTextAnnotationAndSelect.js"),x=n("./src/helpers/device.js"),S=n("./src/helpers/isFocusingElement.js"),D=n("./src/helpers/getNumberOfPagesToNavigate.js"),R=n("./src/helpers/setCurrentPage.js"),I=n("./src/redux/actions/index.js"),M=n("./src/constants/documentConstants.js"),N=n("./src/constants/customDataConstant.js"),L=function(){},B="ctrl+shift+=",U="command+shift+=",F="ctrl+shift+-",G="command+shift+-",H="ctrl+c",z="command+c",W="ctrl+v",V="command+v",q="ctrl+z",Y="command+z",Z="ctrl+y",K="command+shift+z",X="ctrl+o",J="command+o",Q="ctrl+f",$="command+f",ee="ctrl+=",te="command+=",ne="ctrl+-",oe="command+-",ae="ctrl+0",re="command+0",ie="ctrl+p",se="command+p",ce="pageup",le="pagedown",ue="up",de="down",me="space",pe="escape",fe="p",ge="a",he="c",be="e",ve="f",Ee="i",ye="l",Ce="n",Te="o",Pe="r",we="q",je="t",ke="s",Oe="g",_e="h",Ae="k",xe="u",Se={initialize:function(e){var t=this;P.a.filter=function(){return!0},this.store=e,this.keyHandlerMap=this.createKeyHandlerMap(e),this.prevToolName=null,Object.keys(this.keyHandlerMap).forEach((function(e){t.on(e,t.keyHandlerMap[e])}))},on:function(e,t){if(!!y.default.getToolModeMap()[e]&&(e=this.getHotkeyByToolName(e)),t||(t=this.keyHandlerMap[e]),e&&t){var n=t,o=n.keyup,a=void 0===o?L:o,r=n.keydown,i=void 0===r?t:r;Object(P.a)(e,{keyup:!0},(function(e){"keyup"===e.type&&a(e),"keydown"===e.type&&i(e)}))}},off:function(e,t){!!y.default.getToolModeMap()[e]&&!(e=this.getHotkeyByToolName(e))||P.a.unbind(e,t)},createKeyHandlerMap:function(e){var t,n=this,o=e.dispatch,a=e.getState;return t={},T()(t,"".concat(B,", ").concat(U),(function(e){e.preventDefault(),y.default.rotateClockwise()})),T()(t,"".concat(F,", ").concat(G),(function(e){e.preventDefault(),y.default.rotateCounterClockwise()})),T()(t,"".concat(H,", ").concat(z),(function(){y.default.getSelectedText()?(Object(j.a)(),o(I.a.closeElement("textPopup"))):y.default.getSelectedAnnotations().length&&y.default.updateCopiedAnnotations()})),T()(t,"".concat(W,", ").concat(V),(function(e){if(!Object(S.a)()){e.preventDefault();var t=y.default.getSelectedAnnotations().filter((function(e){return e.Subject===M.g.COMMENT&&e.getCustomData(N.b.HIGHLIGHT_TEXT)}));t.length>0&&(y.default.getAnnotationManager().deselectAnnotations(t),y.default.updateCopiedAnnotations()),y.default.pasteCopiedAnnotations()}})),T()(t,"".concat(q,", ").concat(Y),(function(e){e.preventDefault(),y.default.undo()})),T()(t,"".concat(Z,", ").concat(K),(function(e){e.preventDefault(),y.default.redo()})),T()(t,"".concat(X,", ").concat(J),(function(e){e.preventDefault(),Object(w.a)()})),T()(t,"".concat(Q,", ").concat($),(function(e){e.preventDefault(),o(I.a.openElement("searchOverlay"))})),T()(t,"".concat(ee,", ").concat(te),(function(e){e.preventDefault(),Object(O.a)()})),T()(t,"".concat(ne,", ").concat(oe),(function(e){e.preventDefault(),Object(O.b)()})),T()(t,"".concat(ae,", ").concat(re),(function(e){e.preventDefault(),x.m?y.default.fitToWidth():y.default.fitToPage()})),T()(t,"".concat(ie,", ").concat(se),(function(e){e.preventDefault(),Object(_.a)(o,r.a.isEmbedPrintSupported(a()))})),T()(t,"".concat(ce),(function(e){e.preventDefault(),Object(R.a)(y.default.getCurrentPage()-Object(D.a)())})),T()(t,"".concat(le),(function(e){e.preventDefault(),Object(R.a)(y.default.getCurrentPage()+Object(D.a)())})),T()(t,"".concat(ue),(function(){if(!Object(S.a)()&&!y.default.isContinuousDisplayMode()){var e=y.default.getScrollViewElement(),t=e.scrollHeight,n=e.clientHeight;0===e.scrollTop&&(Object(R.a)(y.default.getCurrentPage()-Object(D.a)()),e.scrollTop=t-n)}})),T()(t,"".concat(de),(function(){if(!Object(S.a)()&&!y.default.isContinuousDisplayMode()){var e=y.default.getScrollViewElement(),t=e.scrollTop,n=e.clientHeight,o=e.scrollHeight;Math.abs(t+n-o)<=1&&Object(R.a)(y.default.getCurrentPage()+Object(D.a)())}})),T()(t,"".concat(me),{keyup:this.createToolHotkeyHandler((function(t){t.preventDefault(),Object(k.a)(e,n.prevToolName),n.prevToolName=null})),keydown:this.createToolHotkeyHandler((function(t){t.preventDefault(),"Pan"!==y.default.getToolMode().name&&(n.prevToolName=y.default.getToolMode().name,Object(k.a)(e,"Pan"))}))}),T()(t,"".concat(pe),(function(t){t.preventDefault(),Object(k.a)(e,"AnnotationEdit",""),o(I.a.closeElements(["annotationPopup","textPopup","contextMenuPopup","toolStylePopup","annotationStylePopup","signatureModal","printModal","stampOverlay"]))})),T()(t,"".concat(fe),this.createToolHotkeyHandler((function(){Object(k.a)(e,"Pan")}))),T()(t,"".concat(ge),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationCreateArrow")}))),T()(t,"".concat(he),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationCreateCallout")}))),T()(t,"".concat(be),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationEraserTool")}))),T()(t,"".concat(ve),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationCreateFreeHand")}))),T()(t,"".concat(Ee),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationCreateStamp")}))),T()(t,"".concat(ye),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationCreateLine")}))),T()(t,"".concat(Ce),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationCreateSticky")}))),T()(t,"".concat(Te),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationCreateEllipse")}))),T()(t,"".concat(Pe),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationCreateRectangle")}))),T()(t,"".concat(we),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationCreateRubberStamp")}))),T()(t,"".concat(je),this.createToolHotkeyHandler((function(){Object(k.a)(e,"AnnotationCreateFreeText")}))),T()(t,"".concat(ke),this.createToolHotkeyHandler((function(){o(I.a.toggleElement("signatureOverlay"))}))),T()(t,"".concat(Oe),this.createToolHotkeyHandler((function(){y.default.getSelectedText()?Object(A.a)(o,window.Annotations.TextSquigglyAnnotation):Object(k.a)(e,"AnnotationCreateTextSquiggly")}))),T()(t,"".concat(_e),this.createToolHotkeyHandler((function(){y.default.getSelectedText()?Object(A.a)(o,window.Annotations.TextHighlightAnnotation):Object(k.a)(e,"AnnotationCreateTextHighlight")}))),T()(t,"".concat(Ae),this.createToolHotkeyHandler((function(){y.default.getSelectedText()?Object(A.a)(o,window.Annotations.TextStrikeoutAnnotation):Object(k.a)(e,"AnnotationCreateTextStrikeout")}))),T()(t,"".concat(xe),this.createToolHotkeyHandler((function(){y.default.getSelectedText()?Object(A.a)(o,window.Annotations.TextUnderlineAnnotation):Object(k.a)(e,"AnnotationCreateTextUnderline")}))),t},createToolHotkeyHandler:function(e){var t=this.store.getState;return function(){var n=r.a.getOpenElements(t()),o=y.default.getToolMode().name,a=o===window.Tools.ToolNames.SIGNATURE&&n.signatureModal;Object(S.a)()||a||e.apply(void 0,arguments)}},getHotkeyByToolName:function(e){return{AnnotationEdit:"escape",Pan:"p",AnnotationCreateArrow:"a",AnnotationCreateCallout:"c",AnnotationEraserTool:"e",AnnotationCreateFreeHand:"f",AnnotationCreateStamp:"i",AnnotationCreateLine:"l",AnnotationCreateSticky:"n",AnnotationCreateEllipse:"o",AnnotationCreateRectangle:"r",AnnotationCreateFreeText:"t",AnnotationCreateSignature:"s",AnnotationCreateTextSquiggly:"g",AnnotationCreateTextHighlight:"h",AnnotationCreateTextStrikeout:"k",AnnotationCreateTextUnderline:"u",AnnotationCreateRubberStamp:"q"}[e]}},De=Object.create(Se),Re=n("./src/helpers/toolStylesExist.js"),Ie=n("./src/constants/map.js"),Me=n("./src/constants/actionPriority.js"),Ne=n("./src/helpers/getToolPopper.js"),Le=n("./src/constants/lumin-common.js"),Be=n("./src/constants/toolsName.js"),Ue=n("./src/screens/Viewer/Context.js"),Fe={toolName:g.a.string.isRequired,group:g.a.string,currentDocument:g.a.object,match:g.a.object,title:g.a.string,additionalClass:g.a.string,arrow:g.a.bool,expires:g.a.object},Ge=function(e){var t,n,a=e.toolName,i=e.title,c=e.additionalClass,u=e.arrow,f=e.match,g=e.expires,h=d()(e,["toolName","title","additionalClass","arrow","match","expires"]),C=Object(o.f)((function(e){return[r.a.getActiveToolName(e)===a,r.a.getIconColor(e,Object(Ie.e)(a)),r.a.getToolButtonObject(e,a),r.a.getCustomElementOverrides(e,r.a.getToolButtonDataElement(e,a)),r.a.getCurrentUser(e),r.a.getCurrentDocument(e),r.a.getActiveToolStyles(e)]}),o.d),T=l()(C,7),P=T[0],w=T[1],j=T[2],k=T[3],O=T[4],_=T[5],A=T[6],x=Object(o.f)((function(e){return r.a.isElementOpen(e,"toolStylePopup")})),S=Object(o.f)(r.a.getThemeMode),D=Object(m.useState)(!1),R=l()(D,2),M=R[0],N=R[1],L=Object(m.useState)(!0),B=l()(L,2),U=B[0],F=B[1],G=Object(m.useContext)(Ue.a).isLoadingDocument,H=Object(o.e)(),z=j.group,W=void 0===z?"":z,V=j.icon,q=d()(j,["group","icon"]),Y="basic-highlight"===V;Object(m.useEffect)((function(){"undefined"!==typeof(null===k||void 0===k?void 0:k.disable)&&(k.disable?De.off(a):De.on(a))}),[k,a]),Object(m.useEffect)((function(){var e,t;if("5cf1b9ee7ba93440bd685ea2"!==(null===f||void 0===f||null===(e=f.params)||void 0===e?void 0:e.documentId)&&"tour"!==(null===f||void 0===f||null===(t=f.params)||void 0===t?void 0:t.documentId)||F(!1),!G&&_){var n=Object(Ne.a)({toolName:a,currentUser:O,currentDocument:_,expires:g}),o=!!n.message&&!!n.title;o&&q.dataElement&&H(I.a.disableElement(q.dataElement,Me.b)),F(o)}}),[G]);var Z=P?null===A||void 0===A||null===(t=A[w])||void 0===t||null===(n=t.toHexString)||void 0===n?void 0:n.call(t):"";return a===Be.a.REDACTION&&(Z=""),p.a.createElement(E.a,{openPopper:M,closePopper:function(){N(!1)},icon:V,color:Z,toolName:a},p.a.createElement(v.a,s()({type:"button",title:i,"aria-label":"tool",isActive:P,className:b()("".concat(c," ToolButton"),{"down-arrow":u,hasStyles:Object(Re.a)(a),disabled:U,"ToolButton--icon-white-bg":Y&&S===Le.N.LIGHT,"joyride-viewer-eraser":a===Be.a.ERASER,"joyride-viewer-comment":a===Be.a.STICKY}),color:Z,icon:V,onClick:function(){if(U)return N(!M),void H(I.a.closeElements(["toolsOverlay","searchOverlay","toolStylePopup","viewControlsOverlay"]));if(P){var e=[Be.a.FREETEXT,Be.a.SIGNATURE,Be.a.STICKY,Be.a.STAMP];[Be.a.HIGHTLIGHT,Be.a.REDACTION].includes(a)&&(y.default.setToolMode("AnnotationEdit"),x&&H(I.a.closeElement("toolStylePopup"))),e.includes(a)&&H(I.a.toggleElement("toolStylePopup"))}else y.default.setToolMode(a),H(I.a.setActiveToolGroup(W)),H(I.a.closeElement("toolStylePopup","searchOverlay","viewControlsOverlay")),a===Be.a.HIGHTLIGHT&&H(I.a.toggleElement("toolStylePopup"))}},h,q)))};Ge.propTypes=Fe,Ge.defaultProps={currentDocument:{},match:{},group:"",title:"",additionalClass:"",arrow:!1,expires:{}};var He=Object(a.l)(Ge);t.a=Object(o.c)((function(e){return{currentUser:r.a.getCurrentUser(e),currentDocument:r.a.getCurrentDocument(e),expires:r.a.getWillExpireFreeTrial(e)}}))(Object(a.l)(He))},"./src/lumin-components/ToolButtonPopper/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/react-router/esm/react-router.js"),r=n("./src/redux/selectors/index.js"),i=n("./node_modules/react/index.js"),s=n.n(i),c=n("./node_modules/react-router-dom/esm/react-router-dom.js"),l=n("./node_modules/prop-types/index.js"),u=n.n(l),d=n("./src/lumin-components/MaterialPopper/index.js"),m=n("./src/lumin-components/Icomoon/index.js"),p=n("./src/lumin-components/ButtonMaterial/index.js"),f=n("./src/constants/freeTrialExpire.js"),g=n("./src/helpers/getToolPopper.js"),h={openPopper:u.a.bool,closePopper:u.a.func,children:u.a.node,icon:u.a.string,color:u.a.string,toolName:u.a.string,currentUser:u.a.object,expires:u.a.object,currentDocument:u.a.object},b=function(e){var t,n=e.openPopper,o=e.children,a=e.closePopper,r=e.icon,i=e.color,l=e.currentUser,u=e.toolName,h=e.expires,b=e.currentDocument,v=s.a.useRef(null);return s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{ref:v},o),s.a.createElement(d.a,{open:n,anchorEl:v.current,handleClose:function(e){v.current.contains(e.target)||a()},negativeArrow:!0},s.a.createElement("div",{className:"Premium__popper ".concat((null===(t=h.FREE_TRIAL_30)||void 0===t?void 0:t.status)===f.b&&"free-trial")},b&&function(e,t,n){if(e){var o=Object(g.a)({toolName:u,currentUser:l,currentDocument:e,expires:h});if(o.message&&o.title)return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,{className:"".concat(t," icon__48"),color:n}),s.a.createElement("div",{className:"Premium__title"},o.title),s.a.createElement("div",{className:"Premium__message"},o.message),1===o.buttons.length&&s.a.createElement(p.a,{type:"button",className:"".concat(o.buttons[0].type," ButtonMaterial--link")},s.a.createElement(c.a,{to:o.buttons[0].url},o.buttons[0].label)),2===o.buttons.length&&s.a.createElement("div",{className:"Premium__btn-group"},s.a.createElement(p.a,{type:"button",className:"".concat(o.buttons[0].type," ButtonMaterial--link")},s.a.createElement(c.a,{to:o.buttons[0].url},o.buttons[0].label)),s.a.createElement(p.a,{type:"button",className:"".concat(o.buttons[1].type," ButtonMaterial--link")},s.a.createElement(c.a,{to:o.buttons[1].url},o.buttons[1].label))))}return null}(b,r,i))))};b.propTypes=h,b.defaultProps={openPopper:!1,closePopper:function(){},children:null,icon:"",color:"",toolName:"",currentUser:null,expires:{},currentDocument:{}};var v=b;t.a=Object(o.c)((function(e){return{currentUser:r.a.getCurrentUser(e),currentDocument:r.a.getCurrentDocument(e),expires:r.a.getWillExpireFreeTrial(e)}}))(Object(a.l)(v))},"./src/lumin-components/ToolGroupButton/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/react-router/esm/react-router.js"),r=n("./src/redux/actions/index.js"),i=n("./src/redux/selectors/index.js"),s=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(p),g=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(g),b=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(b),E=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),y=n.n(E),C=n("./node_modules/react/index.js"),T=n.n(C),P=n("./node_modules/prop-types/index.js"),w=n.n(P),j=n("./node_modules/lodash/get.js"),k=n.n(j),O=n("./src/lumin-components/ButtonLumin/index.js"),_=n("./src/core/index.js"),A=n("./src/helpers/getToolStyles.js"),x=n("./src/constants/map.js"),S=n("./src/lumin-components/ToolButtonPopper/index.js");function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return h()(this,n)}}var R=function(e){f()(n,e);var t=D(n);function n(e){var o;return c()(this,n),o=t.call(this,e),y()(m()(o),"onClick",(function(e){var t=o.props,n=t.setActiveToolGroup,a=t.isActive,r=t.closeElement,i=t.closeElements,s=t.toggleElement,c=t.openElement,l=t.toolGroup,u=t.allButtonsInGroupDisabled,d=t.currentUser,m=o.state.toolName;return e.stopPropagation(),"AnnotationCreateFreeHand"!==m||localStorage.getItem("token")||"tour"===o.props.match.params.documentId?u||"AnnotationCreateFreeHand"===m&&_.default.getTool(m).disabled?(o.tooglePopper(),void i(["toolsOverlay","searchOverlay","toolStylePopup","viewControlsOverlay"])):d||"AnnotationCreateTextUnderline"!==m&&"AnnotationCreateRectangle"!==m?(n(l),r("toolStylePopup"),void(a?s("toolsOverlay"):(c("toolsOverlay"),o.setToolMode(m)))):(o.tooglePopper(),void i(["toolsOverlay","searchOverlay","toolStylePopup","viewControlsOverlay"])):(o.tooglePopper(),void i(["toolsOverlay","searchOverlay","toolStylePopup","viewControlsOverlay"]))})),y()(m()(o),"setToolMode",(function(e){"miscTools"===o.props.toolGroup?_.default.setToolMode("AnnotationEdit"):_.default.setToolMode(e)})),y()(m()(o),"tooglePopper",(function(){o.setState((function(e){return{openPopper:!e.openPopper}}))})),y()(m()(o),"closePopper",(function(){o.setState({openPopper:!1})})),y()(m()(o),"getColor",(function(){var e=o.props,t=e.isActive,n=e.showColor,a=o.state.toolName,r=Object(x.b)(Object(x.e)(a)).iconColor,i="";if("always"===n||"active"===n&&t){var s,c,l=Object(A.a)(a);i=null===l||void 0===l||null===(s=l[r])||void 0===s||null===(c=s.toHexString)||void 0===c?void 0:c.call(s)}return i})),o.state={toolName:e.toolNames[0],openPopper:!1},o}return u()(n,[{key:"componentDidUpdate",value:function(e){var t=e.activeToolName!==this.props.activeToolName,n=e.toolNames.includes(e.activeToolName),o=this.props.toolNames.includes(this.props.activeToolName),a=e.toolNames.length!==this.props.toolNames.length;t&&o&&this.setState({toolName:this.props.activeToolName}),a&&!this.props.toolNames.includes(this.state.toolName)&&this.setState({toolName:this.props.toolNames[0]}),a&&!n&&o&&(this.setState({toolName:this.props.activeToolName}),this.props.setActiveToolGroup(this.props.toolGroup))}},{key:"render",value:function(){var e=this.props,t=e.mediaQueryClassName,n=e.dataElement,o=e.toolButtonObjects,a=e.title,r=e.isActive,i=e.additionalClass,s=e.activeToolName,c=e.isOpen,l=this.state,u=l.toolName,d=l.openPopper,m=this.props.img||k()(o,"[toolName].img"),p=this.props.icon||o[u].icon,f=["ToolGroupButton",!this.props.img?"down-arrow":"","AnnotationCreateFreeHand"===u&&_.default.getTool(u).disabled?"disabled":"",i,u===s&&c?"has-opened":""].join(" ").trim();return T.a.createElement(S.a,{openPopper:d,closePopper:this.closePopper,icon:p,color:this.getColor(),toolName:u},T.a.createElement(O.a,{"aria-label":"toolGroup",className:f,mediaQueryClassName:t,isActive:r,onClick:this.onClick,dataElement:n,icon:p,img:m,title:a,color:this.getColor()}))}}]),n}(T.a.PureComponent);R.propTypes={activeToolName:w.a.string.isRequired,toolGroup:w.a.string.isRequired,mediaQueryClassName:w.a.string.isRequired,dataElement:w.a.string.isRequired,img:w.a.string,icon:w.a.string,title:w.a.string,toolNames:w.a.arrayOf(w.a.string),toolButtonObjects:w.a.object,openElement:w.a.func.isRequired,toggleElement:w.a.func.isRequired,closeElement:w.a.func.isRequired,setActiveToolGroup:w.a.func.isRequired,isActive:w.a.bool.isRequired,showColor:w.a.string,additionalClass:w.a.any,isOpen:w.a.bool,closeElements:w.a.func,match:w.a.object.isRequired,allButtonsInGroupDisabled:w.a.bool,currentUser:w.a.object},R.defaultProps={img:"",title:"title",icon:"",toolNames:[],toolButtonObjects:{},showColor:"",additionalClass:"",isOpen:!1,closeElements:function(){},allButtonsInGroupDisabled:!1,currentUser:{}};var I=R,M={openElement:r.a.openElement,toggleElement:r.a.toggleElement,closeElement:r.a.closeElement,closeElements:r.a.closeElements,setActiveToolGroup:r.a.setActiveToolGroup,openModal:r.a.openModal};t.a=Object(o.c)((function(e,t){return{isActive:i.a.getActiveToolGroup(e)===t.toolGroup,activeToolName:i.a.getActiveToolName(e),toolNames:i.a.getToolNamesByGroup(e,t.toolGroup),toolButtonObjects:i.a.getToolButtonObjects(e),allButtonsInGroupDisabled:i.a.allButtonsInGroupDisabled(e,t.toolGroup),isOpen:i.a.isElementOpen(e,"toolsOverlay"),currentUser:i.a.getCurrentUser(e)}}),M)(Object(a.l)(I))},"./src/lumin-components/ViewerBanner/index.js":function(e,t,n){"use strict";var o=n("./node_modules/react-router/esm/react-router.js"),a=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),r=n.n(a),i=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(i),c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./node_modules/react-router-dom/esm/react-router-dom.js"),d=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/classnames/index.js"),p=n.n(m),f=n("./src/redux/selectors/index.js"),g=n("./src/redux/actions/index.js"),h=n("./src/lumin-components/ButtonLumin/index.js"),b=n("./src/constants/Routers.js"),v=n("./src/constants/UrlSearchParam.js"),E=n("./src/constants/freeTrialExpire.js"),y=n("./src/constants/documentConstants.js"),C=n("./node_modules/dayjs/dayjs.min.js"),T=n.n(C),P=n("./src/constants/paymentConstant.js"),w=function(){var e,t=Object(d.f)((function(e){return[f.a.isPageEditMode(e),f.a.isElementOpen(e,"leftPanel"),f.a.isElementOpen(e,"searchPanel"),f.a.isElementOpen(e,"searchOverlay"),f.a.getWillExpireFreeTrial(e),f.a.getIsShowBannerAds(e),f.a.getCurrentDocument(e)]}),d.d),n=s()(t,7),o=n[0],a=n[1],i=n[2],m=n[3],C=n[4],w=n[5],j=n[6],k=Object(d.f)((function(e){return f.a.isElementOpen(e,"rightPanel")})),O=Object(d.e)(),_=(j||{}).documentStatus,A=void 0===_?{}:_,x=A.accountableBy===y.a.ORGANIZATION,S=(null===C||void 0===C?void 0:C.FREE_TRIAL_30)||{},D=S.status,R=S.timeStamp,I=T()(R),M=T()(I).diff(T()(),"days"),N=p()({ViewerBanner:!0,"left-panel":a||o,"right-panel":(i||k)&&!o,"search-overlay":m}),L=(e={},r()(e,E.b,{title:"Unlock 5+ premium features for ".concat(P.d," days free"),btnData:{btnContent:"Upgrade free",btnDirectTo:b.c.PAYMENT_FREE_TRIAL}}),r()(e,E.d,{title:M>0?"You have ".concat(M," day(s) remaining on your trial."):"Your ".concat(P.d,"-day Free Trial will be expired within today!"),btnData:{btnContent:"Go Premium",btnDirectTo:b.c.INDIVIDUAL_MONTHLY_PAYMENT_URL}}),r()(e,"default",{manager:{title:"Unlock 5+ premium features for your organization",btnData:{btnContent:"Go Business",btnDirectTo:"".concat(b.c.ORG_ANNUAL_PAYMENT_URL,"?").concat(v.a.PAYMENT_ORG_TARGET,"=").concat(A.targetId)}},other:{title:"Discover 5+ premium features",btnData:{btnContent:"Go Premium",btnDirectTo:b.c.INDIVIDUAL_MONTHLY_PAYMENT_URL}}}),e),B=x?L.default[A.openedBy]:L[D]||L.default.other;return Object(c.useEffect)((function(){D&&O(x?g.a.setIsShowBannerAds(!A.isPremium):g.a.setIsShowBannerAds(D!==E.c))}),[D]),w?l.a.createElement("div",{className:N},l.a.createElement("div",{className:"ViewerBanner__wrapper ViewerBanner__wrapper--hidden"},l.a.createElement("div",{className:"ViewerBanner__content"},l.a.createElement("p",{className:"ViewerBanner__message"},B.title),l.a.createElement(u.a,{className:"ViewerBanner__btn",to:B.btnData.btnDirectTo},B.btnData.btnContent)),l.a.createElement("div",{className:"ViewerBanner__close"},l.a.createElement(h.a,{className:"ViewerBanner__close-btn",icon:"cancel",iconSize:16,onClick:function(){return O(g.a.setIsShowBannerAds(!1))}})))):null};t.a=Object(o.l)(w)},"./src/lumin-components/ZoomOverlay/index.js":function(e,t,n){"use strict";var o=n("./src/redux/actions/index.js"),a=n("./node_modules/react-redux/es/index.js"),r=n("./node_modules/react-i18next/dist/es/withTranslation.js"),i=n("./node_modules/react-onclickoutside/dist/react-onclickoutside.es.js"),s=n("./src/redux/selectors/index.js"),c=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),l=n.n(c),u=n("./node_modules/@babel/runtime/helpers/createClass.js"),d=n.n(u),m=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),p=n.n(m),f=n("./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(f),h=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),b=n.n(h),v=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),E=n.n(v),y=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),C=n.n(y),T=n("./node_modules/react/index.js"),P=n.n(T),w=n("./node_modules/prop-types/index.js"),j=n.n(w),k=n("./src/core/index.js"),O=n("./src/helpers/getOverlayPositionBasedOn.js"),_=n("./src/helpers/zoom.js");function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return b()(this,n)}}var x={onClick:j.a.func,buttonName:j.a.string},S=function(e){g()(n,e);var t=A(n);function n(){return l()(this,n),t.apply(this,arguments)}return d()(n,[{key:"render",value:function(){var e=this.props.buttonName;return P.a.createElement("div",{className:"OverlayItem",onClick:this.props.onClick},P.a.createElement("div",{className:"ButtonText"},e))}}]),n}(P.a.PureComponent);S.propTypes=x,S.defaultProps={onClick:function(){},buttonName:""};var D=S;n("./src/lumin-components/ToolButton/index.js");function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return b()(this,n)}}var I=function(e){g()(n,e);var t=R(n);function n(e){var o;return l()(this,n),o=t.call(this,e),C()(p()(o),"handleClickOutside",(function(e){var t=document.querySelector('[data-element="zoomOverlayButton"]');t&&t.contains(e.target)||o.props.closeElements("zoomOverlay")})),C()(p()(o),"handleWindowResize",(function(){var e=Object(O.a)("zoomOverlayButton",o.dropdown),t=e.left,n=e.right;o.setState({left:t-20,right:n})})),o.dropdown=P.a.createRef(),o.state={left:0,right:"auto"},o}return d()(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize)}},{key:"componentDidUpdate",value:function(e){if(!e.isOpen&&this.props.isOpen){this.props.closeElements(["viewControlsOverlay","toolsOverlay","menuOverlay","toolStylePopup"]);var t=Object(O.a)("zoomOverlayButton",this.dropdown),n=t.left,o=t.right;this.setState({left:n-20,right:o})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.isDisabled,o=e.t,a=(e.closeElements,e.zoomList),r=["ZoomOverlay",t?"open":"closed"].join(" ").trim(),i=this.state,s=i.left,c=i.right;return n?null:P.a.createElement("div",{className:r,"data-element":"zoomOverlay",style:{left:s,right:c},ref:this.dropdown},P.a.createElement(D,{onClick:k.default.fitToWidth,buttonName:o("action.fitToWidth")}),P.a.createElement(D,{onClick:k.default.fitToPage,buttonName:o("action.fitToPage")}),P.a.createElement("div",{className:"spacer"}),a.map((function(e,t){return P.a.createElement(D,{key:t,onClick:function(){return Object(_.c)(e)},buttonName:"".concat(100*e,"%")})})),P.a.createElement("div",{className:"spacer"}))}}]),n}(P.a.PureComponent);C()(I,"propTypes",{isDisabled:j.a.bool,isOpen:j.a.bool,closeElements:j.a.func.isRequired,t:j.a.func.isRequired,zoomList:j.a.arrayOf(j.a.number)});var M=I,N={closeElements:o.a.closeElements};t.a=Object(a.c)((function(e){return{isDisabled:s.a.isElementDisabled(e,"zoomOverlay"),isOpen:s.a.isElementOpen(e,"zoomOverlay"),zoomList:s.a.getZoomList(e)}}),N)(Object(r.a)()(Object(i.a)(M)))},"./src/screens/Viewer/Context.js":function(e,t,n){"use strict";var o=n("./node_modules/react/index.js"),a=n.n(o).a.createContext();t.a=a},"./src/screens/Viewer/ViewerHOC.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/extends.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),u=n.n(l),d=n("./node_modules/react/index.js"),m=n.n(d),p=n("./node_modules/lodash/isEmpty.js"),f=n.n(p),g=n("./node_modules/lodash/cloneDeep.js"),h=n.n(g),b=n("./src/lumin-components/Loading/index.js"),v=n("./src/core/index.js"),E=n("./src/redux/actions/index.js"),y=n("./src/helpers/logger.js"),C=n("./src/constants/lumin-common.js"),T=n("./src/constants/types.js"),P=n("./src/constants/defaultTool.js"),w=function(e){return"auto"===e||"wait"===e?v.default.CoreControls.getDefaultBackendType():Promise.resolve(e)},j=function(e){if(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}},k=n("./src/helpers/getHashParams.js"),O=n("./package.json"),_=function(){var e=v.default.CoreControls.DocumentViewer.prototype.version,t=v.default.CoreControls.DocumentViewer.prototype.build,n=O.version,o=!!Object(k.a)("pdftronServer",null),a=!!Object(k.a)("pdfnet",!0);if(!Object(k.a)("disableLogs",!1)&&e&&n){var r=e.split(".").map((function(e){return parseInt(e,10)})),i=u()(r,2),s=i[0],c=i[1],l=n.split(".").map((function(e){return parseInt(e,10)})),d=u()(l,2),m=d[0],p=d[1];if(console.table){var f={"UI version":n,"Core version":e,Build:t,"WebViewer Server":o,"Full API":a};console.table(f)}else console.log("[WebViewer] UI version: ".concat(n,", Core version: ").concat(e,", Build: ").concat(t,", WebViewer Server: ").concat(o,", Full API: ").concat(a));s<m?y.a.logError({message:"[WebViewer] Version Mismatch: UI requires Core version ".concat(n," and above."),reason:C.t.Service.PDFTRON}):c<p&&y.a.logInfo({message:"[WebViewer] Version Mismatch: UI requires Core version ".concat(n," and above."),reason:C.t.Service.PDFTRON})}},A=n("./src/helpers/loadScript.js"),x=n("./src/helpers/eventHandler.js"),S=n("./src/helpers/device.js"),D=function(){(S.k||S.c)&&(window.Tools.Tool.ENABLE_AUTO_SWITCH=!1)},R=n("./src/constants/actionPriority.js"),I=n("./src/constants/feature.js"),M=function(e){var t=e.dispatch,n=(0,e.getState)(),o=v.default.disableFeatures(e);if(n.advanced.defaultDisabledElements){var a=n.advanced.defaultDisabledElements.split(",");t(E.a.disableElements(a,R.b))}n.viewer.isReadOnly&&v.default.enableReadOnlyMode();!Object(k.a)("filepicker",!1)&&o([I.a.FilePicker]),Object(k.a)("hideAnnotationPanel",!1)&&o([I.a.NotesPanel]),!Object(k.a)("enableMeasurement",!1)&&o([I.a.Measurement]),!(Object(k.a)("enableRedaction",!1)||v.default.isCreateRedactionEnabled())&&o([I.a.Redaction]),!Object(k.a)("toolbar",!0)&&t(E.a.disableElement("header",R.a)),S.n?t(E.a.disableElement("marqueeToolButton",R.b)):t(E.a.disableElement("textSelectButton",R.b)),v.default.isFullPDFEnabled()||t(E.a.disableElements(["measurementSnappingOption"],R.b)),t(E.a.disableElements(["layersPanel","layersPanelButton","bookmarksPanel","bookmarksPanelButton"],R.a))},N=function(e){var t=v.default.getToolModeMap();t.AnnotationCreateTextHighlight2=new window.Tools.TextHighlightCreateTool(e,"AnnotationCreateTextHighlight2"),t.AnnotationCreateTextHighlight3=new window.Tools.TextHighlightCreateTool(e,"AnnotationCreateTextHighlight3"),t.AnnotationCreateTextHighlight4=new window.Tools.TextHighlightCreateTool(e,"AnnotationCreateTextHighlight4"),t.AnnotationCreateFreeHand2=new window.Tools.FreeHandCreateTool(e,"AnnotationCreateFreeHand2"),t.AnnotationCreateFreeHand3=new window.Tools.FreeHandCreateTool(e,"AnnotationCreateFreeHand3"),t.AnnotationCreateFreeHand4=new window.Tools.FreeHandCreateTool(e,"AnnotationCreateFreeHand4"),t.AnnotationCreateFreeText2=new window.Tools.FreeTextCreateTool(e,"AnnotationCreateFreeText2"),t.AnnotationCreateFreeText3=new window.Tools.FreeTextCreateTool(e,"AnnotationCreateFreeText3"),t.AnnotationCreateFreeText4=new window.Tools.FreeTextCreateTool(e,"AnnotationCreateFreeText4"),t.AnnotationCreateCallout2=new window.Tools.CalloutCreateTool(e,"AnnotationCreateCallout2"),t.AnnotationCreateCallout3=new window.Tools.CalloutCreateTool(e,"AnnotationCreateCallout3"),t.AnnotationCreateCallout4=new window.Tools.CalloutCreateTool(e,"AnnotationCreateCallout4"),t.AnnotationCreateSticky2=new window.Tools.StickyCreateTool(e,"AnnotationCreateSticky2"),t.AnnotationCreateSticky3=new window.Tools.StickyCreateTool(e,"AnnotationCreateSticky3"),t.AnnotationCreateSticky4=new window.Tools.StickyCreateTool(e,"AnnotationCreateSticky4"),t.AnnotationCreateTextUnderline2=new window.Tools.TextUnderlineCreateTool(e,"AnnotationCreateTextUnderline2"),t.AnnotationCreateTextUnderline3=new window.Tools.TextUnderlineCreateTool(e,"AnnotationCreateTextUnderline3"),t.AnnotationCreateTextUnderline4=new window.Tools.TextUnderlineCreateTool(e,"AnnotationCreateTextUnderline4"),t.AnnotationCreateTextStrikeout2=new window.Tools.TextStrikeoutCreateTool(e,"AnnotationCreateTextStrikeout2"),t.AnnotationCreateTextStrikeout3=new window.Tools.TextStrikeoutCreateTool(e,"AnnotationCreateTextStrikeout3"),t.AnnotationCreateTextStrikeout4=new window.Tools.TextStrikeoutCreateTool(e,"AnnotationCreateTextStrikeout4"),t.AnnotationCreateTextSquiggly2=new window.Tools.TextSquigglyCreateTool(e,"AnnotationCreateTextSquiggly2"),t.AnnotationCreateTextSquiggly3=new window.Tools.TextSquigglyCreateTool(e,"AnnotationCreateTextSquiggly3"),t.AnnotationCreateTextSquiggly4=new window.Tools.TextSquigglyCreateTool(e,"AnnotationCreateTextSquiggly4"),t.AnnotationCreateRectangle2=new window.Tools.RectangleCreateTool(e,"AnnotationCreateRectangle2"),t.AnnotationCreateRectangle3=new window.Tools.RectangleCreateTool(e,"AnnotationCreateRectangle3"),t.AnnotationCreateRectangle4=new window.Tools.RectangleCreateTool(e,"AnnotationCreateRectangle4"),t.AnnotationCreateEllipse2=new window.Tools.EllipseCreateTool(e,"AnnotationCreateEllipse2"),t.AnnotationCreateEllipse3=new window.Tools.EllipseCreateTool(e,"AnnotationCreateEllipse3"),t.AnnotationCreateEllipse4=new window.Tools.EllipseCreateTool(e,"AnnotationCreateEllipse4"),t.AnnotationCreatePolygon2=new window.Tools.PolygonCreateTool(e,"AnnotationCreatePolygon2"),t.AnnotationCreatePolygon3=new window.Tools.PolygonCreateTool(e,"AnnotationCreatePolygon3"),t.AnnotationCreatePolygon4=new window.Tools.PolygonCreateTool(e,"AnnotationCreatePolygon4"),t.AnnotationCreatePolygonCloud2=new window.Tools.PolygonCloudCreateTool(e,"AnnotationCreatePolygonCloud2"),t.AnnotationCreatePolygonCloud3=new window.Tools.PolygonCloudCreateTool(e,"AnnotationCreatePolygonCloud3"),t.AnnotationCreatePolygonCloud4=new window.Tools.PolygonCloudCreateTool(e,"AnnotationCreatePolygonCloud4"),t.AnnotationCreateLine2=new window.Tools.LineCreateTool(e,"AnnotationCreateLine2"),t.AnnotationCreateLine3=new window.Tools.LineCreateTool(e,"AnnotationCreateLine3"),t.AnnotationCreateLine4=new window.Tools.LineCreateTool(e,"AnnotationCreateLine4"),t.AnnotationCreatePolyline2=new window.Tools.PolylineCreateTool(e,"AnnotationCreatePolyline2"),t.AnnotationCreatePolyline3=new window.Tools.PolylineCreateTool(e,"AnnotationCreatePolyline3"),t.AnnotationCreatePolyline4=new window.Tools.PolylineCreateTool(e,"AnnotationCreatePolyline4"),t.AnnotationCreateArrow2=new window.Tools.ArrowCreateTool(e,"AnnotationCreateArrow2"),t.AnnotationCreateArrow3=new window.Tools.ArrowCreateTool(e,"AnnotationCreateArrow3"),t.AnnotationCreateArrow4=new window.Tools.ArrowCreateTool(e,"AnnotationCreateArrow4"),t.AnnotationCreateAreaMeasurement2=new window.Tools.AreaMeasurementCreateTool(e,"AnnotationCreateAreaMeasurement2"),t.AnnotationCreateAreaMeasurement3=new window.Tools.AreaMeasurementCreateTool(e,"AnnotationCreateAreaMeasurement3"),t.AnnotationCreateAreaMeasurement4=new window.Tools.AreaMeasurementCreateTool(e,"AnnotationCreateAreaMeasurement4"),t.AnnotationCreateRectangularAreaMeasurement2=new window.Tools.RectangularAreaMeasurementCreateTool(e,"AnnotationCreateRectangularAreaMeasurement2"),t.AnnotationCreateRectangularAreaMeasurement3=new window.Tools.RectangularAreaMeasurementCreateTool(e,"AnnotationCreateRectangularAreaMeasurement3"),t.AnnotationCreateRectangularAreaMeasurement4=new window.Tools.RectangularAreaMeasurementCreateTool(e,"AnnotationCreateRectangularAreaMeasurement4"),t.AnnotationCreatePolygon.enableCreationOverAnnotation(),t.AnnotationCreatePolygonCloud.enableCreationOverAnnotation(),t.AnnotationCreatePolyline.enableCreationOverAnnotation()},L=function(){var e=v.default.docViewer;e.DEFAULT_MARGIN=10,N(e)},B=n("./node_modules/@babel/runtime/helpers/typeof.js"),U=n.n(B),F={AnnotationCreateCountMeasurement:{StrokeColor:{R:228,G:66,B:52,A:1}},AnnotationCreateCountMeasurement2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateCountMeasurement3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateCountMeasurement4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateRectangularAreaMeasurement:{StrokeColor:{R:228,G:66,B:52,A:1}},AnnotationCreateRectangularAreaMeasurement2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateRectangularAreaMeasurement3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateRectangularAreaMeasurement4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateEllipseMeasurement:{StrokeColor:{R:228,G:66,B:52,A:1}},AnnotationCreateEllipseMeasurement2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateEllipseMeasurement3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateEllipseMeasurement4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateAreaMeasurement:{StrokeColor:{R:228,G:66,B:52,A:1}},AnnotationCreateAreaMeasurement2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateAreaMeasurement3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateAreaMeasurement4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreatePerimeterMeasurement:{StrokeColor:{R:228,G:66,B:52,A:1}},AnnotationCreatePerimeterMeasurement2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreatePerimeterMeasurement3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreatePerimeterMeasurement4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateDistanceMeasurement:{StrokeColor:{R:228,G:66,B:52,A:1}},AnnotationCreateDistanceMeasurement2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateDistanceMeasurement3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateDistanceMeasurement4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateArrow:{StrokeColor:{R:126,G:211,B:33,A:1}},AnnotationCreateArrow2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateArrow3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateArrow4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateLine:{StrokeColor:{R:74,G:144,B:226,A:1}},AnnotationCreateLine2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateLine3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateLine4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreatePolyline:{StrokeColor:{R:74,G:144,B:226,A:1}},AnnotationCreatePolyline2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreatePolyline3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreatePolyline4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreatePolygonCloud:{StrokeColor:{R:80,G:227,B:194,A:1}},AnnotationCreatePolygonCloud2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreatePolygonCloud3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreatePolygonCloud4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreatePolygon:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreatePolygon2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreatePolygon3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreatePolygon4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateRectangle:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateRectangle2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateRectangle3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateRectangle4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateEllipse:{StrokeColor:{R:255,G:230,B:162,A:1}},AnnotationCreateEllipse2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateEllipse3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateEllipse4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateFreeHand:{StrokeColor:{R:228,G:66,B:52,A:1}},AnnotationCreateFreeHand2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateFreeHand3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateFreeHand4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateFreeText:{TextColor:{R:0,G:0,B:0,A:1},FontSize:"12pt"},AnnotationCreateFreeText2:{TextColor:{R:0,G:0,B:0,A:1}},AnnotationCreateFreeText3:{TextColor:{R:78,G:125,B:233,A:1}},AnnotationCreateFreeText4:{TextColor:{R:0,G:122,B:59,A:1}},AnnotationCreateCallout:{StrokeColor:{R:228,G:66,B:52,A:1}},AnnotationCreateCallout2:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateCallout3:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateCallout4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateSticky:{StrokeColor:{R:80,G:227,B:194,A:1}},AnnotationCreateSticky2:{StrokeColor:{R:228,G:66,B:52,A:1}},AnnotationCreateSticky3:{StrokeColor:{R:255,G:141,B:0,A:1}},AnnotationCreateSticky4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateTextHighlight:{StrokeColor:{R:255,G:205,B:69,A:1}},AnnotationCreateTextHighlight2:{StrokeColor:{R:37,G:210,B:209,A:1}},AnnotationCreateTextHighlight3:{StrokeColor:{R:0,G:204,B:99,A:1}},AnnotationCreateTextHighlight4:{StrokeColor:{R:226,G:161,B:230,A:1}},AnnotationCreateTextUnderline:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateTextUnderline2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateTextUnderline3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateTextUnderline4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateTextSquiggly:{StrokeColor:{R:126,G:211,B:33,A:1}},AnnotationCreateTextSquiggly2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateTextSquiggly3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateTextSquiggly4:{StrokeColor:{R:0,G:122,B:59,A:1}},AnnotationCreateTextStrikeout:{StrokeColor:{R:79,G:194,B:246,A:1}},AnnotationCreateTextStrikeout2:{StrokeColor:{R:78,G:125,B:233,A:1}},AnnotationCreateTextStrikeout3:{StrokeColor:{R:0,G:0,B:0,A:1}},AnnotationCreateTextStrikeout4:{StrokeColor:{R:0,G:122,B:59,A:1}}},G=n("./src/helpers/localStorageManager.js"),H=function(e){return JSON.parse(e,(function(e,t){return t&&Object.entries(t).forEach((function(e){var n=u()(e,2),o=n[0],a=n[1];z(o)&&"object"===U()(a)&&(t[o]=new window.Annotations.Color(a.R,a.G,a.B,a.A))})),t}))},z=function(e){return["TextColor","StrokeColor","FillColor"].includes(e)},W=function(){var e=v.default.getToolModeMap();Object.keys(e).forEach((function(t){var n=null;try{n=localStorage.getItem("toolData-".concat(t))}catch(a){console.warn('Disabling "localStorage" because it could not be accessed.'),G.a.disableLocalStorage()}if(!n&&F[t]&&(n=JSON.stringify(F[t])),n){var o=e[t];n=H(n),o.setStyles(n)}}))},V=function(e){v.default.setCurrentUser(e.user.name),v.default.setIsAdminUser(e.user.isAdmin)},q=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),Y=n.n(q),Z=n("./node_modules/@babel/runtime/helpers/createClass.js"),K=n.n(Z),X=function(){function e(t,n,o){if(Y()(this,e),e.instance)return e.instance;e.instance=this,this.key=t,this.docViewer="nhuttm_rAjYAtQXz3mOmXwjHZpS"===t?n:{},this.CoreControls="nhuttm_rAjYAtQXz3mOmXwjHZpS"===t?o:{}}return K()(e,[{key:"DebugKey",get:function(){return this.key}},{key:"LuminDocViewer",get:function(){return this.docViewer}},{key:"LuminCoreControls",get:function(){return this.CoreControls}}]),e}(),J=n("./src/redux/store/index.js");t.a=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(t){var o=Object(d.useState)(!0),r=u()(o,2),s=r[0],l=r[1],p=J.a.getState(),g=!1;return Object(d.useEffect)((function(){if(window.CanvasRenderingContext2D&&(window.CoreControls||!f()(v.default.CoreControls))&&s){if(g)return;g=!0;var e=window.CoreControls||v.default.CoreControls,t=Promise.resolve();p.advanced.fullAPI&&(e.enableFullPDF(),t=Object(A.a)("../../core/pdf/PDFNet.js")),Object(k.a)("disableLogs",!1)&&e.disableLogs(!0),e.setWorkerPath("../../core"),e.setResourcesPath("../../core/assets");try{if(p.advanced.useSharedWorker&&window.parent.WebViewer){var n=window.parent.WebViewer.workerTransportPromise(window.frameElement);n.pdf||n.office?e.setWorkerTransportPromise(n):e.setWorkerTransportPromise({pdf:n})}}catch(r){"SecurityError"===r.name?y.a.logInfo({message:JSON.stringify(r),reason:C.t.Service.PDFTRON}):y.a.logInfo({message:"workerTransportPromise option cannot be used with CORS",reason:C.t.Service.PDFTRON})}var o=p.advanced.preloadWorker,a=function(){var t=T.a.PDF,n=T.a.OFFICE,a=T.a.ALL;o!==t&&o!==a||w(Object(k.a)("pdf","auto")).then((function(t){e.initPDFWorkerTransports(t,{workerLoadingProgress:function(e){J.a.dispatch(E.a.setWorkerLoadingProgress(e))}},"NITROLABS LIMITED(luminPDF.com):OEM:LuminPDF::B+:AMS(20220417):D0B51C530487480A7360B13AC982737860617F7ED708A57544D7C609FDB7F3F25629BEF5C7")})),o!==n&&o!==a||w(Object(k.a)("office","auto")).then((function(t){e.initOfficeWorkerTransports(t,{workerLoadingProgress:function(e){J.a.dispatch(E.a.setWorkerLoadingProgress(e))}},"NITROLABS LIMITED(luminPDF.com):OEM:LuminPDF::B+:AMS(20220417):D0B51C530487480A7360B13AC982737860617F7ED708A57544D7C609FDB7F3F25629BEF5C7")}))};j(p.advanced.customCSS),t.then((function(){return Object(A.a)(p.advanced.configScript,"Config script could not be loaded. The default configuration will be used.")})).then(c()(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o&&a(),Worker("/core/Worker.js"),n=new e.DocumentViewer,v.default.CoreControls=e,v.default.docViewer=n,v.default.enableRedaction(),window.lumin_core_debug=function(t){return new X(t,n,h()(e))},J.a.dispatch(E.a.setDocViewer(n)),J.a.dispatch(E.a.setCoreControls(e)),_(p.advanced),L(),V(p),D(),Object(x.a)(),M(J.a),W(),v.default.setToolMode(P.a),l(!1);case 18:case"end":return t.stop()}}),t)}))))}}),[]),s?m.a.createElement(b.a,{fullscreen:!0}):m.a.createElement(e,a()({},n,t))}}},"./src/screens/Viewer/bookmarks.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var o=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(s),l=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/regenerator/index.js"),m=n.n(d),p=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),f=n.n(p),g=n("./src/core/index.js"),h=n("./src/utils/index.js"),b=n("./src/graphql/DocumentGraph.js"),v=n("./src/constants/lumin-common.js"),E=n("./assets/images/bookmark-darkmode-active.png"),y=n.n(E),C=n("./assets/images/bookmark-darkmode-inactive.png"),T=n.n(C),P=n("./node_modules/uuid/v4.js"),w=n.n(P),j=n("./src/redux/selectors/index.js"),k=n("./src/redux/actions/index.js"),O=n("./node_modules/lodash/isEmpty.js"),_=n.n(O),A=n("./src/services/graphServices/documentGraphServices.js"),x=n("./src/apollo/index.js"),S=n("./src/redux/store/index.js");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=S.a.getState,M=S.a.dispatch,N=function(e,t,n,o){return new Promise(function(){var a=f()(m.a.mark((function a(r){var i,s;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,L(e,t,n);case 2:i=a.sent,s=new g.default.CoreControls.Bookmark(i,o,n,null,0,0),r(s);case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},L=function(e,t,n){return new Promise(function(){var o=f()(m.a.mark((function o(a){var r,i,s;return m.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.getPage(n);case 2:return r=o.sent,o.next=5,h.I.getAllSectionOfPage(e,r,n);case 5:i=o.sent,s=[],i.forEach((function(e){var t=[];e.children.forEach((function(e){var o=new g.default.CoreControls.Bookmark([],e.title,n,null,e.vertical,0);t.push(o)}));var o=new g.default.CoreControls.Bookmark(t,e.title,n,null,e.vertical,0);s.push(o)})),a(s);case 9:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}())},B=function(){function e(){var t=this;return i()(this,e),u()(this,"changeBookmark",(function(e,n){var o=document.getElementById("pageContainer".concat(e));if(o){var a=o.querySelector("#bookMark".concat(e));if(a){a.querySelector("#bookmark-image".concat(e)).src=n?y.a:T.a}else{var r=document.createElement("div"),i=document.createElement("div");a=document.createElement("img"),r.id="bookMark".concat(e),r.classList.add("bookmark-container"),r.onclick=function(n){n.stopPropagation(),t.toggleBookMark(e)},i.classList.add("bookmark-wrapper"),a.src=n?y.a:T.a,a.id="bookmark-image".concat(e),i.appendChild(a),r.appendChild(i),o.appendChild(r)}g.default.updateView()}})),e.instance?e.instance:(e.instance=this,this._bookmarks={},this._prevBookmarks=null,this._updatedBookmarks={},this._activeIndex=null,this._currentDocument=null,this._currentUser=null,this._undoBookmark={},this._subcriptionObserver=null,this)}return c()(e,[{key:"initialBookmarks",value:function(e,t){var n=this;(this._currentDocument=e,this._currentUser=t,t)&&(e.bookmarks?(JSON.parse(e.bookmarks).forEach((function(e){var o=e.bookmark;if(o[t.email]){var a=e.page,r={message:o[t.email],id:w()()};n._bookmarks[a]=r}})),this._subcriptionObserver=this.subcriptionUpdateBookmark(t._id,e._id)):this._subcriptionObserver=this.subcriptionUpdateBookmark(t._id,e._id))}},{key:"destructorBookmark",value:function(){this._subcriptionObserver&&this._subcriptionObserver.unsubscribe()}},{key:"removeBookmark",value:function(e){delete this._bookmarks[e]}},{key:"generateBookmarks",value:function(){var e=f()(m.a.mark((function e(){var t,n,o,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=g.default.getDocument(),e.next=4,n.getPDFDoc();case 4:return o=e.sent,Object.keys(this._bookmarks).forEach((function(e){t.push(N(n,o,parseInt(e),a._bookmarks[e].message))})),e.abrupt("return",Promise.all(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reGenerateBookmarks",value:function(){var e=f()(m.a.mark((function e(){var t,n,o,r=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a()(j.a.getBookmarks(I())),n=[],o={},Object.keys(this._bookmarks).forEach((function(e,a){var i=null,s=Object.keys(r._prevBookmarks).find((function(t){return r._prevBookmarks[t].id===r._bookmarks[e].id}));if(s){var c=t.find((function(e){return e.getPageNumber()===parseInt(s)})),l=r.reGenerateChildBookmarks(c,parseInt(e));i=new g.default.CoreControls.Bookmark(l,c.name,parseInt(e),null,0,0)}else if(!_()(r._updatedBookmarks)){var u=r._updatedBookmarks[r._bookmarks[e].id].message;i=new g.default.CoreControls.Bookmark([],u,parseInt(e),null,0,0),o[e]=a}n.push(i)})),M(k.a.setBookmarks(n)),this._prevBookmarks=null,this._updatedBookmarks={};case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reGenerateChildBookmarks",value:function(e,t){var n=this;return e.children.length?e.children.map((function(e){var o=n.reGenerateChildBookmarks(e,t);return new g.default.CoreControls.Bookmark(o,e.name,t,null,e.getVPos(),e.getHPos())})):[]}},{key:"deActiveBookmark",value:function(e){var t=a()(j.a.getBookmarks(I())),n=parseInt(e);if(this._bookmarks[n]){this.changeBookmark(n,!1),this.removeBookmark(n);var o=a()(t);t.find((function(e,t){return e.getPageNumber()===n&&(o.splice(t,1),!0)})),M(k.a.setBookmarks(o))}}},{key:"activeBookmark",value:function(){var e=f()(m.a.mark((function e(t,n){var o,r,i,s,c,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a()(j.a.getBookmarks(I())),r=parseInt(t),!this._bookmarks[r]){e.next=4;break}return e.abrupt("return");case 4:this.changeBookmark(r,!0),i=w()(),s={message:n,id:i},this._bookmarks=R(R({},this._bookmarks),{},u()({},r,s)),this._prevBookmarks?this._updatedBookmarks[i]={page:r,message:n}:(c=new g.default.CoreControls.Bookmark([],n,r,null,0,0),l=[].concat(a()(o),[c]),M(k.a.setBookmarks(l)));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUpBookmark",value:function(e){var t=this,n=document.getElementById("pageContainer".concat(e));if(!(n&&n.querySelector("#bookMark".concat(e)))){var o=document.createElement("div"),a=document.createElement("div"),r=document.createElement("img");o.id="bookMark".concat(e),o.classList.add("bookmark-container"),o.onclick=function(n){n.stopPropagation(),t.toggleBookMark(e)},a.classList.add("bookmark-wrapper"),r.src=this._bookmarks[e]?y.a:T.a,r.id="bookmark-image".concat(e),a.appendChild(r),o.appendChild(a),n.appendChild(o)}g.default.updateView()}},{key:"toggleBookMark",value:function(e){if(this._currentUser)if(this._bookmarks[e]){this.updateBookmark(parseInt(e),""),this.deActiveBookmark(e);var t={type:v.A.SUCCESS,message:"Page ".concat(e," unbookmarked"),top:130};M(k.a.openToast(t))}else this.activeIndex=e,M(k.a.openElement("bookmarkModal"))}},{key:"updatePositionOfBookmark",value:function(){var e=f()(m.a.mark((function e(t){var n,o,a,r,i,s,c,l,u,d,p,f,h,b,E,y,C,T,P,w,j,k,O=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g.default.getTotalPages(),o=t.type,a=t.option,r={},e.t0=o,e.next=e.t0===v.u.MOVE_PAGE?6:e.t0===v.u.REMOVE_PAGE?11:e.t0===v.u.INSERT_BLANK_PAGE?17:e.t0===v.u.MERGE_PAGE?22:27;break;case 6:for(i=a.pagesToMove,s=a.insertBeforePage,c=function(){var e=u[l],t=parseInt(e);O.changeBookmark(t,!1),i===t?t=s:s<=t&&i>t?t+=1:s>=t&&i<t&&(t-=1),r[t]=O._bookmarks[e],setTimeout((function(){O.changeBookmark(t,!0)}),200)},l=0,u=Object.keys(this._bookmarks);l<u.length;l++)c();return this._bookmarks=r,e.abrupt("break",28);case 11:for((d=a.pagesRemove[0])===n+1?(this.changeBookmark(n,!1),delete this._bookmarks[n+1]):(this.changeBookmark(d,!1),delete this._bookmarks[d]),p=function(){var e=h[f],t=parseInt(e);O.changeBookmark(t,!1),t>=d&&(t-=1),r[t]=O._bookmarks[e],setTimeout((function(){O.changeBookmark(t,!0)}),200)},f=0,h=Object.keys(this._bookmarks);f<h.length;f++)p();return this._bookmarks=r,e.abrupt("break",28);case 17:for(b=a.insertPages[0],E=function(){var e=C[y],t=parseInt(e);O.changeBookmark(t,!1),b<=t&&(t+=1),r[t]=O._bookmarks[e],setTimeout((function(){O.changeBookmark(t,!0)}),200)},y=0,C=Object.keys(this._bookmarks);y<C.length;y++)E();return this._bookmarks=r,e.abrupt("break",28);case 22:for(T=a.numberOfPageToMerge,P=a.positionToMerge,w=function(){var e=k[j],t=parseInt(e);O.changeBookmark(t,!1),P<=t&&(t+=T),r[t]=O._bookmarks[e],setTimeout((function(){O.changeBookmark(t,!0)}),200)},j=0,k=Object.keys(this._bookmarks);j<k.length;j++)w();return this._bookmarks=r,e.abrupt("break",28);case 27:return e.abrupt("break",28);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"revertBookmark",value:function(){var e=f()(m.a.mark((function e(t){var n,o,a,r,i=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n={},o=function(){var e=r[a],o=parseInt(e);i.changeBookmark(o,!1),t<=o&&(o+=1),n[e]=i._bookmarks[e],setTimeout((function(){i.changeBookmark(o,!0)}),200)},a=0,r=Object.keys(this._bookmarks);a<r.length;a++)o();this._undoBookmark&&this._undoBookmark[t]&&(n[t]=this._undoBookmark[t],setTimeout((function(){i.changeBookmark(t,!0)}),200)),this._bookmarks=n,this._undoBookmark={};case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateBookmark",value:function(e,t){x.a.mutate({mutation:b.E,variables:{input:{documentId:this._currentDocument._id,page:parseInt(e),message:t}}})}},{key:"subcriptionUpdateBookmark",value:function(e,t){var n=this;return A.a.subUpdateBookmark({userId:e,documentId:t,callback:function(e){var t=e.message,o=e.page;t?n.activeBookmark(o,t):n.deActiveBookmark(o,t)}})}},{key:"bookmarksUser",get:function(){return this._bookmarks},set:function(e){this._bookmarks=e}},{key:"activeIndex",get:function(){return this._activeIndex},set:function(e){this._activeIndex=e}},{key:"undoBookmark",get:function(){return this._undoBookmark},set:function(e){this._bookmarks[e]&&(this._undoBookmark[e]=this._bookmarks[e])}},{key:"prevBookmarks",get:function(){return this._prevBookmarks},set:function(e){this._prevBookmarks=e}}]),e}()},"./src/screens/Viewer/index.js":function(e,t,n){"use strict";n.r(t);var o=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/recompose/dist/Recompose.esm.js"),r=n("./node_modules/react-router/esm/react-router.js"),i=n("./src/redux/selectors/index.js"),s=n("./src/redux/actions/index.js"),c=n("./node_modules/@babel/runtime/helpers/extends.js"),l=n.n(c),u=n("./node_modules/react/index.js"),d=n.n(u),m=n("./src/services/graphServices/organization.js"),p=n("./src/services/index.js"),f=function(e){var t=function(t){var n=l()({},t),o=Object(u.useRef)(null);Object(u.useEffect)((function(){return function(){try{o.current&&(o.current.unsubscribe(),o.current=null)}catch(e){p.g.error({errorMessage:JSON.stringify(e),type:"Organization document error"})}}}),[]);return d.a.createElement(e,l()({subcribeUpdateOrganization:function(e,t){o.current=m.updateOrganization({orgId:e,callback:function(e){var n=e.organization,o=e.type;t[o]&&t[o].exec(n)}})}},n))};return t.defaultProps={},t},g=n("./src/services/graphServices/documentGraphServices.js"),h=function(e){var t=function(t){var n=l()({},t),o=Object(u.useRef)(null);Object(u.useEffect)((function(){return function(){try{o.current&&(o.current.unsubscribe(),o.current=null)}catch(e){p.g.error({errorMessage:JSON.stringify(e),type:"Organization document error"})}}}),[]);return d.a.createElement(e,l()({},n,{subcriptDeleteMultipleDocument:function(e,t){o.current=g.a.subcriptDeleteMultipleDocument({clientId:e,callback:t})}}))};return t.defaultProps={},t},b=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(b),E=n("./node_modules/@babel/runtime/regenerator/index.js"),y=n.n(E),C=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),T=n.n(C),P=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),w=n.n(P),j=n("./node_modules/prop-types/index.js"),k=n.n(j),O=n("./src/lumin-components/Loading/index.js"),_=n("./node_modules/react-router-dom/esm/react-router-dom.js"),A=n("./node_modules/@material-ui/core/esm/styles/makeStyles.js"),x=n("./src/lumin-components/Dialog/index.js"),S=n("./src/lumin-components/SvgElement/index.js"),D=n("./src/lumin-components/ButtonMaterial/index.js"),R=n("./src/utils/validateInvitationToken.js"),I=Object(A.a)({dialogPaper:{backgroundColor:"#fff",textAlign:"center",padding:24,maxWidth:364,boxSizing:"border-box"}}),M=function(e){var t=e.history,n=e.location,o=e.documentName,a=e.open,r=I(),i="/authentication/signup",s=Object(R.a)(n.search),c=s.token,l=s.action;c&&l&&(i="".concat(i,"?token=").concat(c,"&action=").concat(l));return d.a.createElement(x.a,{open:a,maxWidth:"xs",classes:{paper:r.dialogPaper}},d.a.createElement(S.a,{content:"request-sign-up",maxWidth:180,className:"RequestSignUp__Icon"}),d.a.createElement("h2",{className:"RequestSignUp__Title"},"Sign up for access"),d.a.createElement("div",{className:"RequestSignUp__Text"},d.a.createElement(_.a,{className:"RequestSignUp__Link",to:i},"Sign up"),"\xa0for a free Lumin PDF account to access ",d.a.createElement("span",{className:"RequestSignUp__Filename"},o)," and begin editing."),d.a.createElement("div",{className:"RequestSignUp__ButtonWrapper"},d.a.createElement(D.a,{onClick:function(){t.push(i)},className:"RequestSignUp__Button primary"},"Sign Up Now")))};M.propTypes={history:k.a.object.isRequired,location:k.a.object.isRequired,open:k.a.bool,documentName:k.a.string},M.defaultProps={open:!1,documentName:""};var N=M,L=Object(r.l)(N),B=n("./src/hooks/index.js"),U=n("./src/constants/lumin-common.js"),F=n("./src/utils/file.js"),G=n("./src/utils/toastUtils.js"),H=n("./src/constants/organizationConstants.js"),z=n("./src/constants/documentConstants.js"),W=n("./src/constants/timeTracking.js"),V=n("./src/constants/socketConstant.js"),q=n("./src/socket/index.js"),Y=n("./src/screens/Viewer/time-tracking.js"),Z=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),K=n.n(Z),X=n("./node_modules/@babel/runtime/helpers/createClass.js"),J=n.n(X),Q=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),$=n.n(Q),ee=n("./node_modules/@babel/runtime/helpers/inherits.js"),te=n.n(ee),ne=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),oe=n.n(ne),ae=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),re=n.n(ae),ie=n("./node_modules/uuid/v4.js"),se=n.n(ie),ce=n("./node_modules/@apollo/react-hoc/lib/react-hoc.esm.js"),le=(n("./src/constants/defaultTool.js"),n("./node_modules/react-idle-timer/dist/index.es.js")),ue=n("./src/lumin-components/Header/index.js"),de=n("./src/lumin-components/PageNavOverlay/index.js"),me=n("./node_modules/classnames/index.js"),pe=n.n(me),fe=n("./node_modules/lodash/throttle.js"),ge=n.n(fe),he=n("./node_modules/lodash/debounce.js"),be=n.n(he),ve=n("./src/core/index.js"),Ee=n("./src/lumin-components/TimeLimit/index.js"),ye=n("./src/helpers/device.js"),Ce=n("./src/helpers/documentContainerHelper.js"),Te=n("./src/helpers/loadDocument.js"),Pe=n("./src/helpers/getNumberOfPagesToNavigate.js"),we=n("./src/helpers/TouchEventManager.js"),je=n("./src/helpers/getHashParams.js"),ke=n("./src/helpers/setCurrentPage.js"),Oe=n("./src/constants/zoomFactors.js"),_e=n("./src/constants/commentState.js"),Ae=n("./src/screens/Viewer/Context.js");n("./src/lumin-components/DocumentContainer/DocumentContainer.scss");function xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re()(e);if(t){var a=re()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe()(this,n)}}var Se=Ae.a,De={isLeftPanelOpen:k.a.bool,isRightPanelOpen:k.a.bool,isCommentPanelOpen:k.a.bool,isSearchPanelOpen:k.a.bool,isSearchOverlayOpen:k.a.bool,zoom:k.a.number.isRequired,currentPage:k.a.number,totalPages:k.a.number,isHeaderOpen:k.a.bool,dispatch:k.a.func.isRequired,closeElements:k.a.func.isRequired,isPageEditMode:k.a.bool,pageEditDisplayMode:k.a.string,isShowTopBar:k.a.bool,isShowBannerAds:k.a.bool,isLoadingDocument:k.a.bool,currentDocument:k.a.object,currentUser:k.a.object,allowPageNavigation:k.a.bool,themeMode:k.a.string,displayMode:k.a.string},Re=function(e){te()(n,e);var t=xe(n);function n(e){var o;return K()(this,n),o=t.call(this,e),v()($()(o),"documentResizeObserverHandler",(function(e){e.forEach((function(e){e.contentBoxSize&&o.updateScrollViewDebounced()}))})),v()($()(o),"loadInitialDocument",(function(){var e=Object(je.a)("auto_load",!0),t=Object(je.a)("d",""),n=Object(je.a)("startOffline",!1);if(t&&e||n){var a={extension:Object(je.a)("extension",null),filename:Object(je.a)("filename",null),externalPath:Object(je.a)("p",""),documentId:Object(je.a)("did",null)};Object(Te.a)(o.props.dispatch,t,a)}})),v()($()(o),"handleWindowResize",(function(){o.props.isCommentPanelOpen&&o.setPushViewLeft()})),v()($()(o),"onWheel",(function(e){e.metaKey||e.ctrlKey?(e.preventDefault(),o.wheelToZoom(e)):!ve.default.isContinuousDisplayMode()&&o.props.allowPageNavigation&&o.wheelToNavigatePages(e)})),v()($()(o),"wheelToNavigatePages",(function(e){var t=o.props,n=t.currentPage,a=t.totalPages,r=o.container.current,i=r.scrollTop,s=r.scrollHeight,c=r.clientHeight,l=0===i,u=Math.abs(i+c-s)<=1,d=e.deltaY<0&&Math.abs(e.deltaY)>Math.abs(e.deltaX),m=e.deltaY>0&&Math.abs(e.deltaY)>Math.abs(e.deltaX);d&&l&&n>1?o.pageUp():m&&u&&n<a&&o.pageDown()})),v()($()(o),"pageUp",(function(){var e=o.props.currentPage,t=o.container.current,n=t.scrollHeight,a=t.clientHeight;Object(ke.a)(e-Object(Pe.a)()),o.container.current.scrollTop=n-a})),v()($()(o),"pageDown",(function(){var e=o.props.currentPage;Object(ke.a)(e+Object(Pe.a)())})),v()($()(o),"wheelToZoom",(function(e){var t,n=o.props.zoom,a=n;Object(Oe.c)(3),Object(Oe.d)(.5),e.deltaY<0?(t=1.25,a=Math.min(n*t,Object(Oe.a)())):e.deltaY>0&&(t=.8,a=Math.max(n*t,Object(Oe.b)())),ve.default.zoomToMouse(a)})),v()($()(o),"onTransitionEnd",(function(){ve.default.scrollViewUpdated()})),v()($()(o),"handleScroll",(function(){var e=o.container.current.scrollTop;o.props.closeElements(["annotationPopup","textPopup"]);var t=document.getElementById("panel-scroll");t&&!t.classList.contains("allow-self-scroll")&&(t.scrollTop=e)})),v()($()(o),"onAnnotationChanged",(function(e){e.some((function(e){return e instanceof window.Annotations.StickyAnnotation}))&&o.setPushViewLeft()})),v()($()(o),"setPushViewLeft",(function(){if(ve.default.getAnnotationsList().filter((function(e){return e.Subject===z.g.COMMENT&&!e.isReply()&&e.getState()!==_e.a.Resolved.state})).length>0){var e,t=null===(e=document.getElementById("pageSection1"))||void 0===e?void 0:e.offsetWidth,n=(window.innerWidth-t)/2-10;o.setState({pushViewerLeft:n<=300})}else o.setState({pushViewerLeft:!1})})),v()($()(o),"getClassName",(function(){var e=o.props,t=e.isLeftPanelOpen,n=e.isRightPanelOpen,a=e.isCommentPanelOpen,r=e.isSearchPanelOpen,i=e.isHeaderOpen,s=e.isSearchOverlayOpen,c=e.isPageEditMode,l=e.pageEditDisplayMode,u=e.isShowTopBar,d=e.isShowBannerAds,m=e.displayMode,p=o.state.pushViewerLeft,f="Grid"===l,g="Continuous"===m,h=a&&!t&&p&&g;return pe()({DocumentContainer:!0,"DocumentContainer--no-topbar":!u,"DocumentContainer--no-banner":!d,"left-panel":t||c,"right-panel":(n||h||r||p&&!t&&g)&&!c,"no-header":!i,"search-overlay":s,"grid-view-open":f&&c})})),v()($()(o),"renderDocumentSekeleton",(function(){return d.a.createElement("div",{className:"DocumentContainer__skeleton-container"},d.a.createElement("div",{className:"DocumentContainer__skeleton"}))})),o.state={pushViewerLeft:!1},o.document=d.a.createRef(),o.container=d.a.createRef(),o.wheelToNavigatePages=ge()(o.wheelToNavigatePages.bind($()(o)),300,{trailing:!1}),o.wheelToZoom=ge()(o.wheelToZoom.bind($()(o)),30,{trailing:!1}),o.handleWindowResize=be()(o.handleWindowResize.bind($()(o)),500),o.documentResizeObserver=null,o.updateScrollViewDebounced=be()((function(){return ve.default.scrollViewUpdated()}),500),o}return J()(n,[{key:"componentDidMount",value:function(){we.a.initialize(this.document.current,this.container.current),ve.default.setScrollViewElement(this.container.current),ve.default.setViewerElement(this.document.current),this.loadInitialDocument(),window.addEventListener("resize",this.handleWindowResize),this.documentResizeObserver=new ResizeObserver(this.documentResizeObserverHandler),this.documentResizeObserver.observe(this.container.current),ve.default.addEventListener("annotationChanged",this.onAnnotationChanged),this.container.current.addEventListener("wheel",this.onWheel,{passive:!1})}},{key:"componentDidUpdate",value:function(e){this.props.zoom===e.zoom&&this.props.displayMode===e.displayMode||this.setPushViewLeft(),this.props.isPageEditMode!==e.isPageEditMode&&ve.default.scrollViewUpdated(),ye.h&&Object(Ce.c)(e,this.props,this.container.current)}},{key:"componentWillUnmount",value:function(){we.a.terminate(),window.removeEventListener("resize",this.handleWindowResize),ve.default.removeEventListener("annotationChanged",this.onAnnotationChanged),this.documentResizeObserver&&this.documentResizeObserver.unobserve(this.container.current)}},{key:"render",value:function(){var e,t=this.props,n=t.pageEditDisplayMode,o=t.isLoadingDocument,a=t.isPageEditMode,r=t.currentDocument,i=t.currentUser,s=t.themeMode,c=this.context.isDocumentHasLimitedTime;e=ye.h?Object(Ce.a)(this.props):this.getClassName();var l="Grid"===n,u=pe()({hidden:l&&a,loading:o,"page-edit-mode":a});return c?d.a.createElement("div",{className:"DocumentContainer",ref:this.container},d.a.createElement(Ee.a,{isShowButton:i&&r.ownerId===i._id,createdTime:r.createdAt,name:r.name,themeMode:s})):d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"".concat(e," ").concat(u),id:"DocumentContainer",ref:this.container,"data-element":"documentContainer",onWheel:this.onWheel,onScroll:this.handleScroll,onTransitionEnd:this.onTransitionEnd},o&&this.renderDocumentSekeleton(),d.a.createElement("div",{className:"document",id:"document-scroll",ref:this.document,tabIndex:"-1"})))}}]),n}(d.a.PureComponent);Re.contextType=Se,Re.propTypes=De,Re.defaultProps={isLeftPanelOpen:!1,isRightPanelOpen:!1,isCommentPanelOpen:!1,isSearchPanelOpen:!1,isSearchOverlayOpen:!1,currentPage:0,totalPages:0,isHeaderOpen:!0,isPageEditMode:!1,pageEditDisplayMode:"Single",isShowTopBar:!0,isShowBannerAds:!1,isLoadingDocument:!1,currentDocument:{},currentUser:{},allowPageNavigation:!0,themeMode:"light",displayMode:""};var Ie=Re,Me=Object(o.c)((function(e){return{isLeftPanelOpen:i.a.isElementOpen(e,"leftPanel"),isRightPanelOpen:i.a.isElementOpen(e,"rightPanel"),isCommentPanelOpen:i.a.isElementOpen(e,"rightPanelComment"),isSearchPanelOpen:i.a.isElementOpen(e,"searchPanel"),isSearchOverlayOpen:i.a.isElementOpen(e,"searchOverlay"),zoom:i.a.getZoom(e),currentPage:i.a.getCurrentPage(e),isHeaderOpen:i.a.isElementOpen(e,"header")&&!i.a.isElementDisabled(e,"header"),displayMode:i.a.getDisplayMode(e),totalPages:i.a.getTotalPages(e),isPageEditMode:i.a.isPageEditMode(e),pageEditDisplayMode:i.a.pageEditDisplayMode(e),activeToolGroup:i.a.getActiveToolGroup(e),leftPanelWidth:i.a.getLeftPanelWidth(e),isShowTopBar:i.a.getIsShowTopBar(e),isShowBannerAds:i.a.getIsShowBannerAds(e),allowPageNavigation:i.a.getAllowPageNavigation(e),currentUser:i.a.getCurrentUser(e),themeMode:i.a.getThemeMode(e)}}),(function(e){return{dispatch:e,openElement:function(t){return e(s.a.openElement(t))},closeElements:function(t){return e(s.a.closeElements(t))}}}))(Ie),Ne=n("./node_modules/@material-ui/core/esm/AccordionDetails/AccordionDetails.js"),Le=n("./node_modules/@material-ui/core/esm/AccordionSummary/AccordionSummary.js"),Be=n("./node_modules/@material-ui/core/esm/Accordion/Accordion.js"),Ue=n("./node_modules/@material-ui/styles/esm/withStyles/withStyles.js"),Fe=n("./node_modules/@material-ui/icons/ExpandMore.js"),Ge=n.n(Fe),He=Object(Ue.a)({root:{"&$expanded":{marginBottom:0,marginTop:0},"&:last-child":{borderRadius:0},"&:first-child":{borderRadius:0}},expanded:{}})(Be.a),ze=Object(Ue.a)({root:{"&$expanded":{minHeight:48}},content:{"&$expanded":{margin:0}},expanded:{}})(Le.a);var We=function(e){var t=e.title,n=e.component,o=e.id;return d.a.createElement(He,{elevation:2,className:"TabEditMode"},d.a.createElement(ze,{className:"TabEditMode__Title",expandIcon:d.a.createElement(Ge.a,{className:"TabEditMode__arrow"}),"aria-controls":"panel1a-content",id:o},d.a.createElement("p",null,t)),d.a.createElement(Ne.a,{className:"TabEditMode_Details"},n))},Ve=n("./src/services/documentServices.js"),qe=n("./src/lumin-components/Tooltip/index.js"),Ye=n("./src/lumin-components/MaterialPopper/index.js"),Ze=n("./src/lumin-components/Icomoon/index.js"),Ke=n("./src/constants/freeTrialExpire.js"),Xe=n("./src/constants/Routers.js"),Je=n("./src/constants/UrlSearchParam.js");function Qe(e){var t,n=e.icon,o=e.type,a=e.expires,r=e.history,i=(e.currentDocument||{}).documentStatus,s=void 0===i?{}:i,c=s.accountableBy===z.a.ORGANIZATION,l=(null===(t=a.FREE_TRIAL_30)||void 0===t?void 0:t.status)===Ke.b;switch(o){case U.n.LIMIT_FEATURE:return d.a.createElement("div",{className:"PopperLimit__popper"},n&&d.a.createElement(Ze.a,{className:n,size:48}),d.a.createElement("h5",{className:"PopperLimit__title"},"Feature Limited"),d.a.createElement("h6",{className:"PopperLimit__message"},"This feature is not available on Document tour"),d.a.createElement(D.a,{className:"primary ButtonMaterial--link"},d.a.createElement("a",{href:"/documents",target:"_blank"},"Try\xa0this\xa0feature")));case U.n.SIGNIN_REQUIRED:return d.a.createElement("div",{className:"PopperLimit__popper"},n&&d.a.createElement(Ze.a,{className:n,size:48}),d.a.createElement("h5",{className:"PopperLimit__title"},"Sign in required"),d.a.createElement("h6",{className:"PopperLimit__message"},"Sign in to unlock this feature"),d.a.createElement(D.a,{className:"primary ButtonMaterial--link"},d.a.createElement("a",{href:"/authentication/signin",target:"_blank"},"Sign In Now")));case U.n.PERMISSION_REQUIRED:return d.a.createElement("div",{className:"PopperLimit__popper"},n&&d.a.createElement(Ze.a,{className:n,size:48}),d.a.createElement("h5",{className:"PopperLimit__title"},"Permission required"),d.a.createElement("h6",{className:"PopperLimit__message"},"Only user with Edit permission can use this feature"));case U.n.PREMIUM_FEATURE:return c?d.a.createElement("div",{className:"PopperLimit__popper"},n&&d.a.createElement(Ze.a,{className:n,size:48}),d.a.createElement("h5",{className:"PopperLimit__title"},"Premium feature"),d.a.createElement("h6",{className:"PopperLimit__message"},"This is a premium feature. Unlock now for your organization to enjoy!"),d.a.createElement(D.a,{className:"danger ButtonMaterial--link"},d.a.createElement(_.a,{to:"".concat(Xe.c.ORG_ANNUAL_PAYMENT_URL,"?").concat(Je.a.PAYMENT_ORG_TARGET,"=").concat(s.targetId)},"Go Business"))):d.a.createElement("div",{className:"PopperLimit__popper ".concat(l?"free-trial":"")},n&&d.a.createElement(Ze.a,{className:n,size:48}),d.a.createElement("h5",{className:"PopperLimit__title"},"Premium feature"),d.a.createElement("h6",{className:"PopperLimit__message"},"Upgrade to premium to unlock this feature"),l?d.a.createElement("div",{className:"PopperLimit__btn-group"},d.a.createElement(D.a,{className:"primary ButtonMaterial--link"},d.a.createElement(_.a,{to:"/plans"},"Go Premium")),d.a.createElement(D.a,{className:"danger ButtonMaterial--link",onClick:function(){return r.push("/payment/free-trial")}},"Start free trial")):d.a.createElement(D.a,{className:"danger ButtonMaterial--link"},d.a.createElement(_.a,{to:"/plans"},"Go Premium")));default:return null}}Qe.propTypes={icon:k.a.string,type:k.a.string,expires:k.a.object,history:k.a.object,currentDocument:k.a.object},Qe.defaultProps={icon:"",type:"",expires:{},history:{},currentDocument:{}};var $e=Qe,et=Object(a.a)(Object(o.c)((function(e){return{expires:i.a.getWillExpireFreeTrial(e)}})),r.l)($e),tt=n("./src/utils/index.js");function nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re()(e);if(t){var a=re()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe()(this,n)}}var ot={children:k.a.node.isRequired,onClick:k.a.func,currentUser:k.a.object,currentDocument:k.a.object,icon:k.a.string,match:k.a.object.isRequired,disabled:k.a.bool,themeMode:k.a.string.isRequired},at=function(e){te()(n,e);var t=nt(n);function n(e){var o;return K()(this,n),o=t.call(this,e),v()($()(o),"isDocumentTour",(function(){var e=o.props.match;return"tour"===e.params.documentId||"5cf1b9ee7ba93440bd685ea2"===e.params.documentId})),v()($()(o),"renderPopperContent",(function(){var e=o.props,t=e.icon,n=e.currentUser,a=e.currentDocument,r=tt.M.validateFeature({currentUser:n,currentDocument:a,isDocumentTour:o.isDocumentTour()});return d.a.createElement(et,{icon:t,type:r,currentDocument:a})})),v()($()(o),"handleClick",(function(){var e=o.props,t=e.currentUser,n=e.currentDocument,a=e.disabled;a||(tt.M.validateFeature({currentUser:t,currentDocument:n})?o.setState({isOpen:!0}):a||o.props.onClick())})),v()($()(o),"handleClose",(function(){o.setState({isOpen:!1})})),o.state={isOpen:!1},o.buttonRef=d.a.createRef(),o}return J()(n,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props,n=t.children,o=t.themeMode;return d.a.createElement(d.a.Fragment,null,d.a.createElement("span",{ref:this.buttonRef,onClick:this.handleClick},n),d.a.createElement(Ye.a,{open:e,classes:"theme-".concat(o),parentOverflow:"window",disablePortal:!1,anchorEl:this.buttonRef.current,handleClose:this.handleClose},this.renderPopperContent()))}}]),n}(d.a.PureComponent);at.propTypes=ot,at.defaultProps={onClick:function(){},currentUser:null,currentDocument:{},icon:null,disabled:!1};var rt=at,it=Object(a.a)(Object(o.c)((function(e){return{currentUser:i.a.getCurrentUser(e),currentDocument:i.a.getCurrentDocument(e),themeMode:i.a.getThemeMode(e)}})),r.l)(rt),st=n("./src/constants/eventConstants.js");function ct(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re()(e);if(t){var a=re()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe()(this,n)}}var lt={openToast:k.a.func.isRequired,currentDocument:k.a.object},ut=function(e){te()(n,e);var t=ct(n);function n(e){var o;return K()(this,n),o=t.call(this,e),v()($()(o),"checkPageWithTotalPage",(function(e){return e<=ve.default.getTotalPages()})),v()($()(o),"checkPage",(function(e){var t=o.props.openToast;if(e.every(o.checkPageWithTotalPage)){if(e.length>0&&e.every(tt.M.validateInputPages))return!0;var n={type:U.A.ERROR,message:"Please make sure your input following the formatter"};return o.props.openToast(n),!1}t({type:U.A.ERROR,message:"Please make sure your input smaller than number of pages in document"})})),v()($()(o),"handleChangePageRotate",(function(e){var t=e.target.value.split(",").map((function(e){return 1*e}));o.setState({rotatePages:e.target.value?t:[]})})),v()($()(o),"checkPageLocked",(function(e){var t=o.context.listPageDeleted,n=[];return e.forEach((function(e){t[e]&&n.push(e)})),n})),v()($()(o),"rotatePages",(function(e,t){var n=o.props,a=n.currentDocument,r=n.openToast,i=o.checkPageLocked(e);if(i.length){var s="";i.forEach((function(e){return s+="".concat(e," ")})),r({type:U.A.WARNING,message:"Page ".concat(s,"is blocked"),top:130})}else e.forEach((function(e){tt.y.rotateCssPage({pageIndex:e-1,angle:t})})),Ve.a.rotatePages({currentDocument:a,rotatePages:e,angle:t})})),v()($()(o),"rotateRight",(function(e){return function(){var t=o.context.listPageDeleted;if(e.length){o.checkPage(e)&&(o.rotatePages(e,1),Object(tt.n)(st.a.EventType.DOCUMENT_ROTATED,{pagesToRotate:e.toString(),pagesFrom:"",pagesTo:""}))}else{for(var n=[],a=ve.default.getTotalPages(),r=0;r<a;r++)t[r+1]||n.push(r+1);o.rotatePages(n,1),Object(tt.n)(st.a.EventType.DOCUMENT_ROTATED,{pagesToRotate:n.toString(),pagesFrom:"",pagesTo:""})}}})),v()($()(o),"rotateLeft",(function(e){return function(){var t=o.context.listPageDeleted;if(e.length){o.checkPage(e)&&(o.rotatePages(e,-1),Object(tt.n)(st.a.EventType.DOCUMENT_ROTATED,{pagesToRotate:e.toString(),pagesFrom:"",pagesTo:""}))}else{for(var n=[],a=ve.default.getTotalPages(),r=0;r<a;r++)t[r+1]||n.push(r+1);o.rotatePages(n,-1),Object(tt.n)(st.a.EventType.DOCUMENT_ROTATED,{pagesToRotate:n.toString(),pagesFrom:"",pagesTo:""})}}})),v()($()(o),"onChangePageRotateFromTo",(function(e){o.setState(v()({},e.target.name,1*e.target.value))})),v()($()(o),"rotateLeftFromToPages",T()(y.a.mark((function e(){var t,n,a,r,i,s,c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.state,n=t.fromPage,a=t.toPage,r=o.context.listPageDeleted,i=[],s=0,c=0,n>a?(s=a,c=n):(s=n,c=a),!o.checkPage([s,c])){e.next=11;break}for(l=s;l<c+1;l++)r[l]||i.push(l);return e.next=10,o.rotatePages(i,-1);case 10:Object(tt.n)(st.a.EventType.DOCUMENT_ROTATED,{pagesToRotate:i.toString(),pagesFrom:n,pagesTo:a});case 11:case"end":return e.stop()}}),e)})))),v()($()(o),"rotateRightFromToPages",T()(y.a.mark((function e(){var t,n,a,r,i,s,c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.state,n=t.fromPage,a=t.toPage,r=o.context.listPageDeleted,i=[],s=0,c=0,n>a?(s=a,c=n):(s=n,c=a),!o.checkPage([s,c])){e.next=11;break}for(l=s;l<c+1;l++)r[l]||i.push(l);return e.next=10,o.rotatePages(i,1);case 10:Object(tt.n)(st.a.EventType.DOCUMENT_ROTATED,{pagesToRotate:i.toString(),pagesFrom:n,pagesTo:a});case 11:case"end":return e.stop()}}),e)})))),o.state={rotatePages:[],fromPage:"",toPage:""},o}return J()(n,[{key:"render",value:function(){var e=this,t=this.state.rotatePages;return d.a.createElement("div",{className:"EditPanelRotate"},d.a.createElement("p",{className:"EditPanelRotate__desc"},"Enter a comma separated list of page numbers to rotate (leave empty for all pages). The pages will",d.a.createElement("strong",null," rotate 90\xb0")," each rotation"),d.a.createElement("p",null,d.a.createElement("strong",null,"Pages to rotate")),d.a.createElement("div",{className:"EditPanelRotate__input-group"},d.a.createElement("div",{className:"EditPanelRotate__left-group"},d.a.createElement("input",{className:"EditPanelRotate__input",placeholder:"E.g: 1, 4, 6",type:"text",onChange:this.handleChangePageRotate})),d.a.createElement("div",{className:"InputGroup__rotate-btn"},d.a.createElement(it,{onClick:this.rotateLeft(t),icon:"manipulation"},d.a.createElement(qe.a,{content:"Clockwise"},d.a.createElement(D.a,{className:"EditPanelRotate__btn",icon:"rotate-left",iconSize:20}))),d.a.createElement(it,{onClick:this.rotateRight(t),icon:"manipulation"},d.a.createElement(qe.a,{content:"Counter Clockwise"},d.a.createElement(D.a,{className:"EditPanelRotate__btn",icon:"rotate-right",iconSize:20}))))),d.a.createElement("div",{className:"EditPanelRotate__inputform"},d.a.createElement("div",{className:"InputForm__group"},d.a.createElement("p",null,d.a.createElement("strong",null,"From")),d.a.createElement("input",{onChange:function(t){return e.onChangePageRotateFromTo(t)},className:"EditPanelRotate__input input__fromTo",name:"fromPage",placeholder:"E.g: 1"})),d.a.createElement("div",{className:"InputForm__group"},d.a.createElement("p",null,d.a.createElement("strong",null,"To")),d.a.createElement("input",{onChange:function(t){return e.onChangePageRotateFromTo(t)},className:"EditPanelRotate__input input__fromTo",placeholder:"E.g: 4",name:"toPage"})),d.a.createElement("div",{className:"InputGroup__rotate-btn"},d.a.createElement("div",{className:"Button__Group"},d.a.createElement(it,{onClick:this.rotateLeftFromToPages,icon:"manipulation"},d.a.createElement(qe.a,{content:"Clockwise"},d.a.createElement(D.a,{className:"EditPanelRotate__btn btn__fromTo",icon:"rotate-left",iconSize:20}))),d.a.createElement(it,{onClick:this.rotateRightFromToPages,icon:"manipulation"},d.a.createElement(qe.a,{content:"Counter Clockwise"},d.a.createElement(D.a,{className:"EditPanelRotate__btn btn__fromTo",icon:"rotate-right",iconSize:20})))))))}}]),n}(u.PureComponent);ut.propTypes=lt,ut.defaultProps={currentDocument:{}};var dt=ut,mt=Object(o.c)((function(e){return{currentDocument:i.a.getCurrentDocument(e),thumbs:i.a.getThumbs(e)}}),(function(e){return{dispatch:e,openToast:function(t){return e(s.a.openToast(t))},updateThumbs:function(t){return e(s.a.updateThumbs(t))}}}))(Object(r.l)(dt));dt.contextType=Ae.a;var pt=n("./node_modules/@babel/runtime/helpers/toConsumableArray.js"),ft=n.n(pt);function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re()(e);if(t){var a=re()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe()(this,n)}}var vt={currentUser:k.a.object,openModal:k.a.func,isPageEditMode:k.a.bool,currentDocument:k.a.object,openToast:k.a.func,closeToast:k.a.func,updateThumbs:k.a.func,thumbs:k.a.array},Et=function(e){te()(n,e);var t=bt(n);function n(e){var o;return K()(this,n),o=t.call(this,e),v()($()(o),"emitChangeAnnotation",(function(e,t,n,o){q.a.emit(V.a.ANNOTATION_CHANGE,{roomId:n._id,xfdf:t.replace(/<modify>[\s\S]*?<\/modify>/,"<modify />"),annotationId:e,userId:o._id,email:o.email})})),v()($()(o),"removeOriginPage",function(){var e=T()(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==o.context.pageWillBeDeleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,tt.y.executeSocketRemovePage({currentDocument:t,pagesRemove:n,annotationDeleted:o.annotationDeleted});case 4:o.context.setPageWillBeDeleted(-1),o.annotationDeleted=[];case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v()($()(o),"onPageComplete",(function(){o.props.isPageEditMode&&ve.default.getAnnotationManager().enableReadOnlyMode()})),v()($()(o),"onAnnotationChanged",(function(e,t){o.props.isPageEditMode&&o.isExecDeletePage&&(o.annotationDeleted=ft()(e),o.isExecDeletePage=!1)})),v()($()(o),"handleChangePagesRemove",(function(e){var t=e.target.value.split().map((function(e){return 1*e}));o.setState({pagesRemove:t})})),v()($()(o),"checkPageWithTotalPage",(function(e){return e<=ve.default.getTotalPages()})),v()($()(o),"confirmRemovePage",T()(y.a.mark((function e(){var t,n,a,r,i,s,c,l,u,d,m,p,f,g,h;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.state.pagesRemove,n=o.props,a=n.currentDocument,r=n.openToast,n.currentUser,i=n.thumbs,s=n.updateThumbs,c=o.context,l=c.listPageDeleted,u=c.bookmarkIns,!l[t[0]]){e.next=7;break}return d={type:U.A.WARNING,message:"Page ".concat(t[0]," is blocked"),top:130},r(d),e.abrupt("return");case 7:if(Object.keys(l).length!==ve.default.getTotalPages()-1){e.next=11;break}return m={type:U.A.WARNING,message:"You can not delete the only page of the document",top:130},r(m),e.abrupt("return");case 11:if(p=ve.default.getAnnotationManager(),-1===o.context.pageWillBeDeleted){e.next=16;break}return clearTimeout(o.toastTimeOut),e.next=16,o.removeOriginPage(a,[o.context.pageWillBeDeleted]);case 16:return o.context.setPageWillBeDeleted(t[0]),f=tt.c.removeElementFromArrayByIndex({array:i,removeIndex:t[0]}),p.disableReadOnlyMode(),e.next=21,ve.default.getDocument().extractPages(t);case 21:return g=e.sent,h=new Blob([g],{type:"application/pdf"}),o.blobPageDeleted=h,o.isExecDeletePage=!0,e.next=27,Ve.a.removePages({currentDocument:a,pagesRemove:t});case 27:o.updatePageOfManip(t),u.undoBookmark=t[0],u.updatePositionOfBookmark({type:U.u.REMOVE_PAGE,option:{pagesRemove:t}}),s(f),o.undoDeletePageAction();case 32:case"end":return e.stop()}}),e)})))),v()($()(o),"undoDeletePageCore",function(){var e=T()(y.a.mark((function e(t,n,a){var r,i,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.props.openToast,i={type:U.A.SUCCESS,message:"Undoing...",top:130},s={type:U.A.SUCCESS,message:"Page ".concat(t," undone"),top:130},r(i),e.next=6,tt.y.undoDeletePageCore(t,n,a);case 6:r(s);case 7:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()),v()($()(o),"onClickUndoToast",function(){var e=T()(y.a.mark((function e(t,n,a,r){var i,s,c,l,u,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.context.bookmarkIns,q.a.emit(V.a.SEND_DELETED_PAGE,{roomId:t._id,pageDeleted:o.context.pageWillBeDeleted,undoSignal:!0}),e.next=4,o.undoDeletePageCore(n,a,r);case 4:return i.revertBookmark(n),s=o.props,c=s.thumbs,l=s.updateThumbs,e.next=8,tt.y.onLoadThumbs(n-1);case 8:u=e.sent,(d=ft()(c)).splice(n-1,0,ht(ht({},u),{},{id:se()()})),o.context.setPageWillBeDeleted(-1),l(d),o.annotationDeleted=[];case 14:case"end":return e.stop()}}),e)})));return function(t,n,o,a){return e.apply(this,arguments)}}()),v()($()(o),"undoDeletePageAction",(function(){var e=o.state.pagesRemove,t=o.props,n=t.currentDocument,a=t.openToast,r=(t.currentUser,t.closeToast);setTimeout((function(){q.a.emit(V.a.SEND_DELETED_PAGE,{roomId:n._id,pageDeleted:e[0],undoSignal:!1})}),500);var i={type:U.A.WARNING,message:"Page ".concat(e[0]," deleted"),top:130,autoHideDuration:5e3,action:{name:"Undo?",callback:function(){clearTimeout(o.toastTimeOut),o.onClickUndoToast(n,o.context.pageWillBeDeleted,o.blobPageDeleted,o.annotationDeleted)}},onClickAway:function(){return null}};o.toastTimeOut=setTimeout((function(){r(),o.removeOriginPage(n,[o.context.pageWillBeDeleted]),ve.default.scrollViewUpdated()}),5e3),a(i)})),v()($()(o),"handleRemovePages",(function(){var e=o.state.pagesRemove,t=o.props,n=t.openModal,a=t.openToast,r=ve.default.getTotalPages();if(e.length&&tt.M.validateInputPages(e[0]))if(1===r)a({type:U.A.WARNING,message:"You can not delete the only page of the document",top:130});else if(e.every(o.checkPageWithTotalPage)){n({type:U.A.WARNING,title:"Are you sure to delete this page?",message:"This action cannot be undone.",confirmButtonTitle:"Delete",color:"accent",onCancel:function(){},onConfirm:o.confirmRemovePage})}else{a({type:U.A.ERROR,message:"Please make sure your input smaller than number of pages in document",top:130})}else a({type:U.A.ERROR,message:"Please make sure your input following the formatter",top:130})})),v()($()(o),"updatePageOfManip",(function(e){var t=o.context,n=t.listPageDeleted,a=t.setListPageDeleted,r={};Object.keys(n).forEach((function(t){n[t]>=e&&(n[t]-=1),r[n[t]]=n[t]})),a(r)})),o.blobPageDeleted=null,o.annotationDeleted=[],o.isExecDeletePage=!1,o.toastTimeOut=null,o.state={pagesRemove:[]},o}return J()(n,[{key:"componentDidMount",value:function(){ve.default.docViewer.addEventListener("pageComplete",this.onPageComplete),ve.default.addEventListener("annotationChanged",this.onAnnotationChanged)}},{key:"componentWillUnmount",value:function(){ve.default.docViewer.removeEventListener("pageComplete",this.onPageComplete),ve.default.removeEventListener("annotationChanged",this.onAnnotationChanged)}},{key:"render",value:function(){return d.a.createElement("div",{className:"EditPanelDelete"},d.a.createElement("p",{className:"EditPanelDelete__desc"},"Enter a page number to delete"),d.a.createElement("p",null,d.a.createElement("strong",null,"Page to delete")),d.a.createElement("div",{className:"EditPanelDelete__input-group"},d.a.createElement("input",{className:"EditPanelDelete__input",onChange:this.handleChangePagesRemove,placeholder:"E.g: 1"}),d.a.createElement(it,{onClick:this.handleRemovePages,icon:"manipulation"},d.a.createElement(D.a,{className:"EditPanelDelete__btn"},"Delete"))))}}]),n}(u.PureComponent);Et.propTypes=vt,Et.defaultProps={currentUser:{},openModal:function(){},isPageEditMode:!1,currentDocument:{},openToast:function(){},closeToast:function(){},updateThumbs:function(){},thumbs:[]};var yt=Et,Ct=Object(o.c)((function(e){return{currentUser:i.a.getCurrentUser(e),currentDocument:i.a.getCurrentDocument(e),thumbs:i.a.getThumbs(e),isPageEditMode:i.a.isPageEditMode(e)}}),(function(e){return{dispatch:e,openToast:function(t){return e(s.a.openToast(t))},openModal:function(t){return e(s.a.openModal(t))},updateThumbs:function(t){return e(s.a.updateThumbs(t))},closeToast:function(){return e(s.a.closeToast())}}}))(Object(r.l)(yt));function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re()(e);if(t){var a=re()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe()(this,n)}}yt.contextType=Ae.a;var jt=function(e){te()(n,e);var t=wt(n);function n(e){var o;return K()(this,n),o=t.call(this,e),v()($()(o),"handleChangeInstertBlankPage",(function(e){var t=e.target.value.split(",").map((function(e){return 1*e}));o.setState({pageArray:t})})),v()($()(o),"checkPageWithTotalPage",(function(e){return e<=ve.default.getTotalPages()+1})),v()($()(o),"handleSubmitInsertBlankPage",T()(y.a.mark((function e(){var t,n,a,r,i,s,c,l,u,d,m,p,f,g,h,b,v,E;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.state.pageArray,n=o.props,a=n.currentDocument,r=n.openToast,i=n.thumbs,s=n.updateThumbs,c=o.context,l=c.pageWillBeDeleted,u=c.bookmarkIns,d=-1===l?ve.default.getTotalPages():ve.default.getTotalPages()+1,!t.every(o.checkPageWithTotalPage)){e.next=30;break}if(1!==t.length||!t.every(tt.M.validateInputPages)){e.next=26;break}return m=t.sort((function(e,t){return e-t})),p={width:612,height:792},e.next=10,Ve.a.insertBlankPages({currentDocument:a,insertPages:t,sizePage:p,totalPages:d});case 10:u.updatePositionOfBookmark({type:U.u.INSERT_BLANK_PAGE,option:{insertPages:t}}),o.updatePageOfManip(t[0]),f=ft()(i),g=0;case 14:if(!(g<m.length)){e.next=24;break}return e.next=17,tt.y.onLoadThumbs(m[g]+g-1);case 17:h=e.sent,b=Pt(Pt({},h),{},{id:se()()}),f.splice(m[g]+g-1,0,b),s(f);case 21:g++,e.next=14;break;case 24:e.next=28;break;case 26:v={type:U.A.ERROR,message:"Please make sure your input following the formatter",top:130},r(v);case 28:e.next=32;break;case 30:E={type:U.A.ERROR,message:"Please make sure your input smaller than number of pages in document",top:130},r(E);case 32:case"end":return e.stop()}}),e)})))),v()($()(o),"updatePageOfManip",(function(e){var t=o.context,n=t.listPageDeleted,a=t.pageWillBeCropped,r=t.pageWillBeDeleted,i=t.setListPageDeleted,s=t.setPageWillBeDeleted,c=t.setPageWillBeCropped,l={};Object.keys(n).forEach((function(t){n[t]>=e&&(n[t]+=1),l[n[t]]=n[t]})),i(l),e<=r&&s(r+1),e<=a.position&&c(Pt(Pt({},a),{},{position:a.position+1}))})),o.state={pageArray:[]},o}return J()(n,[{key:"render",value:function(){return d.a.createElement("div",{className:"EditPanelInsertBlankPage"},d.a.createElement("p",{className:"EditPanelInsertBlankPage__desc"},"Enter page you want to add a blank page"),d.a.createElement("p",null,d.a.createElement("strong",null,"Page")),d.a.createElement("div",{className:"EditPanelInsertBlankPage__input-group"},d.a.createElement("input",{onChange:this.handleChangeInstertBlankPage,className:"EditPanelInsertBlankPage__input",placeholder:"E.g: 10"}),d.a.createElement(it,{onClick:this.handleSubmitInsertBlankPage,icon:"manipulation"},d.a.createElement(D.a,{className:"EditPanelInsertBlankPage__btn"},"Insert"))))}}]),n}(u.PureComponent),kt=Object(o.c)((function(e){return{currentDocument:i.a.getCurrentDocument(e),thumbs:i.a.getThumbs(e),totalPages:i.a.getTotalPages(e)}}),(function(e){return{dispatch:e,openToast:function(t){return e(s.a.openToast(t))},updateThumbs:function(t){return e(s.a.updateThumbs(t))}}}))(Object(r.l)(jt));function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function At(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re()(e);if(t){var a=re()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe()(this,n)}}jt.contextType=Ae.a;var xt={openToast:k.a.func.isRequired,currentDocument:k.a.object,thumbs:k.a.array,updateThumbs:k.a.func.isRequired},St=function(e){te()(n,e);var t=At(n);function n(){var e;K()(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),v()($()(e),"state",{pagesToMove:"",insertBeforePage:""}),v()($()(e),"handleChangePagesToMove",(function(t){e.setState({pagesToMove:1*t.target.value})})),v()($()(e),"handleChangeInsertBeforePage",(function(t){e.setState({insertBeforePage:1*t.target.value})})),v()($()(e),"checkPageWithTotalPage",(function(e){return e<=ve.default.getTotalPages()})),v()($()(e),"checkPageEqual",(function(t){return t!==e.state.insertBeforePage})),v()($()(e),"handleSubmitMovePage",T()(y.a.mark((function t(){var n,o,a,r,i,s,c,l,u,d,m,p,f,g,h,b;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,o=n.pagesToMove,a=n.insertBeforePage,r=e.props,i=r.openToast,s=r.currentDocument,c=r.thumbs,l=r.updateThumbs,u=e.context,d=u.listPageDeleted,m=u.bookmarkIns,!d[o]){t.next=7;break}return p={type:U.A.WARNING,message:"Page ".concat(o," is blocked"),top:130},i(p),t.abrupt("return");case 7:if(!(e.checkPageWithTotalPage(a)&&e.checkPageWithTotalPage(o)&&tt.M.validateInputPages(o)&&tt.M.validateInputPages(a))){t.next=22;break}return f=ft()(c),t.next=11,Ve.a.movePages({currentDocument:s,pagesToMove:o,insertBeforePage:a});case 11:return e.updatePageOfManip(o,a),m.updatePositionOfBookmark({type:U.u.MOVE_PAGE,option:{pagesToMove:o,insertBeforePage:a}}),t.next=15,tt.y.onLoadThumbs(a-1);case 15:g=t.sent,h=_t(_t({},g),e.props.thumbs[o-1]),f.splice(o-1,1),f.splice(a-1,0,h),l(f),t.next=24;break;case 22:b={type:U.A.ERROR,message:"Please make sure your input following the formatter",top:130},i(b);case 24:case"end":return t.stop()}}),t)})))),v()($()(e),"updatePageOfManip",(function(t,n){var o=e.context,a=o.listPageDeleted,r=o.pageWillBeCropped,i=o.pageWillBeDeleted,s=o.setListPageDeleted,c=o.setPageWillBeDeleted,l=o.setPageWillBeCropped,u={};Object.keys(a).forEach((function(e){var o=a[e];t===o?a[e]=n:n<=o&&t>o?a[e]+=1:n>=o&&t<o&&(a[e]-=1),u[a[e]]=a[e]})),s(u),t===i?c(n):n<=i&&t>i?c(i+1):n>=i&&t<i&&c(i-1),t===r.position?l(_t(_t({},r),{},{position:n})):n<=r.position&&t>r.position?l(_t(_t({},r),{},{position:r.position+1})):n>=r.position&&t<r.position&&l(_t(_t({},r),{},{position:r.position-1}))})),e}return J()(n,[{key:"render",value:function(){return d.a.createElement("div",{className:"EditPanelMovePage"},d.a.createElement("div",{className:"EditPanelMovePage__form"},d.a.createElement("div",{className:"EditPanelMovePage__inputform"},d.a.createElement("div",{className:"InputForm__group"},d.a.createElement("p",null,d.a.createElement("strong",null,"From")),d.a.createElement("input",{onChange:this.handleChangePagesToMove,className:"EditPanelMovePage__input",placeholder:"E.g: 1"})),d.a.createElement("div",{className:"InputForm__group"},d.a.createElement("p",null,d.a.createElement("strong",null,"To")),d.a.createElement("input",{onChange:this.handleChangeInsertBeforePage,className:"EditPanelMovePage__input",placeholder:"E.g: 4"}))),d.a.createElement(it,{onClick:this.handleSubmitMovePage,icon:"manipulation"},d.a.createElement(D.a,{className:"EditPanelMovePage__btn"},"Move"))))}}]),n}(u.PureComponent);St.propTypes=xt,St.defaultProps={currentDocument:{},thumbs:[]};var Dt=St,Rt=Object(o.c)((function(e){return{currentDocument:i.a.getCurrentDocument(e),thumbs:i.a.getThumbs(e)}}),(function(e){return{dispatch:e,openToast:function(t){return e(s.a.openToast(t))},updateThumbs:function(t){return e(s.a.updateThumbs(t))}}}))(Object(r.l)(Dt));function It(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re()(e);if(t){var a=re()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe()(this,n)}}Dt.contextType=Ae.a;var Mt={openToast:k.a.func,thumbs:k.a.array,updateThumbs:k.a.func,currentUser:k.a.object,currentDocument:k.a.object,closeToast:k.a.func,openModal:k.a.func,isPageEditMode:k.a.bool},Nt=function(e){te()(n,e);var t=It(n);function n(e){var o;return K()(this,n),o=t.call(this,e),v()($()(o),"emitChangeAnnotation",(function(e,t,n,o){q.a.emit(V.a.ANNOTATION_CHANGE,{roomId:n._id,xfdf:t,annotationId:e,userId:o._id,email:o.email})})),v()($()(o),"onAnnotationChanged",T()(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.props.isPageEditMode||!o.isExecCropPage){e.next=6;break}return e.next=4,ve.default.getAnnotationManager().exportAnnotCommand();case 4:t=e.sent,o.croppedXfdf=t;case 6:case"end":return e.stop()}}),e)})))),v()($()(o),"handleChangeSizeCrop",(function(e){var t=e.target,n=t.name,a=t.value;o.setState(v()({},n,a))})),v()($()(o),"handleChangePageCrop",(function(e){var t=e.target.value.split(",").map((function(e){return 1*e}));o.setState({pageCrops:t})})),v()($()(o),"cropPagesCore",function(){var e=T()(y.a.mark((function e(t){var n,a,r,i,s,c,l,u,d,m,p,f,g,h,b,v,E,C;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentDocument,a=t.pageCrops,r=t.top,i=t.bottom,s=t.left,c=t.right,l=t.croppedAnnotations,u=void 0===l?[]:l,d=t.isUndo,m=void 0!==d&&d,p=o.props,f=p.thumbs,g=p.updateThumbs,h=p.openToast,o.isExecCropPage=!0,m||(Object.keys(o.context.pageWillBeCropped).length&&(clearTimeout(o.toastTimeOut),o.emitCroppedAnnotation(),Ve.a.emitSocketCropPage({currentDocument:n,pageCrops:[o.context.pageWillBeCropped.position],top:o.context.pageWillBeCropped.top,bottom:o.context.pageWillBeCropped.bottom,left:o.context.pageWillBeCropped.left,right:o.context.pageWillBeCropped.right})),b={position:a[0],top:r,bottom:i,left:s,right:c},o.context.setPageWillBeCropped(b),o.croppedAnnotations=o.getCroppedAnnotations({pageCrops:a,top:r,bottom:i,left:s,right:c}),o.deleteCroppedAnnotations(o.croppedAnnotations)),e.next=6,Ve.a.cropPages({currentDocument:n,pageCrops:a,top:r,bottom:i,left:s,right:c,isUndo:m,croppedAnnotations:u});case 6:return v=ft()(f),e.next=9,tt.y.onLoadThumbs(a[0]-1);case 9:E=e.sent,v[a[0]-1]=E,g(v),m?(C={type:U.A.SUCCESS,message:"Page ".concat(a[0]," undone"),top:130},h(C)):o.undoCropPageAction(),o.isExecCropPage=!1;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v()($()(o),"onClickUndoToast",(function(){var e=o.context.pageWillBeCropped,t=e.top,n=e.bottom,a=e.left,r=e.right,i=o.props,s=i.currentDocument;(0,i.openToast)({type:U.A.SUCCESS,message:"Undoing...",top:130}),o.cropPagesCore({currentDocument:s,pageCrops:[o.context.pageWillBeCropped.position],top:-t,bottom:-n,left:-a,right:-r,isUndo:!0,croppedAnnotations:o.croppedAnnotations})})),v()($()(o),"undoCropPageAction",(function(){var e=o.state.pageCrops,t=o.context.pageWillBeCropped,n=t.top,a=t.bottom,r=t.left,i=t.right,s=o.props,c=s.currentDocument,l=s.openToast,u=s.closeToast;l({type:U.A.WARNING,message:"Page ".concat(e[0]," cropped"),top:130,autoHideDuration:5e3,action:{name:"Undo?",callback:function(){o.onClickUndoToast(),clearTimeout(o.toastTimeOut),o.context.setPageWillBeCropped({})}},onClickAway:function(){return null}}),o.toastTimeOut=setTimeout((function(){o.emitCroppedAnnotation(),u(),Ve.a.emitSocketCropPage({currentDocument:c,pageCrops:[o.context.pageWillBeCropped.position],top:n,bottom:a,left:r,right:i}),o.context.setPageWillBeCropped({})}),5e3)})),v()($()(o),"cropPagesAction",(function(e,t,n,a,r){var i=o.props,s=i.currentDocument,c=i.openModal,l="Are you sure to crop at page ".concat(o.state.pageCrops,"?");c({type:U.A.WARNING,title:"Crop pages",message:l,confirmButtonTitle:"Crop",onCancel:function(){},onConfirm:function(){return o.cropPagesCore({currentDocument:s,pageCrops:e,top:t,bottom:n,left:a,right:r})}})})),v()($()(o),"showModalErrorCrop",(function(){(0,o.props.openModal)({type:U.A.WARNING,title:"Crop pages",message:"Cannot Crop Pages.",confirmButtonTitle:"Cancel",onConfirm:function(){}})})),v()($()(o),"handleCropPage",T()(y.a.mark((function e(){var t,n,a,r,i,s,c,l,u,d,m,p,f,g,h,b;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.state,n=t.pageCrops,a=t.top,r=t.bottom,i=t.left,s=t.right,c=o.props.openToast,l=o.context.listPageDeleted,u=ve.default.getTotalPages(),!(n>u)){e.next=9;break}d={type:U.A.ERROR,message:"Please make sure your input smaller than number of pages in document",top:130},c(d),e.next=32;break;case 9:if(!l[n]){e.next=13;break}return m={type:U.A.WARNING,message:"Page ".concat(n," is blocked"),top:130},c(m),e.abrupt("return");case 13:if(!(1===n.length&&n.every(tt.M.validateInputPages)&&tt.M.validateNumber(parseInt(a))&&tt.M.validateNumber(parseInt(r))&&tt.M.validateNumber(parseInt(i))&&tt.M.validateNumber(parseInt(s)))){e.next=30;break}if(p=ve.default.getPageInfo(n[0]),f=p.height,g=p.width,h=!0,parseInt(a)>f-100?(o.setState({top:Math.floor(f-100),bottom:0}),h=!1):parseInt(r)>f-parseInt(a)-100&&(f=f-parseInt(a)-100,o.setState({bottom:Math.floor(f)}),h=!1),parseInt(i)>g-100?(o.setState({left:Math.floor(g-100),right:0}),h=!1):parseInt(s)>g-parseInt(i)-100&&(g=g-parseInt(i)-100,o.setState({right:Math.floor(g)}),h=!1),!h){e.next=28;break}if(!(parseInt(a)>Math.floor(f-100)||parseInt(i)>Math.floor(g-100)||parseInt(a)+parseInt(r)>Math.floor(f-100)||parseInt(i)+parseInt(s)>Math.floor(g-100))){e.next=26;break}return e.next=24,o.showModalErrorCrop(n);case 24:e.next=28;break;case 26:return e.next=28,o.cropPagesAction(n,parseInt(a),parseInt(r),parseInt(i),parseInt(s));case 28:e.next=32;break;case 30:b={type:U.A.ERROR,message:"Please make sure your input following the formatter",top:130},c(b);case 32:case"end":return e.stop()}}),e)})))),v()($()(o),"emitCroppedAnnotation",(function(){var e=o.props,t=e.currentDocument,n=e.currentUser;o.croppedAnnotations.forEach((function(e){o.emitChangeAnnotation(e.Id,o.croppedXfdf,t,n)})),o.croppedAnnotations=[],o.croppedXfdf="",ve.default.scrollViewUpdated()})),v()($()(o),"getCroppedAnnotations",(function(e){var t=e.pageCrops,n=e.top,o=e.bottom,a=e.left,r=e.right,i=ve.default.getAnnotationsList().filter((function(e){return e.PageNumber===t[0]&&!e.isReply()})),s=[],c=ve.default.getDocument().getPageRotation(t[0]),l=ve.default.getPageInfo(t[0]),u=l.height,d=l.width;switch(c){case 0:s=i.filter((function(e){return n>e.Y+e.Height||a>e.X+e.Width||r>d-e.X||o>u-e.Y}));break;case 90:s=i.filter((function(e){return n>e.X+e.Width||a>u-e.Y||r>e.Y+e.Height||o>d-e.X}));break;case 180:s=i.filter((function(e){return n>u-e.Y||a>d-e.X||r>e.X+e.Width||o>e.Y+e.Height}));break;case 270:s=i.filter((function(e){return n>d-e.X||a>e.Y+e.Height||r>u-e.Y||o>e.X+e.Width}))}return s})),v()($()(o),"deleteCroppedAnnotations",function(){var e=T()(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ve.default.deleteAnnotations(t,{force:!0}),t.forEach((function(e){ve.default.deleteAnnotations(e.getReplies(),{force:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.toastTimeOut=null,o.state={pageCrops:[],top:"",bottom:"",left:"",right:""},o.isExecCropPage=!1,o.croppedAnnotations=[],o.croppedXfdf="",o}return J()(n,[{key:"componentDidMount",value:function(){ve.default.addEventListener("annotationChanged",this.onAnnotationChanged)}},{key:"componentWillUnmount",value:function(){ve.default.removeEventListener("annotationChanged",this.onAnnotationChanged)}},{key:"render",value:function(){var e=this.state,t=e.top,n=e.bottom,o=e.left,a=e.right;return d.a.createElement("div",{className:"EditPanelCropPage"},d.a.createElement("p",{className:"EditPanelCropPage__desc"},"Enter amount of pixels to crop, and then a page number (cropping cannot be undone)"),d.a.createElement("div",{className:"EditPanelCropPage__inputform"},d.a.createElement("div",{className:"InputForm__group InputForm__firstchild"},d.a.createElement("p",null,d.a.createElement("strong",null,"Top (px)")),d.a.createElement("input",{className:"EditPanelCropPage__input EditPanelCropPage__input--full",name:"top",placeholder:"E.g: 10",onChange:this.handleChangeSizeCrop,value:t,autoComplete:"new-password"})),d.a.createElement("div",{className:"InputForm__group"},d.a.createElement("p",null,d.a.createElement("strong",null,"Bottom (px)")),d.a.createElement("input",{className:"EditPanelCropPage__input EditPanelCropPage__input--full",name:"bottom",placeholder:"E.g: 10",onChange:this.handleChangeSizeCrop,value:n,autoComplete:"new-password"}))),d.a.createElement("div",{className:"EditPanelCropPage__inputform"},d.a.createElement("div",{className:"InputForm__group InputForm__firstchild"},d.a.createElement("p",null,d.a.createElement("strong",null,"Left (px)")),d.a.createElement("input",{className:"EditPanelCropPage__input EditPanelCropPage__input--full",name:"left",placeholder:"E.g: 10",onChange:this.handleChangeSizeCrop,value:o,autoComplete:"new-password"})),d.a.createElement("div",{className:"InputForm__group"},d.a.createElement("p",null,d.a.createElement("strong",null,"Right (px)")),d.a.createElement("input",{className:"EditPanelCropPage__input EditPanelCropPage__input--full",name:"right",placeholder:"E.g: 10",onChange:this.handleChangeSizeCrop,value:a,autoComplete:"new-password"}))),d.a.createElement("p",null,d.a.createElement("strong",null,"Page")),d.a.createElement("div",{className:"EditPanelCropPage__input-group"},d.a.createElement("input",{className:"EditPanelCropPage__input",placeholder:"E.g: 1",onChange:this.handleChangePageCrop}),d.a.createElement(it,{onClick:this.handleCropPage,icon:"manipulation"},d.a.createElement(D.a,{className:"EditPanelCropPage__btn"},"Crop"))))}}]),n}(u.PureComponent);Nt.propTypes=Mt,Nt.defaultProps={openToast:function(){},thumbs:[],updateThumbs:function(){},currentDocument:{},currentUser:{},closeToast:function(){},openModal:function(){},isPageEditMode:!1};var Lt=Nt,Bt=Object(o.c)((function(e){return{currentDocument:i.a.getCurrentDocument(e),thumbs:i.a.getThumbs(e),isPageEditMode:i.a.isPageEditMode(e)}}),(function(e){return{dispatch:e,openToast:function(t){return e(s.a.openToast(t))},openModal:function(t){return e(s.a.openModal(t))},updateThumbs:function(t){return e(s.a.updateThumbs(t))},closeToast:function(){return e(s.a.closeToast())}}}))(Object(r.l)(Lt));Lt.contextType=Ae.a;var Ut=n("./node_modules/@material-ui/core/esm/MenuList/MenuList.js"),Ft=n("./node_modules/@material-ui/core/esm/MenuItem/MenuItem.js"),Gt=n("./node_modules/lodash/range.js"),Ht=n.n(Gt),zt=n("./assets/lumin-svgs/google.svg"),Wt=n.n(zt),Vt=n("./src/lumin-components/CustomCheckbox/index.js"),qt=n("./src/lumin-components/GoogleFilePicker/index.js"),Yt=n("./src/lumin-components/ButtonLumin/index.js"),Zt=n("./src/constants/documentType.js"),Kt=n("./src/constants/plan.js");function Xt(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Qt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re()(e);if(t){var a=re()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe()(this,n)}}var $t={currentDocument:k.a.object,openToast:k.a.func,thumbs:k.a.array,dispatch:k.a.func.isRequired,themeMode:k.a.string,closeElement:k.a.func,openElement:k.a.func,currentUser:k.a.object,pageEditDisplayMode:k.a.string,organizations:k.a.object,mergeFeatureLimit:k.a.number,setMergeFeatureLimit:k.a.func},en="File size must be less than 10 MB.",tn="Must upload a file of type: pdf, jpg, png, jpeg",nn="Please select valid page numbers",on="Please enter a valid page number",an="Please enter a comma or dash separated list of valid page numbers",rn="Some error occurred please try again",sn=[Zt.b.PDF,Zt.c.PNG,Zt.c.JPG,Zt.c.JPEG],cn="google",ln="local",un=/^\d+(?:-\d+)?(?:,\h*\d+(?:-\d+)?)*$/g,dn=[].concat(ft()(Ht()(37,41)),ft()(Ht()(48,59)),ft()(Ht()(96,106)),[17,8,46]),mn=function(e){te()(n,e);var t=Qt(n);function n(e){var o;return K()(this,n),o=t.call(this,e),v()($()(o),"onKeyDown",(function(e){16===e.keyCode&&o.setIsPressingShiftKey(!0),91!==e.keyCode&&17!==e.keyCode||o.setIsPressingCmdOrControlKey(!0)})),v()($()(o),"onKeyUp",(function(e){16===e.keyCode&&o.setIsPressingShiftKey(!1),91!==e.keyCode&&17!==e.keyCode||o.setIsPressingCmdOrControlKey(!1)})),v()($()(o),"setIsPressingShiftKey",(function(e){o.setState({isPressingShiftKey:e})})),v()($()(o),"setIsPressingCmdOrControlKey",(function(e){o.setState({isPressingCmdOrControlKey:e})})),v()($()(o),"handleOpenUploadFilePopper",(function(){o.setState({openUploadFile:!0})})),v()($()(o),"handleCloseUploadFilePopper",(function(){o.setState({openUploadFile:!1})})),v()($()(o),"handleUploadGoogle",(function(){o.setState({openUploadFile:!1}),o.googlePickerRef.current.click(),o.otherFileSource=cn})),v()($()(o),"handleUploadLocal",(function(){o.inputFileRef.current.click(),o.otherFileSource=ln})),v()($()(o),"preCheckingFileUpload",(function(e){var t=e.size,n=e.type,a="";if(t>10485760&&(a=en),sn.includes(n)||(a=tn),a)throw o.setState({errorUploadFile:a,loading:!1}),new Error(a)})),v()($()(o),"onPickFileFromGoogle",function(){var e=T()(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.setState({loading:!0,errorUploadFile:"",fileInfo:null}),e.prev=1,e.next=4,p.e.getFileInfo(t.docs[0].id);case 4:return n=e.sent,e.next=7,p.e.downloadFile(t.docs[0].id,n.name);case 7:a=e.sent,e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),o.setState({errorUploadFile:rn,loading:!1}),new Error(rn);case 14:o.preCheckingFileUpload(a),o.createFileInfo(a);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()),v()($()(o),"handleChangeFile",(function(e){var t=e.target.files;t.length>0&&(o.setState({loading:!0,fileInfo:null,errorUploadFile:""}),o.preCheckingFileUpload(t[0]),o.createFileInfo(t[0]))})),v()($()(o),"createFileInfo",function(){var e=T()(y.a.mark((function e(t){var n,a,r,i,s,c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve.default.CoreControls.createDocument(t);case 3:return n=e.sent,e.next=6,tt.o.getThumbnailWithDocument(n,{thumbSize:60});case 6:a=e.sent,r=n.getPageCount(),i=Ht()(1,r+1),1,c=1===(s=r)?"".concat(s):"".concat(1,"-").concat(s),l={docInstance:n,thumbnail:a.toDataURL(),file:t,totalPages:r,rangeAllPages:i,rangeAllPageString:c},o.setState({errorUploadFile:"",pagesInsert:c,pagePosition:1,isValidPagePosition:!0,isValidPagesInsert:!0,fileInfo:l,loading:!1,allPages:!0}),e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),o.setState({errorUploadFile:rn,loading:!1}),new Error(rn);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()),v()($()(o),"renderErrorUploadFile",(function(){var e=o.state.errorUploadFile;return e?d.a.createElement("div",{className:"EditPanelMergePage__error_upload"},d.a.createElement(Ze.a,{className:"cancel-circle",size:"16"}),d.a.createElement("span",null,e)):null})),v()($()(o),"renderLoading",(function(){return o.state.loading?d.a.createElement("div",{className:"EditPanelMergePage__loading"},d.a.createElement("div",{className:"EditPanelMergePage__loading__spinner"}),d.a.createElement("span",null,"Uploading\u2026")):null})),v()($()(o),"renderUploadBtn",(function(){var e=o.state,t=e.timeUsage,n=e.isFetching,a=e.fileInfo,r=o.props,i=r.currentUser,s=r.currentDocument,c=s.service,l=s.mimeType,u=c===U.J.GOOGLE||c===U.J.DROPBOX||tt.o.isOffice(l),m=s.roleOfDocument.toUpperCase();return i&&m!==U.i.VIEWER?d.a.createElement("div",{className:"EditPanelMergePage__upload-btn-wrapper ".concat(t>=2||u?"over-limit":"")},d.a.createElement(D.a,{onClick:o.handleOpenUploadFilePopper,disabled:n||t>=2||u,className:"EditPanelMergePage__upload-btn ".concat(!a&&"empty")},d.a.createElement("span",{className:"label"},a?"Upload Another File":"Upload File"),d.a.createElement("div",{ref:o.anchorEl},d.a.createElement(Ze.a,{className:"dropdown",size:16})))):d.a.createElement("div",{className:"EditPanelMergePage__upload-btn-wrapper"},d.a.createElement(it,{icon:"manipulation",onClick:o.handleOpenUploadFilePopper},d.a.createElement(D.a,{className:"EditPanelMergePage__upload-btn empty"},d.a.createElement("span",{className:"label"},"Upload File"),d.a.createElement("div",{ref:o.anchorEl},d.a.createElement(Ze.a,{className:"dropdown",size:16})))))})),v()($()(o),"renderLimitBanner",(function(){var e=o.state.timeUsage,t=o.props.currentDocument,n=t.service,a=t.mimeType;return n===U.J.GOOGLE||n===U.J.DROPBOX||tt.o.isOffice(a)?null:o.isFreeUser&&0!==e?d.a.createElement("div",{className:"EditPanelMergePage__limit_banner"},d.a.createElement(Ze.a,{className:"info",size:"24"}),d.a.createElement("div",{className:"EditPanelMergePage__limit_banner__text"},1===e?"This is your last free merging document. ":"You only can merge 2 documents per day. ",d.a.createElement(_.a,{to:"/plans?".concat(Je.a.PLAN_PERIOD,"=").concat(Kt.a.ANNUAL.toLowerCase())},"Upgrade your plan to unlock this feature"))):null})),v()($()(o),"renderDoNotAllowMergeInfo",(function(){var e=o.props.currentDocument,t="",n=e.service,a=e.mimeType;return n===U.J.GOOGLE||n===U.J.DROPBOX||tt.o.isOffice(a)?(n!==U.J.GOOGLE&&n!==U.J.DROPBOX||(t="This tool is currently only available for documents stored within Lumin storage."),tt.o.isOffice(a)&&(t="This tool is only available for PDF documents."),d.a.createElement("div",{className:"EditPanelMergePage__limit_banner"},d.a.createElement(Ze.a,{className:"info",size:"24"}),d.a.createElement("div",{className:"EditPanelMergePage__limit_banner__text"},t))):null})),v()($()(o),"advancedCheck",(function(){var e=o.state,t=e.isValidPagesInsert,n=e.pagesInsert,a=e.fileInfo;if(t){var r,i=Xt(n.split(","));try{for(i.s();!(r=i.n()).done;){var s=r.value,c=s.split("-");if(1===c.length){if(parseInt(s)>a.totalPages||0===parseInt(s))return void o.setState({pageInsertErrorMessage:nn,isValidPagesInsert:!1})}else{if(parseInt(c[0])>parseInt(c[1]))return void o.setState({pageInsertErrorMessage:on,isValidPagesInsert:!1});if(parseInt(c[0])>a.totalPages||parseInt(c[1])>a.totalPages||0===parseInt(c[0])||0===parseInt(c[1]))return void o.setState({pageInsertErrorMessage:nn,isValidPagesInsert:!1})}}}catch(l){i.e(l)}finally{i.f()}}})),v()($()(o),"validateInsertPage",(function(e){var t=o.state.fileInfo;new RegExp(un).test(e)?o.setState({isValidPagesInsert:!0,pageInsertErrorMessage:"",allPages:e===t.rangeAllPageString},(function(){o.advancedCheck()})):o.setState({isValidPagesInsert:!1,pageInsertErrorMessage:an,allPages:e===t.rangeAllPageString})})),v()($()(o),"validatePositionPage",(function(e){e?o.setState({isValidPagePosition:!0,pagePositionErrorMessage:""}):o.setState({isValidPagePosition:!1,pagePositionErrorMessage:on})})),v()($()(o),"handleInputPageInsertChange",(function(e){var t=e.target.value;o.setState({pagesInsert:t}),o.validateInsertPage(t)})),v()($()(o),"handleInputPositionChange",(function(e){var t=e.target.value;o.setState({pagePosition:t},(function(){o.validatePositionPage(t)}))})),v()($()(o),"onInputPositionKeyDown",(function(e){var t=e.keyCode,n=o.state,a=n.isPressingShiftKey,r=n.isPressingCmdOrControlKey;dn.includes(t)&&!a||r||e.preventDefault()})),v()($()(o),"handleInputPositionBlur",(function(){var e=o.state.pagePosition,t=e,n=ve.default.getTotalPages();e&&(e<1&&(t=1),e>n&&(t=n+1),t!==e&&o.setState({pagePosition:t}))})),v()($()(o),"removeFile",(function(){o.inputFileRef.current.value=null,o.setState({fileInfo:null,pagesInsert:"",isValidPagePosition:!0,pagePositionErrorMessage:"",isValidPagesInsert:!0,pageInsertErrorMessage:""})})),v()($()(o),"toggleAllPage",(function(e){var t=o.state.fileInfo;e?o.setState({allPages:!1}):o.setState({allPages:!0,pagesInsert:t.rangeAllPageString,isValidPagesInsert:!0})})),v()($()(o),"calculateRange",(function(){var e,t=[],n=Xt(o.state.pagesInsert.split(","));try{for(n.s();!(e=n.n()).done;){var a=e.value,r=a.split("-");if(1===r.length)t.push(parseInt(a));else{var i=Ht()(parseInt(r[0]),parseInt(r[1])+1);t.push.apply(t,ft()(i))}}}catch(s){n.e(s)}finally{n.f()}return t})),v()($()(o),"validatePageBeforeMerge",(function(){var e=ve.default.getTotalPages();if(o.state.pagePosition>e+1)throw o.setState({isValidPagePosition:!1,pagePositionErrorMessage:on}),new Error(on)})),v()($()(o),"handleBeforeMerge",(function(){setTimeout((function(){o.validatePageBeforeMerge(),o.showDialogConfirm()}),150)})),v()($()(o),"handleMerge",T()(y.a.mark((function e(){var t,n,a,r,i,s,c,l,u,d,m,p,f,g,h,b,v,E,C,T,P,w;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.closeDialogConfirm(),t=o.state,n=t.fileInfo,a=t.allPages,r=t.pagePosition,i=o.props,s=i.currentDocument,c=i.currentUser,l=i.pageEditDisplayMode,u=i.thumbs,d=i.dispatch,m=i.openElement,p=i.closeElement,f=i.openToast,g=o.calculateRange(),h={},b=s._id,v=s.service,e.prev=6,m("loadingModal"),q.a.emit(V.a.START_MERGING_DOCUMENT,{userId:c._id,documentId:b}),E=a?n.rangeAllPages:g,C=ve.default.getTotalPages(),T=Number(r),e.next=14,tt.y.executeMergePage({docInstance:n.docInstance,rangesArray:E,positionToMerge:T,totalPagesBeforeMerge:C,thumbs:u,needUpdateThumbnail:"Grid"===l&&(u.length===C||T<=u.length),dispatch:d});case 14:if(v!==U.J.S3){e.next=21;break}return P=ve.default.getTotalPages(),w=P-C,e.next=19,o.emitSocket({totalPagesMerged:w,positionToMerge:T,totalPagesBeforeMerge:C});case 19:return e.next=21,o.saveToS3();case 21:h={type:U.A.SUCCESS,message:"Merge documents successfully",top:130},e.next=27;break;case 24:e.prev=24,e.t0=e.catch(6),h={type:U.A.ERROR,message:rn,top:130};case 27:return e.prev=27,p("loadingModal"),f(h),q.a.emit(V.a.FINISH_MERGING_DOCUMENT,{userId:c._id,documentId:b}),Object(tt.n)(st.a.EventType.DOCUMENT_MERGED,{otherFileSource:o.otherFileSource}),e.finish(27);case 33:case"end":return e.stop()}}),e,null,[[6,24,27,33]])})))),v()($()(o),"emitSocket",function(){var e=T()(y.a.mark((function e(t){var n,a,r,i,s,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.totalPagesMerged,a=t.positionToMerge,r=t.totalPagesBeforeMerge,i=o.props.currentDocument,s=o.context.bookmarkIns,c={currentDocument:i,totalPages:ve.default.getTotalPages(),numberOfPageToMerge:n,positionToMerge:a,totalPagesBeforeMerge:r,isSaveLimit:o.isFreeUser},e.next=6,p.c.emitSocketMergePages(c);case 6:return s.updatePositionOfBookmark({type:U.u.MERGE_PAGE,option:{numberOfPageToMerge:n,positionToMerge:a}}),e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v()($()(o),"saveToS3",T()(y.a.mark((function e(){var t,n,a,r,i,s,c,l,u,d,m,f,g,h;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.props,n=t.currentDocument,a=t.currentUser,r=t.dispatch,i=n.remoteId,s=n._id,c=n.thumbnail,l=n.mimeType,u=n.name,e.next=4,tt.u.getDocumentFile(n.name);case 4:return d=e.sent,ye.h&&(d.name=n.name),e.next=8,tt.o.getDocumentInstanceWithFile(d,r);case 8:return m=e.sent,e.next=11,tt.o.getLinearPDFWithDocument(m,{fileMetadata:{type:l,name:u}});case 11:return f=e.sent,e.next=14,tt.o.getThumbnailWithDocument(ve.default.getDocument(),{});case 14:return g=e.sent,e.next=17,tt.o.convertThumnailCanvasToFile(g);case 17:return h=e.sent,e.next=20,p.c.overrideDocumentToS3({file:f,remoteId:i,documentId:s,thumbnail:h,thumbnailRemoteId:c});case 20:return q.a.emit(V.a.MERGED_DOCUMENT,{documentId:s,userId:a._id,totalPages:ve.default.getTotalPages()}),e.abrupt("return",Promise.resolve());case 22:case"end":return e.stop()}}),e)})))),v()($()(o),"showDialogConfirm",(function(){o.setState({openConfirmDialog:!0})})),v()($()(o),"closeDialogConfirm",(function(){o.setState({openConfirmDialog:!1})})),o.initialState={openUploadFile:!1,openConfirmDialog:!1,fileInfo:null,errorUploadFile:"",pagePosition:1,pagesInsert:"",isValidPagePosition:!0,pagePositionErrorMessage:"",isValidPagesInsert:!0,pageInsertErrorMessage:"",allPages:!1,loading:!1,isPressingShiftKey:!1,isPressingCmdOrControlKey:!1,timeUsage:o.props.mergeFeatureLimit,isFetching:!1,isMerging:!1},o.state=o.initialState,o.inputFileRef=d.a.createRef(),o.anchorEl=d.a.createRef(),o.googlePickerRef=d.a.createRef(),o.isFreeUser=!0,o.validateInsertPage=be()(o.validateInsertPage,150),o.validatePositionPage=be()(o.validatePositionPage,150),o.handleInputPositionBlur=be()(o.handleInputPositionBlur,150),o.otherFileSource="",o}return J()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.currentUser,o=t.organizations,a=t.currentDocument;this.isFreeUser=!n||!o||Object(tt.w)(n,o.data)===Kt.k.FREE,document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),n&&(q.a.on(V.b.START_MERGING_DOCUMENT,(function(t){var n=t.documentId;a._id!==n&&e.isFreeUser&&e.setState({isMerging:!0})})),q.a.on(V.b.FINISH_MERGING_DOCUMENT,(function(t){var n=t.documentId;a._id!==n&&e.isFreeUser&&e.fetchTimeUsage()})))}},{key:"componentWillUnmount",value:function(){var e=this.props.currentUser;document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),e&&(q.a.removeListener(V.b.START_MERGING_DOCUMENT),q.a.removeListener(V.b.FINISH_MERGING_DOCUMENT))}},{key:"fetchTimeUsage",value:function(){var e=T()(y.a.mark((function e(){var t,n,o,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.currentDocument,o=t.currentUser,this.setState({isFetching:!0}),e.next=4,p.c.getMergeFeatureLimitUsage({currentDocument:n,currentUser:o});case 4:a=e.sent,r={isFetching:!1,isMerging:!1,timeUsage:a},a>=2&&(r.fileInfo=null,r.openConfirmDialog=!1),this.props.setMergeFeatureLimit(a),this.setState(r);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.themeMode,n=this.state,o=n.isMerging,a=n.fileInfo,r=n.openConfirmDialog,i=n.pagesInsert,s=n.pagePosition,c=n.isValidPagePosition,l=n.isValidPagesInsert,u=n.allPages,m=n.pageInsertErrorMessage,p=n.pagePositionErrorMessage,f=""===i||!c||!l||o,g=function(e){return e?"":"input-error"};return d.a.createElement("div",{className:"EditPanelMergePage"},d.a.createElement("input",{type:"file",className:"EditPanelMergePage__inputFile",ref:this.inputFileRef,onChange:this.handleChangeFile,accept:sn.join(",")}),d.a.createElement("div",{className:"EditPanelMergePage__inputFile"},d.a.createElement(qt.a,{onClose:this.handleCloseUploadFilePopper,onPicked:this.onPickFileFromGoogle,isUpload:!1,multiSelect:!1,mimeType:sn.join(",")},d.a.createElement("div",{className:"google-picker",ref:this.googlePickerRef}))),this.renderUploadBtn(),this.renderLoading(),this.renderErrorUploadFile(),this.renderLimitBanner(),this.renderDoNotAllowMergeInfo(),a&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"EditPanelMergePage__line"}),d.a.createElement("div",{className:"EditPanelMergePage__preview_group"},d.a.createElement("img",{className:"EditPanelMergePage__preview_group__img",src:a.thumbnail,width:"60",height:"48"}),d.a.createElement("div",{className:"EditPanelMergePage__preview_group__desc"},a.file.name),d.a.createElement(Yt.a,{icon:"cancel-thinner",iconSize:14,onClick:this.removeFile})),d.a.createElement("div",{className:"EditPanelMergePage__container"},d.a.createElement("span",{className:"label"},"Enter a comma separated list of pages to insert"),d.a.createElement("div",{className:"EditPanelMergePage__input-group"},d.a.createElement("input",{id:"merge-input-insert-pages",autoComplete:"off",className:"EditPanelMergePage__input ".concat(g(l)),value:i,onChange:this.handleInputPageInsertChange,placeholder:"1, 3-5"}),!l&&d.a.createElement("span",{className:"error-message"},m)),d.a.createElement("div",{className:"EditPanelMergePage__checkbox-group"},d.a.createElement(Vt.a,{className:"check-box",themeMode:t,type:"checkbox",checked:u,onChange:function(){return e.toggleAllPage(u)},id:"all_page"}),d.a.createElement("label",{htmlFor:"all_page"},"All pages")),d.a.createElement("span",{className:"label"},"Enter a position to insert the pages at"),d.a.createElement("div",{className:"EditPanelMergePage__input-group input-group--page"},d.a.createElement("input",{className:"EditPanelMergePage__input input--page ".concat(g(c)),value:s,autoComplete:"off",type:"number",onBlur:this.handleInputPositionBlur,onChange:this.handleInputPositionChange,placeholder:"1",pattern:"[0-9]+",onKeyDown:this.onInputPositionKeyDown}),!c&&d.a.createElement("span",{className:"error-message"},p)))),a&&d.a.createElement(D.a,{disabled:f,onClick:this.handleBeforeMerge,className:"EditPanelMergePage__merge-btn ".concat(f?"merge-btn-disable":"")},d.a.createElement("span",{className:"label"},"Merge")),this.state.openUploadFile&&d.a.createElement(Ye.a,{parentOverflow:"window",disablePortal:!1,open:this.state.openUploadFile,anchorEl:this.anchorEl.current,classes:"Upload-file__popper theme-".concat(t),handleClose:this.handleCloseUploadFilePopper},d.a.createElement(Ut.a,null,d.a.createElement(Ft.a,{className:"Upload-file-item",onClick:this.handleUploadLocal},d.a.createElement(Ze.a,{className:"upload-drag-drop",size:16}),d.a.createElement("span",{className:"file-item"},"From your computer")),d.a.createElement(Ft.a,{className:"Upload-file-item",onClick:this.handleUploadGoogle},d.a.createElement("img",{src:Wt.a,className:"UploadDropZone__uploadIcon"}),d.a.createElement("span",{className:"file-item"},"From Google Drive")))),d.a.createElement(x.a,{open:r,onClose:this.closeDialogConfirm,className:"MergeConfirmModal theme-".concat(t),maxWidth:"xs"},d.a.createElement("div",{className:"MergeConfirmModal__container"},d.a.createElement(S.a,{className:"MergeConfirmModal__warning",content:"icon-warning",width:48,height:48}),d.a.createElement("div",{className:"MergeConfirmModal__title"},"Are you sure to merge these pages to this document?"),d.a.createElement("div",{className:"MergeConfirmModal__message"},"This action cannot be undone"),d.a.createElement("div",{className:"MergeConfirmModal__button_group"},d.a.createElement(D.a,{className:"secondary cancel",onClick:this.closeDialogConfirm},"Cancel"),d.a.createElement(D.a,{disabled:o,className:"primary merge",onClick:this.handleMerge},"Merge")))))}}]),n}(u.Component);mn.propTypes=$t,mn.defaultProps={currentDocument:{},openToast:function(){},thumbs:[],themeMode:"",closeElement:function(){},openElement:function(){},currentUser:{},pageEditDisplayMode:"",organizations:{},mergeFeatureLimit:0,setMergeFeatureLimit:function(){}};var pn=mn,fn=Object(o.c)((function(e){return{currentDocument:i.a.getCurrentDocument(e),thumbs:i.a.getThumbs(e),totalPages:i.a.getTotalPages(e),themeMode:i.a.getThemeMode(e),pageEditDisplayMode:i.a.pageEditDisplayMode(e),currentUser:i.a.getCurrentUser(e),organizations:i.a.getOrganizationList(e),mergeFeatureLimit:i.a.getMergeFeatureLimit(e)}}),(function(e){return{dispatch:e,openToast:function(t){return e(s.a.openToast(t))},closeElement:function(t){return e(s.a.closeElement(t))},openElement:function(t){return e(s.a.openElement(t))},setCurrentDocument:function(t){return e(s.a.setCurrentDocument(t))},setMergeFeatureLimit:function(t){return e(s.a.setMergeFeatureLimit(t))}}}))(Object(r.l)(pn));pn.contextType=Ae.a;var gn=n("./node_modules/@material-ui/core/esm/Button/Button.js"),hn=n("./node_modules/file-saver/dist/FileSaver.min.js");function bn(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var En=/^\d+(?:-\d+)?(?:,\h*\d+(?:-\d+)?)*$/g,yn="Please enter a comma or dash separated list of valid page numbers",Cn="Please enter a valid page number",Tn=function(e){var t=e.currentDocument,n=e.totalPages,o=Object(u.useState)([{Id:1,value:"",errorMessage:"",isValidExpression:!1}]),a=w()(o,2),r=a[0],i=a[1],s=!r.map((function(e){return e.isValidExpression})).includes(!1),c=function(e,t){var n=r.find((function(e){return e.Id===t})),o=function(e){var t="";return new RegExp(En).test(e)||(t=yn),t}(e);n.value=e,n.isValidExpression=!o,n.errorMessage=o,i(ft()(r))},l=function(){var e=T()(y.a.mark((function e(n){var o,a,i,s,c,l,u,d,m,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.name,a="Extracted_".concat(F.a.convertExtensionToPdf(o)),i=ve.default.getAnnotationManager(),s=ve.default.getDocument(),c=i.getAnnotationsList().filter((function(e){return n.indexOf(e.PageNumber)>-1})),e.next=7,i.exportAnnotations({annotList:c});case 7:return l=e.sent,e.next=10,s.extractPages(n,l);case 10:u=e.sent,d=new Uint8Array(u),m=new Blob([d],{type:"application/pdf"}),Object(hn.saveAs)(m,a),p=JSON.stringify(ft()(r).map((function(e){return e.value}))),Object(tt.n)(st.a.EventType.DOCUMENT_SPLIT_PAGES,{pages:p});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d.a.createElement("div",{className:"EditPanelSplitExtractPage"},d.a.createElement("p",{className:"EditPanelSplitExtractPage__desc"},"Enter a comma or dash separated list of page numbers to extract"),r.map((function(e,t){return d.a.createElement("div",{key:t,className:"EditPanelSplitExtractPage__range-group"},d.a.createElement("p",null,d.a.createElement("strong",null,"Range ",t+1," ")),d.a.createElement("div",{className:"EditPanelSplitExtractPage__input-group"},d.a.createElement("div",{className:"EditPanelSplitExtractPage__input-group__container"},d.a.createElement("input",{value:e.value,onChange:function(t){return c(t.target.value,e.Id)},className:"EditPanelSplitExtractPage__input ".concat(e.errorMessage&&"input-error"),placeholder:"E.g: 1-3, 5, 7"}),e.value&&d.a.createElement(Yt.a,{onClick:function(){return function(e){c("",e)}(e.Id)},iconSize:14,className:"EditPanelSplitExtractPage__input-group__container__delete",icon:"cross"})),d.a.createElement(Yt.a,{disabled:0===t,icon:"trash",iconSize:18,className:"EditPanelSplitExtractPage__delete ".concat(0===t&&"disabled"),onClick:function(){return t=e.Id,void i(r.filter((function(e){return e.Id!==t})));var t}})),e.errorMessage&&d.a.createElement("div",{className:"EditPanelSplitExtractPage__range-group__error"},e.errorMessage))})),r.length<5&&d.a.createElement(gn.a,{className:"EditPanelSplitExtractPage__add",onClick:function(){i(r.concat({Id:r[r.length-1].Id+1,value:"",errorMessage:"",isValidExpression:!1}))}},d.a.createElement(Ze.a,{className:"add"}),d.a.createElement("span",{className:"text"},"Add Range")),d.a.createElement(it,{icon:"manipulation",onClick:function(){var e=s;if(r.forEach((function(t){!function(e){var t,o=bn(e.split(","));try{for(o.s();!(t=o.n()).done;){var a=t.value.split("-"),r=parseInt(a[0]),i=parseInt(a[1]);if(r>n||i>n||0===r||0===i||r>i)return!1}}catch(s){o.e(s)}finally{o.f()}return!0}(t.value)?(t.errorMessage=Cn,e=!1):t.errorMessage=""})),i(ft()(r)),e){var t=function(){var e=[];return r.forEach((function(t){var n,o=bn(t.value.split(","));try{for(o.s();!(n=o.n()).done;){var a=n.value,r=a.split("-");if(1===r.length)e.push(parseInt(a));else{var i=Ht()(parseInt(r[0]),parseInt(r[1])+1);e.push.apply(e,ft()(i))}}}catch(s){o.e(s)}finally{o.f()}})),e}();l(t)}},disabled:!s},d.a.createElement(D.a,{className:"EditPanelSplitExtractPage__btn",disabled:!s},"Extract")))},Pn={currentDocument:k.a.object,totalPages:k.a.number};Tn.propTypes=Pn,Tn.defaultProps={currentDocument:{},totalPages:0};var wn=Tn,jn=Object(o.c)((function(e){return{currentDocument:i.a.getCurrentDocument(e),totalPages:i.a.getTotalPages(e)}}))(Object(r.l)(wn)),kn={isShowTopBar:k.a.bool},On=[{title:"Merge documents",component:d.a.createElement(fn,null)},{title:"Split / Extract pages",component:d.a.createElement(jn,null)},{title:"Rotate pages",component:d.a.createElement(mt,null)},{title:"Delete page",component:d.a.createElement(Ct,null)},{title:"Move page",component:d.a.createElement(Rt,null)},{title:"Insert blank page",component:d.a.createElement(kt,null)},{title:"Crop page",component:d.a.createElement(Bt,null)}],_n=function(e){var t=e.isShowTopBar;return d.a.createElement("div",{className:pe()({LeftPanelEditMode:!0,"LeftPanelEditMode--no-topbar":!t})},d.a.createElement("h3",{className:"LeftPanelEditMode__header"},"Page Tools"),d.a.createElement("div",{className:"LeftPanelEditMode__body"},On.map((function(e,t){return d.a.createElement(We,{key:t,title:e.title,component:e.component,id:"Merge documents"===e.title?"viewer-merge-docs":null})}))))};_n.propTypes=kn,_n.defaultProps={isShowTopBar:!1};var An=Object(o.c)((function(e){return{isShowTopBar:i.a.getIsShowTopBar(e)}}))(_n),xn=Object(o.c)((function(e){return{currentDocument:i.a.getCurrentDocument(e)}}),null)(Object(r.l)(An)),Sn=n("./src/lumin-components/ZoomOverlay/index.js"),Dn=n("./node_modules/recompose/compose.js"),Rn=n.n(Dn),In=n("./node_modules/lodash/get.js"),Mn=n.n(In),Nn=n("./node_modules/react-input-autosize/lib/AutosizeInput.js"),Ln=n.n(Nn),Bn=n("./node_modules/@material-ui/core/esm/Grid/Grid.js"),Un=n("./src/lumin-components/FavoriteIcon/index.js"),Fn=n("./src/lumin-components/PopperButton/index.js"),Gn=n("./src/lumin-components/LuminButton/index.js"),Hn=n("./src/lumin-components/ProfileButton/index.js"),zn=n("./src/lumin-components/ActionButton/index.js"),Wn=n("./src/lumin-components/ShareModal/index.js"),Vn=n("./src/lumin-components/ShareSettingModal/index.js"),qn=n("./src/lumin-components/MaterialAvatar/index.js"),Yn=n("./node_modules/polished/dist/polished.esm.js"),Zn=n("./node_modules/@material-ui/core/esm/RadioGroup/RadioGroup.js"),Kn=n("./node_modules/@material-ui/core/esm/FormControlLabel/FormControlLabel.js"),Xn=n("./src/lumin-components/CustomRadio/index.js"),Jn=n("./src/lumin-components/CircularLoading/index.js");function Qn(e){var t=e.currentUser,n=e.handleDuplicateFile,o=e.typeOfStorage,a=e.changeSyncFileDestination,r=e.syncFileTo,i=e.themeMode,s=e.openCopyDocumentModal,c=e.loading,l=i===U.N.LIGHT,u=Object(Ue.a)({root:{marginLeft:-8,marginRight:0,height:40,alignItems:"center"},label:{fontSize:"14px",fontWeight:600,marginLeft:8,lineHeight:1,color:l?U.f.PRIMARY:"#fff","&.Mui-disabled":{color:l?Object(Yn.a)(U.f.PRIMARY,.5):Object(Yn.a)(U.f.WHITE,.5)}}})(Kn.a),m=Object(Ue.a)({root:{padding:8}})(Xn.a),p="tour"===e.match.params.documentId||"5cf1b9ee7ba93440bd685ea2"===e.match.params.documentId,f=function(e){a(e.target.value)};return d.a.createElement(Fn.a,{ButtonComponent:"div",popperProps:{negativeArrow:!1},renderPopperContent:function(e){var a=e.closePopper;return t?p?d.a.createElement("div",{className:"popper__container popper__container--lock"},d.a.createElement(Ze.a,{className:"upload icon__48"}),d.a.createElement("h3",{className:"popper__title"},"Feature limit"),d.a.createElement("h4",{className:"popper__message"},"This feature is not available on Document tour")):d.a.createElement("div",{className:"popper__container popper__container--sync"},d.a.createElement("h3",{className:"popper__title"},"Make a Copy"),d.a.createElement("h4",{className:"popper__sub-title"},"Choose a location to copy your document to"),d.a.createElement(Zn.a,{"aria-label":"gender",name:"sync-destination",value:r,onChange:f,className:"MakeACopyButton__radio-group-container"},d.a.createElement(u,{value:U.J.S3,control:d.a.createElement(m,null),label:"Lumin PDF"}),d.a.createElement(u,{value:U.J.GOOGLE,control:d.a.createElement(m,null),label:"Google Drive",disabled:o===U.J.DROPBOX}),d.a.createElement(u,{value:U.J.DROPBOX,control:d.a.createElement(m,null),label:"Dropbox",disabled:o===U.J.GOOGLE})),d.a.createElement(D.a,{disabled:!r,className:"MakeACopyButton__popper-button primary",onClick:function(){return function(e){e(),r!==U.J.S3?n():s()}(a)}},"Choose")):d.a.createElement("div",{className:"popper__container popper__container--lock"},d.a.createElement(Ze.a,{className:"upload icon__48"}),d.a.createElement("h3",{className:"popper__title"},"Sign in required"),d.a.createElement("h4",{className:"popper__message"},"Sign in to unlock this feature"),d.a.createElement(D.a,{className:"primary ButtonMaterial--link"},d.a.createElement(_.a,{to:"/authentication/signin",replace:!0},"Sign In Now")))},onOpen:function(){a(U.J.S3)},disabled:c},d.a.createElement(Gn.a,{"aria-label":"Sync",label:"Make a copy",iconSize:20,type:"outline",hasTooltip:!0,small:!0,square:!0,fontSecondary:!0,className:"MakeACopyButton__sync-btn"},c?d.a.createElement(Jn.a,{color:"inherit",size:16}):d.a.createElement(Ze.a,{className:"Copy",size:16})))}Qn.propTypes={changeSyncFileDestination:k.a.func.isRequired,currentUser:k.a.object,handleDuplicateFile:k.a.func.isRequired,match:k.a.object.isRequired,syncFileTo:k.a.string,themeMode:k.a.string,typeOfStorage:k.a.string,openCopyDocumentModal:k.a.func.isRequired,loading:k.a.bool.isRequired},Qn.defaultProps={syncFileTo:"",typeOfStorage:"",themeMode:"light",currentUser:{}};var $n=Qn,eo=Object(o.c)((function(e){return{themeMode:i.a.getThemeMode(e),currentUser:i.a.getCurrentUser(e)}}))(Object(r.l)($n)),to=n("./src/utils/recordUtil.js"),no=n("./src/helpers/cookie.js"),oo={syncToStorage:k.a.func,typeOfStorage:k.a.string,currentUser:k.a.object};function ao(e){var t=e.syncToStorage,a=e.typeOfStorage,r=Object(u.useState)(!1),s=w()(r,2),c=s[0],l=s[1],m=Object(o.f)(i.a.getOrganizationList,o.d).data,p=function(){var o=T()(y.a.mark((function o(){return y.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l(!0),o.next=3,t();case 3:l(!1),Promise.all([n.e(5),n.e(6)]).then(n.bind(null,"./src/services/recordServices.js")).then((function(t){var n,o=t.default,r=e.currentUser.payment.customerRemoteId||"",i=(null===m||void 0===m?void 0:m.map((function(e){return e.organization.payment.customerRemoteId})).filter(Boolean))||[];o.record({name:"instantSyncClick",attributes:Object(to.b)({source:a,LuminUserId:null===(n=e.currentUser)||void 0===n?void 0:n.clientId,LuminFileId:document._id,StripeCustomerId:i[0]||r,DeviceId:Object(no.a)("_gid")})})}));case 5:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),f=c?d.a.createElement("div",{className:"InstantSyncButton__btn-content"},"Syncing",d.a.createElement(Jn.a,{color:"inherit",size:16})):d.a.createElement("div",{className:"InstantSyncButton__btn-content"},d.a.createElement(S.a,{content:"".concat(a,"-instantSync"),width:24,height:24}),"Sync");return d.a.createElement(Gn.a,{"aria-label":"Sync",type:"text-outline",small:!0,fontSecondary:!0,className:"InstantSyncButton ".concat(c?"InstantSyncButton__sync-btn-loading":"InstantSyncButton__sync-btn"),disabled:c,onClick:p},f)}ao.propTypes=oo,ao.defaultProps={syncToStorage:function(){},typeOfStorage:"",currentUser:{}};var ro=Object(o.c)((function(e){return{currentUser:i.a.getCurrentUser(e)}}),null)(Object(u.memo)(ao)),io=n("./src/lumin-components/NotificationGroupQuery/index.js"),so=n("./node_modules/@material-ui/core/esm/IconButton/IconButton.js");function co(e){var t=e.toggleNotification,n=e.anchorEl,o=e.isActive;return d.a.createElement(so.a,{onClick:t,ref:n,"aria-haspopup":"true",className:"HelpCenter__btn ".concat(o?"HelpCenter__btn-active":"")},d.a.createElement(Ze.a,{className:"question icon__22 ".concat(o?"icon-active":"")}))}co.propTypes={anchorEl:k.a.object,toggleNotification:k.a.func.isRequired,isActive:k.a.bool},co.defaultProps={anchorEl:{},isActive:!1};var lo=co;function uo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re()(e);if(t){var a=re()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe()(this,n)}}var mo=function(e){te()(n,e);var t=uo(n);function n(e){var o;return K()(this,n),o=t.call(this,e),v()($()(o),"handleToggleHelpCenterPopper",(function(){o.setState((function(e){return{helpCenterShow:!e.helpCenterShow}}))})),v()($()(o),"handleClosePopper",(function(){o.setState({helpCenterShow:!1})})),o.state={helpCenterShow:!1},o.anchorEl=d.a.createRef(),o}return J()(n,[{key:"render",value:function(){return d.a.createElement(d.a.Fragment,null,d.a.createElement(lo,{toggleNotification:this.handleToggleHelpCenterPopper,anchorEl:this.anchorEl,isActive:this.state.helpCenterShow}),d.a.createElement(Ye.a,{open:this.state.helpCenterShow,anchorEl:this.anchorEl.current,classes:"HelpCenter__popper",handleClose:this.handleClosePopper},d.a.createElement(Ut.a,null,d.a.createElement(Ft.a,{className:"HelpCenter__popper-item"},d.a.createElement("a",{className:"HelpCenter__popper-btn-actions",href:"https://help.luminpdf.com/",target:"_blank",onClick:this.handleClosePopper,rel:"noreferrer"},"Help Center")),d.a.createElement(Ft.a,null,d.a.createElement("a",{className:"HelpCenter__popper-btn-actions",href:"https://www.luminpdf.com/contact-support/",target:"_blank",onClick:this.handleClosePopper,rel:"noreferrer"},"Contact Support")))))}}]),n}(d.a.PureComponent),po=n("./src/lumin-components/ShareDocumentOrganizationModal/index.js"),fo=n("./src/HOC/withDocumentItemAuthorization/index.js"),go=n("./src/lumin-components/CopyDocumentModal/index.js"),ho=n("./src/lumin-components/Shared/ButtonIcon/index.js"),bo=n("./src/lumin-components/Shared/Tooltip/index.js"),vo=n("./src/helpers/downloadPdf.js"),Eo=n("./src/helpers/print.js"),yo=n("./src/services/dropboxServices.js"),Co=n("./src/services/googleServices.js"),To=n("./src/constants/localStorageKey.js"),Po=n("./src/utils/Factory/EventCollection/ClickEventCollection.js"),wo=n("./src/utils/ViewerBackManager.js"),jo=n("./src/helpers/logger.js"),ko=n("./src/axios/index.js"),Oo=d.a.createContext(),_o=n("./src/redux/store/index.js"),Ao=_o.a.getState,xo="Go to Sign In",So=function(e){return i.a.getCurrentUser(Ao())?"Go to ".concat(e," Documents"):xo},Do=function(e){var t,n=e.split("?"),o=w()(n,2)[1],a=new URLSearchParams(o).get(Je.a.ACTIVED_DOCUMENT_TAB);return e?(t={},v()(t,z.t.INDIVIDUAL,"Personal"),v()(t,z.t.TEAMS,"Team"),v()(t,z.t.ORGANIZATION,"Organization"),v()(t,z.t.STARRED,"Starred"),t)[a]:"Personal"};Do.propTypes={};var Ro=Do;function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Mo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var No={document:k.a.object,currentUser:k.a.object,match:k.a.object.isRequired,refetchDocument:k.a.func,openModal:k.a.func.isRequired,openToast:k.a.func.isRequired,dispatch:k.a.func.isRequired,setCurrentDocument:k.a.func.isRequired,documentStatus:k.a.string,isEmbedPrintSupported:k.a.bool,isShowTopBar:k.a.bool,isPageEditMode:k.a.bool,onlineMembers:k.a.array,isLoadingDocument:k.a.bool,sortStrategy:k.a.string,colorMap:k.a.object,location:k.a.object.isRequired,history:k.a.object.isRequired,withAuthorize:k.a.func.isRequired,isRightPanelOpen:k.a.bool},Lo=function(e){var t,n,o=e.document,a=e.refetchDocument,r=e.currentUser,i=e.openModal,c=e.openToast,l=e.dispatch,m=e.isEmbedPrintSupported,f=e.documentStatus,g=e.isPageEditMode,h=e.setCurrentDocument,b=e.isShowTopBar,v=e.onlineMembers,E=e.isLoadingDocument,C=e.sortStrategy,P=e.colorMap,j=e.match,k=e.location,O=e.history,_=e.withAuthorize,A=Object(u.useState)(!1),x=w()(A,2),S=x[0],D=x[1],R=Object(u.useState)(!1),I=w()(R,2),M=I[0],N=I[1],L=Object(u.useState)(""),B=w()(L,2),F=B[0],G=B[1],H=Object(u.useState)(!1),W=w()(H,2),Y=W[0],Z=W[1],K=tt.o.getFilenameWithoutExtension(o.name),X=Object(u.useState)(K),J=w()(X,2),Q=J[0],$=J[1],ee=Object(u.useState)(U.J.S3),te=w()(ee,2),ne=te[0],oe=te[1],ae=Object(u.useState)(!1),re=w()(ae,2),ie=re[0],se=re[1],ce=Object(u.useState)(wo.a.getLastUrl()),le=w()(ce,2),ue=le[0],de=le[1],me=Ro(ue),pe=new URLSearchParams(k.search).get("action"),fe="share",ge=null===(t=k.state)||void 0===t?void 0:t.openShareModal,he="5cf1b9ee7ba93440bd685ea2"===j.params.documentId||"tour"===j.params.documentId,be=Object(u.useRef)(),Ee=Object(u.useRef)(),ye=Object(u.useRef)();Object(u.useEffect)((function(){var e=tt.o.getFilenameWithoutExtension(o.name);$(e)}),[o.name]),Object(u.useEffect)((function(){E||!ge&&"request_access"!==pe||G(fe)}),[E,ge]),Object(u.useEffect)((function(){return q.a.on(V.b.UPDATE_DOCUMENT,(function(e){switch(e.type){case"rename":o.name=e.name,h(o),o.title="".concat(e.name," - Lumin Pdf");break;case"star":case"updateService":a()}})),"s3"!==o.service&&oe(o.service),function(){q.a.removeListener(V.b.UPDATE_DOCUMENT)}}),[]),Object(u.useEffect)((function(){ie&&a()}),[ie]),Object(u.useEffect)((function(){var e=be.current;return window.addEventListener("click",Ce,!1),null===e||void 0===e||e.addEventListener("wheel",Te),function(){window.removeEventListener("click",Ce,!1),null===e||void 0===e||e.removeEventListener("wheel",Te)}}),[]),Object(u.useEffect)((function(){var e=function(e){e.key===To.a.LAST_ACCESS_DOCUMENT&&de(e.newValue)};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[]);var Ce=function(e){be.current&&be.current.contains(e.target)&&l(s.a.closeElement("annotationPopup"))},Te=function(e){Ee.current.contains(e.target)||e.preventDefault()},Pe=function(){var e=T()(y.a.mark((function e(){var t,n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Q.trim(),n=tt.o.getFilenameWithoutExtension(o.name),a=tt.M.validateDocumentName(t),!Q||!a){e.next=11;break}if(t===n){e.next=9;break}return e.next=7,Ve.a.renameDocument(o,t);case 7:(r=e.sent)?(o.name=r,h(o)):$(n);case 9:e.next=13;break;case 11:c({type:U.A.ERROR,message:"Invalid Name. Document name must be less than 255 characters"}),$(n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){Z(!0)},je=function(e){G(e)},ke=function(){if(G(""),ge){var e=Mo({},k.state);delete e.openShareModal,O.replace(Mo(Mo({},k),{},{state:e}))}},Oe=function(){for(var e=[],t=[],n=0;n<v.length;n++){if(r){if(v[n]._id===r._id)continue}else{var o=ve.default.getAnnotationManager().getCurrentUser().split(" - ")[1];if(v[n]._id===o)continue}e.includes(v[n]._id)||(e.push(v[n]._id),t.push(v[n]))}return t},_e=function(){var e=T()(y.a.mark((function e(){var t,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt.y.getDocumentCanvasByIndex(1,{});case 2:return t=e.sent,e.next=5,tt.o.convertThumnailCanvasToFile(t,tt.o.getFilenameWithoutExtension(o.name));case 5:return n=e.sent,(a=new FormData).append("documentId",o._id),a.append("thumbnailFile",n),e.next=11,ko.a.axiosInstance.post("/document/upload-thumbnail",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=T()(y.a.mark((function e(t,n){var o,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.fileId,a=n.fileMetadata,r=n.fileData,window.gapi.auth2.getAuthInstance().isSignedIn.get()){e.next=7;break}throw jo.a.logInfo({message:U.t.EVENT.HANDLE_UPLOAD_GOOGLE_DRIVE,reason:U.t.Service.GOOGLE_API_INFO,attributes:{fileInfo:n}}),Co.a.requestPermission().then((function(e){jo.a.logInfo({message:U.t.EVENT.REQUEST_PERMISSION,reason:U.t.Service.GOOGLE_API_INFO,attributes:{response:e}}),c({type:U.A.SUCCESS,message:"Request permission successfully"})})).catch((function(e){jo.a.logError({reason:U.t.Service.GOOGLE_API_ERROR,error:e}),c({type:U.A.ERROR,message:"Request permission failed"})})),new Error("REQUEST_PERMISSION");case 7:if(!t){e.next=12;break}return e.next=10,Ve.a.syncFileToDrive({fileId:o,fileMetadata:a,fileData:r});case 10:e.next=14;break;case 12:return e.next=14,Ve.a.insertFileToDrive({fileData:r,fileMetadata:a});case 14:_e();case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(){var e=T()(y.a.mark((function e(t,n){var a,r,i,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.file,r=n.fileId,i=tt.o.convertExtensionToPdf(Q),localStorage.getItem("token-dropbox")){e.next=7;break}throw yo.a.requestPermission(),new Error("REQUEST_PERMISSION");case 7:if(!t){e.next=18;break}return e.next=10,Ve.a.syncFileToDropbox({file:a,fileId:r});case 10:return e.next=12,Ve.a.getDropboxFileInfo(r);case 12:if((s=e.sent).data.name===i){e.next=16;break}return e.next=16,Ve.a.renameFileFromDropbox(o.remoteId,i,s.data.path_display);case 16:e.next=20;break;case 18:return e.next=20,Ve.a.insertFileToDropbox({file:a,fileName:i});case 20:_e();case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(e){var t=Mn()(e,"errors[0].reason")||e.message;"insufficientFilePermissions"!==t?"REQUEST_PERMISSION"!==t&&c({type:U.A.ERROR,message:"Failed to sync your document(s)"}):i({type:U.A.ERROR,message:d.a.createElement(d.a.Fragment,null,d.a.createElement("p",null,"You do not have permission to edit this file on Google Drive."),d.a.createElement("p",null,"Please contact the owner if this Google Drive document and ask them to give you permission to edit this file.")),confirmButtonTitle:"Got it",onConfirm:function(){}})},De=function(){var e=T()(y.a.mark((function e(t){var n,a,r,i,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isOverride,[U.J.DROPBOX,U.J.GOOGLE].includes(ne)){e.next=5;break}return jo.a.logInfo({message:U.t.EVENT.HANDLE_UPLOAD_FILE_TO_REMOTE_REMOTE_INVALID,reason:U.t.Service.GOOGLE_API_INFO}),p.g.info("handleUploadFileToRemote - remote not valid"),e.abrupt("return");case 5:return e.prev=5,e.next=8,tt.u.getDocumentFile(Q);case 8:a=e.sent,e.t0=ne,e.next=e.t0===U.J.GOOGLE?12:e.t0===U.J.DROPBOX?16:19;break;case 12:return r={name:tt.o.convertExtensionToPdf(Q),mimeType:a.type},e.next=15,Ae(n,{fileId:o.remoteId,fileMetadata:r,fileData:a});case 15:return e.abrupt("break",20);case 16:return e.next=18,xe(n,{file:a,fileId:o.remoteId,fileName:Q});case 18:case 19:return e.abrupt("break",20);case 20:n&&q.a.emit(V.a.CLEAR_ANNOTATION_AND_MANIPULATION_OF_DOCUMENT,o._id),i=U.K[ne],s=n?"Your file has been synced to ".concat(i):"A copy is created on your ".concat(i),c({type:U.A.SUCCESS,message:s}),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(5),Se(e.t1);case 29:case"end":return e.stop()}}),e,null,[[5,26]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=T()(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,De({isOverride:!1});case 3:D(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie={updateService:se},Me=o.isOverTimeLimit||E,Ne=function(){r?O.push(ue,{backFromViewer:!0}):O.push(Xe.c.SIGNIN)};return d.a.createElement(Oo.Provider,{value:Ie},d.a.createElement(Bn.a,{className:"HeaderLumin ".concat(b?"":"HeaderLumin--hide"),container:!0,alignItems:"center",ref:be},d.a.createElement(Bn.a,{className:"HeaderLumin__left",item:!0,xs:6},d.a.createElement(bo.a,{title:So(me)},d.a.createElement("button",{className:"HeaderLumin__logo",onClick:Ne},d.a.createElement(Ze.a,{className:"logo",size:32}))),o._id&&d.a.createElement("div",{className:"HeaderLumin__document-info"},d.a.createElement("div",{className:"HeaderLumin__document-name"},d.a.createElement(bo.a,{title:So(me)},d.a.createElement(ho.a,{className:"HeaderLumin__back",onClick:Ne,icon:"prev-page",size:24})),d.a.createElement(Ln.a,{title:o.name,value:Q,type:"text",onChange:function(e){return $(e.target.value)},style:{boxSizing:"content-box"},onBlur:Pe,disabled:he||!_(z.f.Rename),onKeyPress:function(e){return function(e){"Enter"===e.key&&ye.current.blur()}(e)},ref:ye}),r&&!he?d.a.createElement(Un.a,{document:o,callback:function(e){200===e.statusCode&&(o.listUserStar=e.document.listUserStar,h(o))}}):""),d.a.createElement("div",{className:"HeaderLumin__document-storage"},d.a.createElement("span",{className:"HeaderLumin__document-storage-text HeaderLumin__document-storage-text--desktop"},"This file is stored on"," ",z.j[o.service.toUpperCase()]),d.a.createElement("span",{className:"HeaderLumin__document-storage-text HeaderLumin__document-storage-text--tablet"},d.a.createElement(Ze.a,{className:"storage",size:10})," ",z.j[o.service.toUpperCase()]),!g&&f.length>0&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"mini-divider"}),d.a.createElement("span",null,f))))),d.a.createElement(Bn.a,{className:"HeaderLumin__right",item:!0,xs:6},!he&&d.a.createElement("div",{className:"HeaderLumin__online-member"},Oe().length>5&&d.a.createElement(Fn.a,{ButtonComponent:"div",classes:"Collaborator__btn",renderPopperContent:function(){return d.a.createElement(d.a.Fragment,null,r&&r._id?Oe().slice(5).map((function(e,t){return d.a.createElement("p",{key:t},e.name," ")})):Oe().slice(5).map((function(e,t){return d.a.createElement("p",{key:t},"Anonymous ".concat(t+6)," ")})))},popperProps:{parentOverflow:"viewport"}},d.a.createElement("div",{className:"HeaderLumin__online-member__wrapper showmore"},d.a.createElement(qn.a,{containerClasses:"DocumentGridItem_owner_avt",size:32,src:null,hasBorder:!0},"+",Oe().length-5))),Oe().length>5?Oe().slice(0,5).map((function(e,t){return d.a.createElement(qe.a,{key:e._id,content:r&&r._id?"".concat(e.name," ").concat(e.isActive?"":"(idle)"):"Anonymous ".concat(t+1," ").concat(e.isActive?"":"(idle)"),placement:"top"},d.a.createElement("div",{className:"HeaderLumin__online-member__wrapper"},d.a.createElement(qn.a,{secondary:(!r||r&&e._id!==r._id)&&e.isActive,containerClasses:"DocumentGridItem_owner_avt",size:32,src:r&&r._id?tt.d.getAvatar(e.avatarRemoteId):null,hasBorder:!0},r&&r._id?tt.d.getTextAvatar(e.name):tt.d.getTextAvatar("Anonymous ".concat(t+1)))))})):Oe().map((function(e,t){return d.a.createElement(qe.a,{key:e._id,content:r&&r._id?"".concat(e.name," ").concat(e.isActive?"":"(idle)"):"Anonymous ".concat(t+1," ").concat(e.isActive?"":"(idle)"),placement:"top"},d.a.createElement("div",{className:"HeaderLumin__online-member__wrapper"},d.a.createElement(qn.a,{isIdled:!e.isActive,containerClasses:"DocumentGridItem_owner_avt",size:32,src:r&&r._id?tt.d.getAvatar(e.avatarRemoteId):null,hasBorder:!0},r&&r._id?tt.d.getTextAvatar(e.name):tt.d.getTextAvatar("Anonymous ".concat(t+1)))))}))),d.a.createElement("div",{className:"HeaderLumin__button-wrapper ".concat(Me?"HeaderLumin__button-wrapper--disabled":"")},Me&&d.a.createElement("div",{className:"HeaderLumin__button-wrapper-overlay"}),o.isGuest||he?null:d.a.createElement(Gn.a,{className:"HeaderLumin__share-button","aria-label":"Share",label:"Share",icon:"share",small:!0,fontSecondary:!0,onClick:function(){return je(fe)},"data-lumin-btn-name":Po.a.MODAL_SHARE_DOCUMENT_OPEN,"data-lumin-btn-purpose":Po.b[Po.a.MODAL_SHARE_DOCUMENT_OPEN]}),o.service!==U.J.S3&&o.mimeType===Zt.b.PDF?d.a.createElement(ro,{syncToStorage:function(){return De({isOverride:!0})},typeOfStorage:o.service,document:o}):null,d.a.createElement("div",{className:"divider"}),!g&&d.a.createElement(d.a.Fragment,null,d.a.createElement(zn.a,{title:"Open Comment History",icon:"comment-2",iconSize:16,"aria-label":"comment",onClick:function(){var t,n=null===(t=window.document.getElementById("panel-scroll"))||void 0===t?void 0:t.hasChildNodes();e.isRightPanelOpen?(l(s.a.closeElement("rightPanel")),n&&l(s.a.openElement("rightPanelComment"))):(l(s.a.openElement("rightPanel")),l(s.a.closeElements(["rightPanelComment","searchPanel","searchOverlay"])))},className:"HeaderLumin__comment-button square-outline ".concat(e.isRightPanelOpen?"HeaderLumin__comment-button-active":"")}),d.a.createElement("div",{className:"divider"})),d.a.createElement(zn.a,{title:"Download",icon:"download",iconSize:16,"aria-label":"download",onClick:function(){Object(vo.a)(l,{filename:o.name})},className:"HeaderLumin__download-button square-outline"}),d.a.createElement(zn.a,{title:"Print",icon:"print",iconSize:16,"aria-label":"print",onClick:function(){Object(Eo.a)(l,m,C,P,{allPages:!0})},className:"HeaderLumin__print-button square-outline"}),d.a.createElement(eo,{loading:S,handleDuplicateFile:function(){var e=U.K[ne];i({type:U.A.WARNING,confirmButtonTitle:"Copy",cancelButtonTitle:"Cancel",title:"You are creating a copy named ".concat(Q," in ").concat(e),message:"This action will create a copy of this file in ".concat(e,"."),onCancel:function(){},onConfirm:Re})},typeOfStorage:o.service,changeSyncFileDestination:oe,syncFileTo:ne,openCopyDocumentModal:function(){return N(!0)}})),d.a.createElement("div",{className:"divider divider--last"}),d.a.createElement(mo,null),d.a.createElement("div",{ref:Ee},d.a.createElement(io.a,null)),d.a.createElement("div",{style:{marginLeft:8}},d.a.createElement(Hn.a,null)))),(r||"SHARER"===(null===o||void 0===o||null===(n=o.shareSetting)||void 0===n?void 0:n.permission))&&F===fe&&function(){var e=o.documentReference.accountableBy===z.a.PERSONAL;return[z.e.ORGANIZATION,z.e.ORGANIZATION_TEAM].includes(o.documentType)?d.a.createElement(po.a,{open:!0,currentDocument:o,onClose:ke,handleOpenShareSettingModal:we,isExternalOpened:e}):d.a.createElement(Wn.a,{open:!0,onClose:ke,openShareSettingModal:we,currentDocument:o,refetchDocument:a})}(),Y&&d.a.createElement(Vn.a,{open:!0,refetchDocument:a,currentDocument:o,shareSetting:o.shareSetting,updateDocument:h,handleClose:function(){Z(!1)}}),r&&M&&d.a.createElement(go.a,{visible:!0,document:o,onClose:function(){return N(!1)}}))};Lo.propTypes=No,Lo.defaultProps={document:{},currentUser:{},refetchDocument:function(){},documentStatus:"",isEmbedPrintSupported:!1,isShowTopBar:!1,isPageEditMode:!1,onlineMembers:[],isLoadingDocument:!1,sortStrategy:"",colorMap:{},isRightPanelOpen:!1};var Bo=Object(fo.a)(Lo),Uo=Rn()(Object(o.c)((function(e){return{colorMap:i.a.getColorMap(e),sortStrategy:i.a.getSortStrategy(e),currentUser:i.a.getCurrentUser(e),isEmbedPrintSupported:i.a.isEmbedPrintSupported(e),isPageEditMode:i.a.isPageEditMode(e),isShowTopBar:i.a.getIsShowTopBar(e),isRightPanelOpen:i.a.isElementOpen(e,"rightPanel"),document:i.a.getCurrentDocument(e)}}),(function(e){return{dispatch:e,closeElements:function(t){return e(s.a.closeElements(t))},openToast:function(t){return e(s.a.openToast(t))},openModal:function(t){return e(s.a.openModal(t))},setCurrentUser:function(t){return e(s.a.setCurrentUser(t))},setCurrentDocument:function(t){return e(s.a.setCurrentDocument(t))},resetSubMenu:function(){return e(s.a.resetSubMenu())}}})),r.l,ce.a)(Bo),Fo=n("./src/lumin-components/ViewerBanner/index.js"),Go=n("./src/lumin-components/PrintHandler/index.js"),Ho=n("./src/lumin-components/WarningBanner/index.js"),zo=n("./src/helpers/eventHandler.js"),Wo=n("./src/helpers/fireEvent.js"),Vo=n("./src/constants/banner.js"),qo=n("./src/HOC/withWarningBanner/index.js"),Yo=(n("./src/constants/pikaday.scss"),n("./src/constants/quill.scss"),d.a.lazy((function(){return Promise.all([n.e(1),n.e(2),n.e(23)]).then(n.bind(null,"./src/lumin-components/AnnotationPopup/index.js"))}))),Zo=d.a.lazy((function(){return n.e(31).then(n.bind(null,"./src/lumin-components/ContextMenuPopup/index.js"))})),Ko=d.a.lazy((function(){return n.e(113).then(n.bind(null,"./src/lumin-components/CreateBookmarkModal/index.js"))})),Xo=d.a.lazy((function(){return Promise.all([n.e(11),n.e(22),n.e(32)]).then(n.bind(null,"./src/lumin-components/EditModeGridView/index.js"))})),Jo=d.a.lazy((function(){return Promise.all([n.e(1),n.e(4),n.e(7),n.e(10),n.e(47)]).then(n.bind(null,"./src/lumin-components/LeftPanelLumin/index.js"))})),Qo=d.a.lazy((function(){return Promise.all([n.e(1),n.e(4),n.e(7),n.e(10),n.e(52)]).then(n.bind(null,"./src/lumin-components/RightPanelLumin/index.js"))})),$o=d.a.lazy((function(){return Promise.all([n.e(1),n.e(10),n.e(2),n.e(62)]).then(n.bind(null,"./src/lumin-components/CommentPanel/index.js"))})),ea=d.a.lazy((function(){return n.e(118).then(n.bind(null,"./src/lumin-components/SearchOverlay/index.js"))})),ta=d.a.lazy((function(){return Promise.all([n.e(1),n.e(4),n.e(2),n.e(28)]).then(n.bind(null,"./src/lumin-components/SignatureModalLumin/index.js"))})),na=d.a.lazy((function(){return n.e(29).then(n.bind(null,"./src/lumin-components/SignatureOverlayLumin/index.js"))})),oa=d.a.lazy((function(){return n.e(27).then(n.bind(null,"./src/lumin-components/ViewControlsOverlayLumin/index.js"))})),aa=d.a.lazy((function(){return n.e(26).then(n.bind(null,"./src/lumin-components/TextPopup/index.js"))})),ra=d.a.lazy((function(){return Promise.all([n.e(1),n.e(2),n.e(122)]).then(n.bind(null,"./src/lumin-components/ToolStylePopupLumin/index.js"))})),ia=d.a.lazy((function(){return Promise.all([n.e(1),n.e(2),n.e(106)]).then(n.bind(null,"./src/lumin-components/ToolsOverlayLumin/index.js"))})),sa=d.a.lazy((function(){return n.e(34).then(n.bind(null,"./src/lumin-components/StampOverlay/index.js"))})),ca=d.a.lazy((function(){return n.e(24).then(n.bind(null,"./src/lumin-components/SearchPanel/index.js"))})),la=d.a.lazy((function(){return n.e(33).then(n.bind(null,"./src/lumin-components/CopyTextHandler/index.js"))})),ua=d.a.lazy((function(){return n.e(119).then(n.bind(null,"./src/lumin-components/SignInUseCommentModal/index.js"))})),da=d.a.lazy((function(){return Promise.all([n.e(18),n.e(70)]).then(n.bind(null,"./src/lumin-components/ViewerNewFeatureGuideModal/index.js"))})),ma={currentDocument:k.a.object,onlineMembers:k.a.array,refetchDocument:k.a.func,documentStatus:k.a.string,isLoadingDocument:k.a.bool,isOpenCommentList:k.a.bool,handleToggleListComment:k.a.func},pa=function(e){var t=e.currentDocument,n=e.onlineMembers,a=e.refetchDocument,r=e.documentStatus,s=e.isLoadingDocument,c=e.isOpenCommentList,l=e.handleToggleListComment;Object(u.useEffect)((function(){return Object(Wo.a)("viewerLoaded"),zo.b}),[]),Object(u.useEffect)((function(){s?Object(zo.b)(!0):Object(zo.a)(!0)}),[s]);var m=Object(o.f)((function(e){return[i.a.isPageEditMode(e),i.a.pageEditDisplayMode(e),i.a.getThemeMode(e),i.a.getCurrentUser(e)]}),o.d),p=w()(m,4),f=p[0],g=p[1],h=p[2],b=p[3],v=f&&"Grid"===g;return t?d.a.createElement("div",{className:"App-container"},d.a.createElement(Ho.a,{wrapper:function(e){return d.a.createElement("div",{className:"BillingWarning__container"},e.children)},banner:Vo.c.DOWNLOAD_APP}),d.a.createElement("div",{className:"App theme-".concat(h)},d.a.createElement(Uo,{refetchDocument:a,onlineMembers:n,documentStatus:r,isLoadingDocument:s,handleToggleListComment:l,isOpenCommentList:c}),d.a.createElement(ue.a,{currentDocument:t,isLoadingDocument:s}),d.a.createElement(u.Suspense,{fallback:d.a.createElement("div",null)},!s&&d.a.createElement($o,null)),f?d.a.createElement(xn,null):d.a.createElement(u.Suspense,{fallback:d.a.createElement("div",null)},d.a.createElement(Jo,null),d.a.createElement(Qo,null)),d.a.createElement(Fo.a,null),d.a.createElement(Me,{currentDocument:t,isLoadingDocument:s}),d.a.createElement(u.Suspense,{fallback:d.a.createElement("div",null)},d.a.createElement(Yo,null),d.a.createElement(Ko,null),!f&&d.a.createElement(Zo,{isLoadingDocument:s}),v&&d.a.createElement(Xo,null),d.a.createElement(ea,null),d.a.createElement(ta,null),d.a.createElement(na,null),d.a.createElement(sa,null),d.a.createElement(aa,null),d.a.createElement(ra,null),d.a.createElement(ia,null),d.a.createElement(oa,null),d.a.createElement(ca,null),d.a.createElement(la,null),d.a.createElement(ua,null),b&&!s&&d.a.createElement(da,null)),d.a.createElement(de.a,null),d.a.createElement(Sn.a,null)),d.a.createElement(Go.default,null)):null};pa.propTypes=ma,pa.defaultProps={currentDocument:{},onlineMembers:[],refetchDocument:function(){},documentStatus:"",isLoadingDocument:!1,isOpenCommentList:!1,handleToggleListComment:function(){}};var fa=Object(qo.b)(pa),ga=n("./src/graphql/DocumentGraph.js"),ha=n("./src/lumin-components/MobileAppCover/index.js"),ba=n("./src/lumin-components/DisconnectToast/index.js"),va=n("./src/lumin-components/AccessUpdateToast/index.js"),Ea=n("./src/lumin-components/CustomHeader/index.js"),ya=n("./src/lumin-components/StartTrialModal/index.js"),Ca=n("./src/lumin-components/GoogleRatingModal/index.js"),Ta=n("./src/utils/error.js"),Pa=n("./src/constants/urls.js"),wa=n("./src/constants/errorCode.js"),ja=n("./src/constants/customDataConstant.js"),ka=n("./src/constants/actionPriority.js"),Oa=n("./src/constants/supportedFiles.js"),_a=n("./node_modules/lodash/cloneDeep.js"),Aa=n.n(_a),xa=n("./node_modules/lodash/isEmpty.js"),Sa=n.n(xa),Da=n("./src/screens/Viewer/ViewerHOC.js"),Ra=n("./src/screens/Viewer/undoRedo.js"),Ia=n("./src/screens/Viewer/bookmarks.js"),Ma=n("./src/helpers/MentionsManager.js");function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ba=function(){function e(){var t=this;if(K()(this,e),v()(this,"overrideTools",(function(){window.Tools.FreeHandCreateTool.prototype.createDelay=0})),v()(this,"onPageCompleted",(function(){t.specificToolActive?t.disabledField():t.enabledField()})),v()(this,"onToolModeUpdated",(function(e,n){t.specificToolActive=!1,n&&"AnnotationCreateSignature"===n.name&&t.enabledField(),e&&"AnnotationCreateSignature"===e.name&&(t.specificToolActive=!0,t.disabledField())})),v()(this,"disabledField",(function(){var e=document.getElementsByClassName("text");[].forEach.call(e,(function(e){e&&e.firstChild&&t.fields&&(t.fields.add(e.id),e.firstChild.disabled=!0)}))})),v()(this,"enabledField",(function(){t.fields.forEach((function(e){var n=document.getElementById(e);n&&n.firstChild&&(n.firstChild.disabled=!1,t.fields.delete(e))}))})),v()(this,"initialFreeTextDomArray",(function(){t.freeTextDom=Array(ve.default.getTotalPages()).fill({})})),v()(this,"keepFreeTextDomElement",(function(e,n,o){var a=o.imported;"delete"===n||a||e.filter((function(e){return e instanceof window.Annotations.FreeTextAnnotation})).map((function(e){var n=e.Id,o=e.PageNumber,a=document.getElementById("freetext-editor-".concat(n));a&&(t.freeTextDom[o-1]=La(La({},t.freeTextDom[o-1]),{},v()({},n,a)))}))})),v()(this,"appendFreeTextDomElement",(function(e){var n=t.freeTextDom[e];if(n){var o=Object.keys(n);o.length&&o.forEach((function(t){if(!document.getElementById("freetext-editor-".concat(t))&&ve.default.getAnnotationManager().getAnnotationById(t)){var o=document.getElementById("pageWidgetContainer".concat(e));o&&n[t]&&o.appendChild(n[t])}}))}})),v()(this,"destructor",(function(){ve.default.docViewer.removeEventListener("pageComplete",t.onPageCompleted),ve.default.docViewer.removeEventListener("toolModeUpdated",t.onToolModeUpdated),ve.default.docViewer.removeEventListener("native_manipUpdated",t.initialFreeTextDomArray),ve.default.docViewer.removeEventListener("pageComplete",t.appendFreeTextDomElement),ve.default.removeEventListener("annotationChanged",t.keepFreeTextDomElement)})),e.instance)return e.instance;e.instance=this,this.tools=[window.Tools.AnnotationEditTool,window.Tools.AreaMeasurementCreateTool,window.Tools.ArrowCreateTool,window.Tools.CalloutCreateTool,window.Tools.DistanceMeasurementCreateTool,window.Tools.EllipseCreateTool,window.Tools.EraserTool,window.Tools.FreeHandCreateTool,window.Tools.FreeTextCreateTool,window.Tools.LineCreateTool,window.Tools.MarqueeZoomTool,window.Tools.PerimeterMeasurementCreateTool,window.Tools.RectangleCreateTool,window.Tools.RedactionCreateTool,window.Tools.StickyCreateTool,window.Tools.TextAnnotationCreateTool,window.Tools.TextHighlightCreateTool,window.Tools.TextSelectTool,window.Tools.TextSquigglyCreateTool,window.Tools.TextStrikeoutCreateTool,window.Tools.TextTool,window.Tools.TextUnderlineCreateTool],this.genericTools=[window.Tools.PolygonCloudCreateTool,window.Tools.PolygonCreateTool,window.Tools.PolylineCreateTool],this.freeTextDom=[],this.specificToolActive=!1,this.fields=new Set,this.autoCreateText=0,this.overrideTools();var n=window.Annotations.ChoiceWidgetAnnotation.prototype.createInnerElement;window.Annotations.ChoiceWidgetAnnotation.prototype.createInnerElement=function(){var e,t,o,a=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)));if("SELECT"===a.tagName&&50===(null===a||void 0===a||null===(e=a.children)||void 0===e?void 0:e.length)&&(null===a||void 0===a||null===(t=a.children)||void 0===t?void 0:t.length)!==(null===(o=this.options)||void 0===o?void 0:o.length))for(var r=50,i=r;i<this.options.length;i++){var s=this.options[i];if(null!==s&&void 0!==s&&s.value&&s.displayValue){var c=document.createElement("option");c.value=s.value,c.text=s.displayValue,a.appendChild(c)}}return a},window.Annotations.StickyAnnotation.prototype.draw=function(e){if(!this.isReply()){var t=new Path2D("M9.875 1.668h.255c4.5.068 8.134 3.703 8.202 8.202.07 4.61-3.558 8.372-8.167 8.462-.677.013-1.335-.055-1.967-.194-1.07-.236-2.159-.376-3.254-.376H2.826c-.325 0-.588-.263-.588-.588v-2.118c0-1.095-.14-2.184-.376-3.254-.14-.632-.207-1.29-.194-1.967.09-4.61 3.852-8.238 8.462-8.167zM6.078 9.146c-.713 0-1.29.578-1.29 1.29 0 .714.577 1.292 1.29 1.292.713 0 1.29-.578 1.29-1.291s-.577-1.291-1.29-1.291zm3.65 0c-.713 0-1.29.578-1.29 1.29 0 .714.577 1.292 1.29 1.292.713 0 1.291-.578 1.291-1.291s-.578-1.291-1.29-1.291zm3.65 0c-.712 0-1.29.578-1.29 1.29 0 .714.578 1.292 1.29 1.292.714 0 1.292-.578 1.292-1.291s-.578-1.291-1.291-1.291z");e.translate(this.X,this.Y),e.strokeStyle="rgb(0, 0, 0)",e.fillStyle=this.StrokeColor.toString(),e.globalAlpha=Number(this.Opacity),e.scale(1.5,1.5),e.translate(1,0),e.fill(t)}};var o=window.Annotations.FreeTextAnnotation.prototype.deserialize;window.Annotations.FreeTextAnnotation.prototype.deserialize=function(e){var t=[].find.call(e.children,(function(e){return"defaultstyle"===e.tagName}))||document.createElement("defaultstyle"),n=[].find.call(e.children,(function(e){return"defaultappearance"===e.tagName}))||document.createElement("defaultappearance");if(!t.textContent){var a=document.createTextNode("font: Helvetica 9pt; text-align: left; color: #E44234");t.appendChild(a),e.appendChild(t)}if(!n.textContent){var r=document.createTextNode("0 0 0 rg /Helvetica 9 Tf");n.appendChild(r),e.appendChild(n)}return o.call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))};var a=window.Annotations.MarkupAnnotation.prototype.deserialize;window.Annotations.EllipseAnnotation.prototype.deserialize=function(){a.apply(this,arguments)};var r=window.Annotations.FreeTextAnnotation.prototype.resize;window.Annotations.FreeTextAnnotation.prototype.resize=function(){r.apply(this,arguments)};var i=window.Annotations.RedactionAnnotation.prototype.deserialize;window.Annotations.RedactionAnnotation.prototype.deserialize=function(){if(this.getCustomData(ja.c.APPLIED.key===ja.c.APPLIED.truthyValue)){var e=this.FillColor;this.FillDisplayColor=new window.Annotations.Color(e.R,e.G,e.B,e.A)}return i.call.apply(i,[this].concat(Array.prototype.slice.call(arguments)))};var c=window.Annotations.FreeTextAnnotation.RichTextEditor.prototype.getContents;window.Annotations.FreeTextAnnotation.RichTextEditor.prototype.getContents=function(){return c?c.call.apply(c,[this].concat(Array.prototype.slice.call(arguments))):""};var l=window.Annotations.BoxControlHandle.prototype.draw;window.Annotations.BoxControlHandle.prototype.draw=function(){this.width=9,this.height=9,l.call.apply(l,[this].concat(Array.prototype.slice.call(arguments)))};var u=window.Actions.URI.prototype.onTriggered;return window.Actions.URI.prototype.onTriggered=function(e){var t=arguments,n=this,o=e.getActions().U[0].uri,a=new RegExp(/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/gm);if(a.test(o)){var r=new URL(o),i=r.hostname.replace("www.","");"luminpdf.com"!==i?_o.a.dispatch(s.a.openModal({type:U.A.WARNING,title:" You are leaving Lumin PDF",message:" Following this link opens a new browser tab and sends you to a website outside of Lumin PDF ",cancelButtonTitle:"Cancel",confirmButtonTitle:"Proceed",onCancel:function(){return _o.a.dispatch(s.a.closeModal())},onConfirm:function(){u.call.apply(u,[n].concat(ft()(t)))},isFullWidthButton:!0})):u.call.apply(u,[this].concat(Array.prototype.slice.call(arguments)))}},ve.default.CoreControls.disableEmbeddedJavaScript(),ve.default.CoreControls.SetCachingLevel(10),ve.default.addEventListener("annotationChanged",this.keepFreeTextDomElement),ve.default.docViewer.addEventListener("pageComplete",this.appendFreeTextDomElement),ve.default.docViewer.addEventListener("native_manipUpdated",this.initialFreeTextDomArray),Ma.a.initialize(_o.a,ve.default.getAnnotationManager()),this}return J()(e,[{key:"activeFormField",value:function(){var e=this;this.tools.forEach((function(t){var n=t.prototype.mouseLeftDown;n&&(t.prototype.mouseLeftDown=function(){n.apply(this,arguments),e.disabledField()});var o=t.prototype.mouseLeftUp;o&&(t.prototype.mouseLeftUp=function(){o.apply(this,arguments),e.enabledField()})})),this.genericTools.forEach((function(t){var n=t.prototype.mouseLeftDown;n&&(t.prototype.mouseLeftDown=function(){n.apply(this,arguments),e.disabledField()});var o=t.prototype.mouseDoubleClick;o&&(t.prototype.mouseDoubleClick=function(){o.apply(this,arguments),e.enabledField()})})),ve.default.docViewer.addEventListener("pageComplete",this.onPageCompleted),ve.default.docViewer.addEventListener("toolModeUpdated",this.onToolModeUpdated)}}]),e}(),Ua=n("./node_modules/mime-types/index.js"),Fa=n.n(Ua),Ga=n("./src/helpers/getRichTextCSSStyle.js"),Ha=function(e){ve.default.getAnnotationManager().getAnnotationsList().forEach((function(t){t.Listable=!e,t.IsModified=!1}))},za=function(e){var t=ve.default.getAnnotationManager(),n=ve.default.getDocument(),o=e.PageNumber,a=n.getPageInfo(o),r=n.getPageMatrix(o),i=n.getPageRotation(o);e.fitText(a,r,i),t.redrawAnnotation(e)};function Wa(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Va(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Za(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=re()(e);if(t){var a=re()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return oe()(this,n)}}var Ka=parseInt(6e5),Xa=function(e){te()(n,e);var t=Za(n);function n(e){var o;return K()(this,n),o=t.call(this,e),v()($()(o),"handleLocalStorageChange",(function(e){if("logout"===e.key){var t=o.props.openModal,n={type:U.A.WARNING,title:"Session expire warning",message:"Your account session is expired. Do you want to login to continue your work?",confirmButtonTitle:"OK",onCancel:function(){return window.location.replace(Pa.j)},disableBackdropClick:!0,disableEscapeKeyDown:!0,onConfirm:function(){window.location.href="/authentication/signin"}};!localStorage.getItem("token")&&localStorage.getItem("logout")&&t(n)}})),v()($()(o),"handleRequestAccessCheck",(function(e,t){var n=o.props,a=n.currentUser,r=n.match,i=n.history,s=n.location,c=new URLSearchParams(s.search).get("requesterId"),l=r.params.documentId;return e!==U.I.FORBIDDEN?i.push({pathname:"/documents/notFound",state:{message:t}}):a?i.push("/request-access?docId=".concat(l)):i.push(c?"/authorize-requested?docId=".concat(l,"&requesterId=").concat(c,"&action=request_access"):"/authorize-requested?docId=".concat(l))})),v()($()(o),"isCurrentUser",(function(e){var t=o.props.currentUser;return(null===t||void 0===t?void 0:t._id)===e})),v()($()(o),"showAccessUpdateToast",(function(e){o.isCurrentUser(e)&&o.setState({showAccessUpdateToast:!0})})),v()($()(o),"setHoveringRedactionAnnotation",(function(e){var t;!function(e,t){e.length&&e.forEach((function(e){e.IsHoverable=t}))}(null===(t=ve.default.getAnnotationManager().getAnnotationsList())||void 0===t?void 0:t.filter((function(e){return e.Subject===z.g.REDACTION})),e)})),v()($()(o),"setupDocumentStatus",T()(y.a.mark((function e(){var t,n,a,r,i,s,c,l,u,d,m,f,g,h;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.props,n=t.currentUser,a=t.organizations,o.currentDocument.statusUpdated||!a.data||Sa()(o.currentDocument)){e.next=20;break}return o.currentDocument.statusUpdated=!0,s=o.currentDocument,c=o.currentDocument._id,e.next=7,p.c.getDocumentInfo({document:s,userInfo:n,organizations:a.data});case 7:l=e.sent,u=w()(l,2),d=u[0],m=u[1],f=Ya(Ya({},s),{},{documentStatus:d,documentReference:m}),o.currentDocument=f,o.props.setCurrentDocument(f),g=(null===(r=s.shareSetting)||void 0===r?void 0:r.linkType)===U.h.ANYONE&&o.userRole===(null===(i=s.shareSetting)||void 0===i?void 0:i.permission),h=g?c:(null===n||void 0===n?void 0:n._id)||c,o.props.subcribeEventOnDocument(m,{showAccessUpdateToast:function(){return o.setState({showAccessUpdateToast:!0})}}),o.props.subcribeEventDeleteDocument(h,(function(){return o.setState({showAccessUpdateToast:!0})})),o.setTool(),Ma.a.initUserData({currentDocument:o.currentDocument});case 20:case"end":return e.stop()}}),e)})))),v()($()(o),"onFinishRendering",(function(){if(Y.a.isExist(W.e)){Y.a.finishTracking(W.b);var e=Y.a.trackingTimeOf(W.e),t=Y.a.trackingTimeOf(W.a),n=Y.a.trackingTimeOf(W.b),a=ve.default.getPageInfo(1),r=a.width,i=a.height,s=!!ve.default.getDocument().isLinearized()&&ve.default.getDocument().isLinearized().toString();Object(tt.n)(W.c,{isLinearized:s.toString(),source:o.props.currentDocument.service},{timeToStartDownloadMS:e,timeToDownloadCompletedMS:t,timeToFirstPageRenderedMS:n,PDFPageWidth:r,PDFPageHeight:i,sizeMB:o.currentDocument.size/1048576}),Y.a.unRegister(W.e),Y.a.unRegister(W.a),Y.a.unRegister(W.b)}})),v()($()(o),"onBeforeDocumentLoaded",(function(){Y.a.finishTracking(W.a)})),v()($()(o),"onWindowUnload",(function(){o.recordRenderPDFDocument()})),v()($()(o),"onWindowBeforeUnload",(function(e){(o.state.documentStatus===z.d.SAVING||o.props.isNetworkDisconnected)&&(e.preventDefault(),e.returnValue="")})),v()($()(o),"recordRenderPDFDocument",(function(){Y.a.isExist(W.d)&&Object(tt.n)(W.d,Ya({},o.sharedPinpointAttributes),{waitingTimeInMS:Y.a.trackingTimeOf(W.d)})})),v()($()(o),"reSignIn",(function(){var e=window.gapi.auth2.getAuthInstance();e.disconnect(),e.signIn().then((function(e){jo.a.logInfo({message:U.t.EVENT.RE_SIGN_IN,reason:U.t.Service.GOOGLE_API_INFO,attributes:{response:e}}),window.location.reload()})).catch((function(e){window.location.reload(),jo.a.logError({reason:U.t.Service.GOOGLE_API_ERROR,error:e})}))})),v()($()(o),"handleUnAuthorizedDriveError",function(){var e=T()(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.e.getCurrentRemoteEmail();case 2:n=e.sent,o.props.openModal({type:U.A.ERROR,title:"Can not open file",message:"".concat(tt.o.getShortFilename(t.name)," is uploaded by ").concat(t.remoteEmail,".\n      You are logged in ").concat(n,"."),onCancel:function(){},confirmButtonTitle:"Re-Sign in",onConfirm:o.reSignIn});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v()($()(o),"handleSignInDriveRequiredError",(function(){window.gapi.auth2.getAuthInstance().signIn().then((function(e){jo.a.logInfo({message:U.t.EVENT.HANDLE_SIGN_IN_DRIVE_REQUIRED_ERROR,reason:U.t.Service.GOOGLE_API_INFO,attributes:{response:e}}),window.location.reload()})).catch((function(e){return jo.a.logError({reason:U.t.Service.GOOGLE_API_ERROR,error:e}),"popup_closed_by_user"===Mn()(e,"error")?window.close():window.location.reload()}))})),v()($()(o),"onPageComplete",(function(e){var t=o.state.listPageDeleted[e];t&&o.lockPage(t),o.bookmarksInstance.setUpBookmark(e)})),v()($()(o),"updateListDeletedPage",(function(e,t){var n=ve.default.getTotalPages(),a={},r=o.state.listPageDeleted;switch(t){case U.u.MOVE_PAGE:var i=e.pagesToMove,s=e.insertBeforePage;Object.keys(r).forEach((function(e){var t=r[e];o.unLockPage(t),i===t?r[e]=s:s<=t&&i>t?r[e]+=1:s>=t&&i<t&&(r[e]-=1),a[r[e]]=r[e],o.lockPage(a[r[e]])})),o.setListPageDeleted(a);break;case U.u.REMOVE_PAGE:var c=e.pagesRemove[0];c===n+1?(o.unLockPage(n-1),delete r[n+1]):(o.unLockPage(r[c]),delete r[c]),Object.keys(r).forEach((function(e){o.unLockPage(r[e]),r[e]>=c&&(r[e]-=1),a[r[e]]=r[e],o.lockPage(a[r[e]])})),o.setListPageDeleted(a);break;case U.u.INSERT_BLANK_PAGE:var l=e.insertPages[0];Object.keys(r).forEach((function(e){r[e]>=l&&(o.unLockPage(r[e]),r[e]+=1),a[r[e]]=r[e],o.lockPage(a[r[e]])})),o.setListPageDeleted(a)}})),v()($()(o),"updatePageWillBeDeleted",(function(e,t){var n=o.state.pageWillBeDeleted;switch(t){case U.u.MOVE_PAGE:var a=e.pagesToMove,r=e.insertBeforePage;a===n?o.setState({pageWillBeDeleted:r}):r<=n&&a>n?o.setState({pageWillBeDeleted:n+1}):r>=n&&a<n&&o.setState({pageWillBeDeleted:n-1});break;case U.u.REMOVE_PAGE:e.pagesRemove[0]<=n&&o.setState({pageWillBeDeleted:n-1});break;case U.u.INSERT_BLANK_PAGE:e.insertPages[0]<=n&&o.setState({pageWillBeDeleted:n+1})}})),v()($()(o),"updatePageWillBeCropped",(function(e,t){var n=o.state.pageWillBeCropped;switch(t){case U.u.MOVE_PAGE:var a=e.pagesToMove,r=e.insertBeforePage;a===n.position?o.setState({pageWillBeCropped:Ya(Ya({},n),{},{position:r})}):r<=n.position&&a>n.position?o.setState({pageWillBeCropped:Ya(Ya({},n),{},{position:n.position+1})}):r>=n.position&&a<n.position&&o.setState({pageWillBeCropped:Ya(Ya({},n),{},{position:n.position-1})});break;case U.u.REMOVE_PAGE:e.pagesRemove[0]<=n.position&&o.setState({pageWillBeCropped:Ya(Ya({},n),{},{position:n.position-1})});break;case U.u.INSERT_BLANK_PAGE:e.insertPages[0]<=n.position&&o.setState({pageWillBeCropped:Ya(Ya({},n),{},{position:n.position+1})})}})),v()($()(o),"setListPageDeleted",(function(e){o.setState({listPageDeleted:e})})),v()($()(o),"setPageWillBeDeleted",(function(e){o.setState({pageWillBeDeleted:e})})),v()($()(o),"setPageWillBeCropped",(function(e){o.setState({pageWillBeCropped:e})})),v()($()(o),"lockPage",(function(e){var t=document.getElementById("pageContainer".concat(e));t.classList.add("pageContainer-blocked");var n=t.querySelector(".auxiliary");n&&n.parentElement.removeChild(n)})),v()($()(o),"unLockPage",(function(e){ve.default.refreshAll(),ve.default.updateView(),document.getElementById("pageContainer".concat(e)).classList.remove("pageContainer-blocked")})),v()($()(o),"handleMessageDropbox",(function(e){window.location.origin!==e.origin||(e.data.errorMessage?(console.log(e.data.errorMessage),o.props.openToast({type:U.A.ERROR,message:"Request permission failed"})):e.data.token&&(localStorage.setItem("token-dropbox",e.data.token),o.props.openToast({type:U.A.SUCCESS,message:"Request permission successfully"})))})),v()($()(o),"onAnnotationDoubleClicked",(function(e){if(e instanceof window.Annotations.FreeTextAnnotation){if(e.isAutoSized()&&ve.default.canModify(e)){var t=e.Width;e.setModified=!0,za(e),ve.default.getAnnotationManager().trigger("annotationChanged",[[e],"modify",{}]),e.setWidth(t)}o.editedFreeText=e.PageNumber,document.getElementById("pageWidgetContainer".concat(e.PageNumber)).style.zIndex=60}})),v()($()(o),"onRectangleOrEllipseAdded",(function(){ve.default.getAnnotationsList().filter((function(e){return e.Subject===z.g.RECTANGLE||z.g.ELLIPSE})).forEach((function(e){e instanceof window.Annotations.EllipseAnnotation&&e.disableRotationControl(),e.IsModified=!1}))})),v()($()(o),"onFreeTextAdded",(function(e){o.editedFreeText=e.PageNumber,document.getElementById("pageWidgetContainer".concat(e.PageNumber)).style.zIndex=60,e.isAutoSized()&&za(e)})),v()($()(o),"onCommentDeleted",(function(e){var t=e.annotation instanceof window.Annotations.TextHighlightAnnotation&&e.annotation.getCustomData(ja.b.IS_HIGHLIGHT_COMMENT.key);(e.annotation instanceof window.Annotations.StickyAnnotation||t)&&e.skipAnnotation()})),v()($()(o),"loadDocumentToViewer",function(){var e=T()(y.a.mark((function e(t){var n,a,r,i,s,c,l,u,d,m,f;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.props,a=n.openModal,r=n.setCurrentDocument,i=n.dispatch,Object(tt.f)(t.mimeType)){e.next=5;break}return s={type:U.A.ERROR,title:"File type is not supported",message:"Lumin only supports .pdf .docx .xlsx .pptx .png .jpg .jpeg file types.",confirmButtonTitle:"Got it",disableBackdropClick:!0,disableEscapeKeyDown:!0,onConfirm:function(){return window.close()}},a(s),e.abrupt("return");case 5:if(t.service!==z.r.google){e.next=17;break}if(window.gapi.auth2.getAuthInstance().isSignedIn.get()){e.next=10;break}throw c=new Error("signinDriveRequired"),jo.a.logError({reason:U.t.Service.GOOGLE_API_ERROR,error:c}),c;case 10:return e.next=12,p.e.getCurrentRemoteEmail();case 12:if(l=e.sent,t.remoteEmail===l){e.next=17;break}throw u=new Error("unauthorized"),jo.a.logError({error:u,reason:U.t.Service.GOOGLE_API_ERROR}),u;case 17:if(r(t),d={filename:t.name,documentId:t._id},m=Fa.a.extension(t.mimeType)||tt.o.getExtension(t.name),t.service===z.r.s3&&Oa.d.includes(m)&&(d.extension="pdf"),Oa.c.includes(m)&&(d.extension=m,d.loadAsPDF=!0),!t.signedUrl){e.next=26;break}return f=t.signedUrl,Object(Te.a)(i,f,d),e.abrupt("return");case 26:return e.next=28,tt.u.getDocument(t);case 28:f=e.sent,Object(Te.a)(i,f,d);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v()($()(o),"handleFileNotFoundError",(function(e){o.props.openModal({type:U.A.ERROR,title:" Can not open document",confirmButtonTitle:"Pick file",isGoogleModal:!0,nameOfFileRequest:e.name,mimeTypeOfFileRequest:e.mimeType,disableBackdropClick:!0,disableEscapeKeyDown:!0,onAfterPicked:function(){return window.location.reload()}})})),v()($()(o),"onDocumentReady",(function(){var e=ve.default.getAnnotationManager().getAnnotationsList();e.some((function(e){return e instanceof Annotations.WidgetAnnotation}))&&o.config.activeFormField(),e.filter((function(e){return e instanceof window.Annotations.EllipseAnnotation})).forEach((function(e){return e.disableRotationControl()}))})),v()($()(o),"getMergeFeatureLimitUsage",T()(y.a.mark((function e(){var t,n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.props,n=t.currentUser,a=t.currentDocument,e.next=3,p.c.getMergeFeatureLimitUsage({currentDocument:a,currentUser:n});case 3:r=e.sent,o.props.setMergeFeatureLimit(r);case 5:case"end":return e.stop()}}),e)})))),v()($()(o),"handleSyncFileLuminStorage",function(){var e=T()(y.a.mark((function e(t){var n,a,r,i,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.props,a=n.openLoading,r=n.closeLoading,e.prev=1,a(),q.a.emit(V.a.STATUS_SYNC_FILE_TO_S3,{roomId:t._id,isSyncing:!0}),e.next=6,p.c.syncFileToS3(t);case 6:i={type:U.A.SUCCESS,message:"The document is updated",top:130},r(),o.props.openToast(i),q.a.emit(V.a.STATUS_SYNC_FILE_TO_S3,{roomId:t._id,isSyncing:!1}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),r(),s={type:U.A.ERROR,message:"Update process is failed. You can try next time you open document",top:130},o.props.openToast(s);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()),v()($()(o),"setTool",(function(){if("tour"===o.props.match.params.documentId)return null;var e=o.props.currentUser,t=o.currentDocument.documentStatus,n="";n=e?(void 0===t?{}:t).isPremium?Kt.c.PREMIUM:Kt.c.FREE:Kt.c.NO_PLAN,Object(tt.k)(n,o.userRole)})),v()($()(o),"onFieldChanged",function(){var e=T()(y.a.mark((function e(t,n){var a,r,i,s,c,l,u,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.props,i=r.currentUser,s=r.currentDocument,c=ve.default.getAnnotationManager(),e.next=4,c.exportAnnotCommand();case 4:l=e.sent,u=null===(a=t.widgets[0])||void 0===a?void 0:a.Id,d={roomId:s._id,xfdf:l,annotationId:u},i&&(d=Ya(Ya({},d),{},{userId:i._id,email:i.email})),q.a.emit(V.a.ANNOTATION_CHANGE,d);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v()($()(o),"handleDisableAllAnnotations",(function(e,t){var n;if(e&&t&&t.name===window.Tools.ToolNames.REDACTION&&e.name!==window.Tools.ToolNames.REDACTION){var o=ve.default.getAnnotationManager().getAnnotationsList().filter((function(e){return e.Subject===z.g.REDACTION}));ve.default.deleteAnnotations(o)}(null===(n=ve.default.getToolMode())||void 0===n?void 0:n.name)===window.Tools.ToolNames.FREEHAND?Ha(!0):Ha(!1)})),v()($()(o),"getAnnotCommentData",(function(e){var t=e.currentUser,n=e.annotation,o=e.annotationAction,a=ve.default.getAnnotationManager(),r=n.getContents(),i={},s=null,c=st.a.Events.DocumentEvents.DOCUMENT_COMMENTED,l=tt.h.getEmailsFromContent(t,r.trim());return null!==l&&void 0!==l&&l.length&&"delete"!==o&&(i.mentionedEmails=l),n.isReply()&&(s=a.getAnnotationById(n.InReplyTo).Author,c=st.a.Events.DocumentEvents.COMMENT_REPLIED),"delete"===o&&(c=st.a.Events.DocumentEvents.COMMENT_DELETED,s=n.Author),Ya(Ya({},i),{},{content:r,commentInteractionEvent:c,commentAuthor:s})})),v()($()(o),"addAnnotToUndoRedoStack",(function(e,t,n,a,r){if(!(e[0]instanceof window.Annotations.RedactionAnnotation))if(!("Comment"===e[0].Subject&&!e[0].getContents())||"add"!==t&&"delete"!==t){var i=o.emptyCommentAnnot&&"modify"===t?"add":t;o.careTaker.backupAnnotation(e,i,n,a,r),o.emptyCommentAnnot=!1}else o.emptyCommentAnnot=!0})),v()($()(o),"isReadyConnectIdle",(function(){var e=o.props,t=e.currentUser,n=e.currentDocument;return Boolean(n&&(t&&t._id||o.anonymousId))})),v()($()(o),"removeIdle",(function(){var e=o.props,t=e.currentUser,n=e.currentDocument;o.isReadyConnectIdle()&&q.a.emit(V.a.IDLE_USER,{user:{id:t?t._id:o.anonymousId,isActive:!0},documentId:n._id})})),v()($()(o),"addIdle",(function(){var e=o.props,t=e.currentUser,n=e.currentDocument;o.isReadyConnectIdle()&&q.a.emit(V.a.IDLE_USER,{user:{id:t?t._id:o.anonymousId,isActive:!1},documentId:n._id})})),o.state={onlineMembers:[],showAccessUpdateToast:!1,showDocumentUpdateToast:!1,documentStatus:"",pageWillBeDeleted:-1,listPageDeleted:{},pageWillBeCropped:{},isLoadingDocument:!0,isDocumentHasLimitedTime:!1},o.anonymousId=null,o.idleTimer=null,o.isBindAnnotationChanged=!1,o.isDocumentSyncing=!1,o.isManipulationExec=!1,o.careTaker=null,o.config=null,o.bookmarksInstance=null,o.currentxfdf="",o.fieldxfdf=[],o.editedFreeText=-1,o.emptyCommentAnnot=!1,o.loadedAnnot=!1,o.onAnnotationChanged=o.onAnnotationChanged.bind($()(o)),o.onDocumentLoaded=o.onDocumentLoaded.bind($()(o)),o.onAnnotationsLoaded=o.onAnnotationsLoaded.bind($()(o)),o.refetchDocument=o.refetchDocument.bind($()(o)),o.sharedPinpointAttributes=null,o.listIdExternalAnnotations=[],o}return J()(n,[{key:"refetchDocument",value:function(){var e=this,t=this.props,n=t.currentUser,o=t.currentDocument;this.props.client.query({query:ga.i,variables:{documentId:this.props.match.params.documentId},fetchPolicy:"network-only"}).then((function(t){var a=t.data.document;if(a){var r={roleOfDocument:a.roleOfDocument,isGuest:!1};n&&"guest"!==a.roleOfDocument?e.userRole=a.roleOfDocument:(r.roleOfDocument=a.shareSetting.permission,r.isGuest=!0,e.userRole=a.shareSetting.permission);var i=Ya(Ya(Ya({},o),a),r);e.props.setCurrentDocument(i),(i.isPersonal&&i.ownerId===Mn()(n,"_id","")||i.ownerOfTeamDocument)&&ve.default.setIsAdminUser(!0)}})).catch((function(e){console.log(JSON.parse(JSON.stringify(e)))}))}},{key:"componentDidMount",value:function(){var e=T()(y.a.mark((function e(){var t,n,o,a,r,i,s,c,l,u,d,m,f,g,h,b,v,E,C,P,w,j,k,O,_,A,x,S,D,R,I=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.default.enableAllElements=function(){},ve.default.enableElement=function(){},ve.default.enableElements=function(){},this.loadedAnnot=!1,t=!1,n=this.props,o=n.match,a=n.currentUser,r=n.disableElement,i=n.enableElement,s=n.setIsShowTopBar,c=n.resetSubMenu,l=o.params.documentId,u="5cf1b9ee7ba93440bd685ea2"===o.params.documentId||"tour"===o.params.documentId,d=ve.default.getAnnotationManager(),this.config=new Ba,this.bookmarksInstance=new Ia.a,this.careTaker=new Ra.a(d,{disableElement:r,enableElement:i}),this.props.setCareTaker(this.careTaker),ve.default.docViewer.addEventListener("pageComplete",this.onPageComplete),ve.default.docViewer.addEventListener("documentLoaded",this.onDocumentLoaded),ve.default.docViewer.addEventListener("annotationsLoaded",this.onAnnotationsLoaded),ve.default.docViewer.addEventListener("documentReady",this.onDocumentReady),ve.default.docViewer.addEventListener("beforeDocumentLoaded",this.onBeforeDocumentLoaded),ve.default.docViewer.addEventListener("finishedRendering",this.onFinishRendering),ve.default.docViewer.addEventListener("toolModeUpdated",this.handleDisableAllAnnotations),window.addEventListener("message",this.handleMessageDropbox,!1),window.addEventListener("storage",this.handleLocalStorageChange),window.addEventListener("unload",this.onWindowUnload),window.addEventListener("beforeunload",this.onWindowBeforeUnload,{passive:!1}),this.currentDocument={},e.prev=23,"tour"!==l&&"5cf1b9ee7ba93440bd685ea2"!==l||(t=!0),e.next=27,this.props.client.query({query:ga.i,variables:{documentId:t?"5cf1b9ee7ba93440bd685ea2":l},fetchPolicy:"network-only"});case 27:if(!(h=e.sent)){e.next=49;break}if(b=h.data.document,v={roleOfDocument:b.roleOfDocument,isGuest:!1},a&&"guest"!==b.roleOfDocument?this.userRole=b.roleOfDocument:(v.roleOfDocument=b.shareSetting.permission,v.isGuest=!0,this.userRole=b.shareSetting.permission),E=Ya(Ya({},b),v),this.props.setCurrentDocument(E),this.currentDocument=E,this.setupDocumentStatus(),!E.isOverTimeLimit){e.next=38;break}throw new Error("document_has_limited_time");case 38:return e.next=40,PDFNet.initialize("NITROLABS LIMITED(luminPDF.com):OEM:LuminPDF::B+:AMS(20220417):D0B51C530487480A7360B13AC982737860617F7ED708A57544D7C609FDB7F3F25629BEF5C7");case 40:return this.manipulation=E.manipulationStep?JSON.parse(E.manipulationStep):null,C=tt.K.isDocumentTopbarShow(E._id),s(C),this.bookmarksInstance.initialBookmarks(E,a),tt.F.initSignature({isTourDocument:u,type:"init",currentUser:a}),e.next=47,this.loadDocumentToViewer(E);case 47:a?(q.a.emit(V.a.CONNECTION,{roomId:E._id,user:{_id:a._id,name:a.name,avatarRemoteId:a.avatarRemoteId}}),(E.isPersonal&&E.ownerId===this.props.currentUser._id||E.ownerOfTeamDocument)&&ve.default.setIsAdminUser(!0),d.setCurrentUser(a.email)):(P=se()(),this.anonymousId=P,q.a.emit(V.a.CONNECTION,{roomId:E._id,user:{_id:P,name:"Anonymous",avatarRemoteId:null,isActive:!0}}),d.setCurrentUser("Anonymous - ".concat(P))),this.careTaker.initialStack=E.newAnnotations;case 49:w=(null===(m=this.props.currentUser)||void 0===m?void 0:m.payment.customerRemoteId)||"",j=(null===(f=this.props.organizations.data)||void 0===f?void 0:f.map((function(e){return e.organization.payment.customerRemoteId})).filter(Boolean))||[],this.sharedPinpointAttributes={LuminUserId:null===a||void 0===a?void 0:a.clientId,LuminFileId:this.currentDocument._id,StripeCustomerId:j[0]||w,source:this.currentDocument.service,DeviceId:Object(no.a)("_gid")},u&&((k=indexedDB.open("doc-cache")).onupgradeneeded=function(){k.result.objectStoreNames.contains("documents")||k.result.createObjectStore("documents",{keyPath:"documentId"})}),q.a.on(V.b.NEW_COMER,function(){var e=T()(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I.isDocumentSyncing=t.isSyncing;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q.a.on(V.b.MANIPULATION_CHANGE,function(){var e=T()(y.a.mark((function e(t){var n,o,a,r,i,s,c,l,u,d,m;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=I.state.pageWillBeDeleted,o=t.lastModify,a=t.option,r=t.type,i=I.props.thumbs,s=Aa()(t),I.isManipulationExec=!0,r!==U.u.MOVE_PAGE&&r!==U.u.REMOVE_PAGE&&r!==U.u.INSERT_BLANK_PAGE||I.careTaker.clearUndoRedoStack(),-1===n){e.next=21;break}e.t0=r,e.next=e.t0===U.u.MOVE_PAGE?10:e.t0===U.u.REMOVE_PAGE?14:e.t0===U.u.INSERT_BLANK_PAGE?17:20;break;case 10:return c=s.option,l=c.pagesToMove,u=c.insertBeforePage,l>n&&(s.option.pagesToMove-=1),(u>n||u===ve.default.getTotalPages()+1)&&(s.option.insertBeforePage-=1),e.abrupt("break",21);case 14:return d=s.option.pagesRemove[0],n<d&&(s.option.pagesRemove[0]-=1),e.abrupt("break",21);case 17:return m=s.option.insertPages[0],n<m&&(s.option.insertPages[0]-=1),e.abrupt("break",21);case 20:return e.abrupt("break",21);case 21:return I.bookmarksInstance.prevBookmarks=I.bookmarksInstance.bookmarksUser,I.bookmarksInstance.updatePositionOfBookmark(s),e.next=25,tt.y.executeManipulationFromData({data:s,thumbs:i});case 25:I.bookmarksInstance.reGenerateBookmarks(),I.updateListDeletedPage(s.option,r),I.updatePageWillBeCropped(a,r),I.updatePageWillBeDeleted(a,r),I.setState({documentStatus:"Modified ".concat(tt.j.convertToRelativeTime(o))});case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q.a.on(V.b.ANNOTATION_CHANGE,function(){var e=T()(y.a.mark((function e(t){var n,o,a,r,i,s,c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lastModified,o=t.xfdf,a=I.state.pageWillBeDeleted,r=ve.default.getTotalPages(),i=o.indexOf("page=")+6,s=parseInt(o[i]),Number.isInteger(s)&&s+1>r&&(o=o.replace('page="'.concat(s,'"'),'page="'.concat(s-1,'"'))),e.next=8,d.importAnnotCommand(o);case 8:c=e.sent,l=c.map((function(e){var t=e.PageNumber;if(-1!==a&&t!==r&&a<t&&(e.PageNumber-=1),e instanceof window.Annotations.FreeTextAnnotation){var n,o=null===(n=e.getRichTextStyle())||void 0===n?void 0:n[0],i=Object(Ga.a)(e.getContents(),o);i&&(e.setRichTextStyle(i),e.IsModified=!1)}return e instanceof window.Annotations.EllipseAnnotation&&e.disableRotationControl(),e instanceof window.Annotations.RedactionAnnotation&&e.getCustomData(ja.c.APPLIED.key)===ja.c.APPLIED.truthyValue&&ve.default.applyRedactions([e]),e})),document.fonts.onloadingdone=function(){d.drawAnnotationsFromList(l)},d.drawAnnotationsFromList(l),I.setState({documentStatus:"Modified ".concat(tt.j.convertToRelativeTime(n))});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q.a.on(V.b.STATUS_SYNC_FILE_TO_S3,(function(e){if(e.isSyncing){var t={type:U.A.WARNING,title:"The document is being updated by the document owner",message:"This action will take a few minutes.",confirmButtonTitle:"Got it",disableBackdropClick:!0,disableEscapeKeyDown:!0,onConfirm:function(){return I.props.openLoading()}};I.props.openModal(t)}else{var n={type:U.A.SUCCESS,message:"The document is updated",top:130};I.props.closeModal(),I.props.openToast(n)}})),q.a.on(V.b.ONLINE_MEMBERS,(function(e){I.setState({onlineMembers:e.members})})),q.a.on(V.b.CONNECT,(function(){I.props.setIsNetworkDisconnected(!1)})),q.a.on(V.b.DISCONNECT,(function(e){console.log("Disconnected",e),I.props.setIsNetworkDisconnected(!0)})),q.a.on("".concat(V.b.REMOVE_FROM_SHARE_LIST,"-").concat(l),(function(e){var t=e.userId,n=e.linkType,o=I.props,a=o.currentDocument,r=o.setCurrentDocument;if(I.isCurrentUser(t))if("INVITED"===n)I.setState({showAccessUpdateToast:!0});else{var i={roleOfDocument:a.shareSetting.permission,isGuest:!0};I.userRole=a.shareSetting.permission;var s=Ya(Ya({},a),i);r(s),I.currentDocument=s,I.setTool()}})),q.a.on(V.b.REMOVE_ORG_MEMBER,(function(e){var t=e.userId;I.showAccessUpdateToast(t),c()})),q.a.on("".concat(V.b.UPDATE_PERMISSION,"-").concat(l),(function(e){var t=e.userId;I.showAccessUpdateToast(t)})),q.a.on(V.b.CHANGE_TEAM_ROLE,(function(e){var t=e.userId;I.showAccessUpdateToast(t)})),q.a.on("".concat(V.b.REMOVE_DOCUMENT,"-").concat(l),(function(e){var t=e.userId;("DELETE"===e.type||I.isCurrentUser(t))&&(I.setState({showAccessUpdateToast:!0}),c())})),q.a.on("".concat(V.b.MERGED_DOCUMENT,"-").concat(l),(function(e){var t=e.userId,n=e.totalPages;(!I.isCurrentUser(t)||ve.default.getTotalPages()<n)&&I.setState({showDocumentUpdateToast:!0})})),q.a.on(V.b.DELETE_TEAM,(function(e){var t=e.members;(void 0===t?[]:t).includes(a._id)&&c()})),q.a.on("".concat(V.b.REMOVE_TEAMMEMBER),(function(e){var t=e.userId,n=I.props.currentDocument;I.isCurrentUser(t)&&"INVITED"===n.shareSetting.linkType&&(I.setState({showAccessUpdateToast:!0}),c())})),q.a.on("".concat(V.b.CHANGE_SHARE_SETTING),(function(e){var t=e.userIds;(!a||a&&!t.includes(a._id))&&I.setState({showAccessUpdateToast:!0})})),q.a.on(V.b.DELETED_PAGE_UPDATED,(function(e){var t=I.state,n=t.pageWillBeDeleted,o=t.listPageDeleted,a=e.pageDeleted,r=e.undoSignal,i=Ya({},o);-1!==n&&a>n&&(a-=1),r?(I.unLockPage(i[a]),delete i[a],I.props.openToast({type:U.A.WARNING,message:"Page ".concat(a," undone"),top:130})):(i[a]=a,I.lockPage(i[a]),I.props.openToast({type:U.A.WARNING,message:"Page ".concat(a," will be removed"),top:130})),I.setState({listPageDeleted:i})})),null!==(g=this.props.currentDocument)&&void 0!==g&&g.lastModify&&(O=tt.j.convertToRelativeTime(Number(this.props.currentDocument.lastModify))),_=O?"Last update was ".concat(O):"",this.setState({documentStatus:_}),p.c.createOpenDocumentEvent({documentId:this.currentDocument._id}),e.next=95;break;case 76:if(e.prev=76,e.t0=e.catch(23),A=Ta.a.extractGqlError(e.t0),x=A.message,S=A.statusCode,D={message:JSON.stringify(e.t0),reason:wa.a.Document.UNKNOWN_ERROR},S!==U.I.FORBIDDEN&&this.setState({isLoadingDocument:!1}),"document_has_limited_time"!==e.t0.message){e.next=85;break}return jo.a.logError(Ya(Ya({},D),{},{reason:U.t.EVENT.DOCUMENT_LIMITED_TIME})),this.setState({isDocumentHasLimitedTime:!0}),e.abrupt("return");case 85:if(!tt.x.isSigninDriveRequiredError(e.t0)){e.next=88;break}return jo.a.logError(Ya(Ya({},D),{},{reason:U.t.EVENT.GOOGLE_DRIVE_SIGNIN_REQUIRED})),e.abrupt("return",this.handleSignInDriveRequiredError());case 88:if(!tt.x.isUnauthorizedError(e.t0)){e.next=91;break}return jo.a.logError(Ya(Ya({},D),{},{reason:U.t.EVENT.GOOGLE_DRIVE_UNAUTHORIZE})),e.abrupt("return",this.handleUnAuthorizedDriveError(this.currentDocument));case 91:if(!tt.x.isFileNotFoundError(e.t0)){e.next=94;break}return jo.a.logError(Ya(Ya({},D),{},{reason:U.t.EVENT.GOOGLE_DRIVE_DOCUMENT_NOT_FOUND})),e.abrupt("return",this.handleFileNotFoundError(this.currentDocument));case 94:e.t0.graphQLErrors?(jo.a.logError(Ya(Ya({},D),{},{reason:U.t.Service.GRAPHQL_ERROR})),this.handleRequestAccessCheck(S,x)):(jo.a.logError(Ya(Ya({},D),{},{reason:JSON.stringify(e.t0.message)})),R={type:U.A.ERROR,title:" Can not open document",message:e.t0.code&&"googleDrive"===e.t0.type?"The document you are attempting to open may be removed from Google Drive or you may be logged out of Google Drive account.\n               Please make sure the file is still there or if you are logging in the right Google Drive account. (".concat(e.t0.code,")."):"There is troubles while opening this document. Please try again or send us your concern.",cancelButtonTitle:"Try again",confirmButtonTitle:"Send us your question",onCancel:function(){return window.location.reload()},onConfirm:function(){return window.open("".concat(Pa.j,"/contact"))},isFullWidthButton:!0},this.props.openModal(R));case 95:case"end":return e.stop()}}),e,this,[[23,76]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=T()(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isPageEditMode!==this.props.isPageEditMode&&t.isPageEditMode&&this.careTaker.clearUndoRedoStack(),t.organizations.loading&&!this.props.organizations.loading&&this.setupDocumentStatus(),t.isAnyDialogTypeOpen!==this.props.isAnyDialogTypeOpen&&this.props.isAnyDialogTypeOpen&&this.setHoveringRedactionAnnotation(!1),t.isAnyDialogTypeOpen===this.props.isAnyDialogTypeOpen||this.props.isAnyDialogTypeOpen||this.setHoveringRedactionAnnotation(!0);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.recordRenderPDFDocument();var e=this.props,t=e.match,n=e.currentUser,o=t.params.documentId;this.config.destructor(),this.bookmarksInstance.destructorBookmark(),ve.default.removeEventListener("annotationChanged",this.onAnnotationChanged),ve.default.removeEventListener("annotationDoubleClicked",this.onAnnotationDoubleClicked),ve.default.getTool("AnnotationCreateRectangle").removeEventListener("annotationAdded",this.onRectangleOrEllipseAdded),ve.default.getTool("AnnotationCreateEllipse").removeEventListener("annotationAdded",this.onRectangleOrEllipseAdded),ve.default.getTool("AnnotationCreateFreeText").removeEventListener("annotationAdded",this.onFreeTextAdded),ve.default.getTool("AnnotationEraserTool").removeEventListener("erasingAnnotation",this.onCommentDeleted),n&&q.a.emit(V.a.DISCONNECTION,{roomId:o,user:{_id:n._id,name:n.name,avatarRemoteId:n.avatarRemoteId}}),q.a.removeListener("".concat(V.b.NEW_COMER)),q.a.removeListener("".concat(V.b.MANIPULATION_CHANGE)),q.a.removeListener("".concat(V.b.ANNOTATION_CHANGE)),q.a.removeListener("".concat(V.b.ONLINE_MEMBERS)),q.a.removeListener("".concat(V.b.CONNECT)),q.a.removeListener("".concat(V.b.DISCONNECT)),q.a.removeListener("".concat(V.b.REMOVE_FROM_SHARE_LIST,"-").concat(o)),q.a.removeListener("".concat(V.b.UPDATE_PERMISSION,"-").concat(o)),q.a.removeListener("".concat(V.b.CHANGE_TEAM_ROLE)),q.a.removeListener("".concat(V.b.REMOVE_DOCUMENT,"-").concat(o)),q.a.removeListener("".concat(V.b.MERGED_DOCUMENT,"-").concat(o)),q.a.removeListener("".concat(V.b.REMOVE_TEAMMEMBER)),q.a.removeListener("".concat(V.b.CHANGE_SHARE_SETTING)),q.a.removeListener(V.b.DELETED_PAGE_UPDATED),q.a.removeListener(V.b.REMOVE_ORG_MEMBER),window.removeEventListener("message",this.handleMessageDropbox),ve.default.docViewer.removeEventListener("pageComplete",this.onPageComplete),ve.default.docViewer.removeEventListener("documentLoaded",this.onDocumentLoaded),ve.default.docViewer.removeEventListener("annotationsLoaded",this.onAnnotationsLoaded),ve.default.docViewer.removeEventListener("documentReady",this.onDocumentReady),ve.default.docViewer.removeEventListener("beforeDocumentLoaded",this.onBeforeDocumentLoaded),ve.default.docViewer.removeEventListener("finishedRendering",this.onFinishRendering),ve.default.docViewer.removeEventListener("toolModeUpdated",this.handleDisableAllAnnotations),window.removeEventListener("storage",this.handleLocalStorageChange),this.props.setIsNetworkDisconnected(!1),this.props.resetPDFViewer(),this.props.resetDocumentViewer(),this.props.resetCurrentDocument(),window.removeEventListener("beforeunload",this.onWindowBeforeUnload),delete Ia.a.instance}},{key:"onDocumentLoaded",value:function(){var e=T()(y.a.mark((function e(){var t,n,o,a,r,i,s,c=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.currentUser,o=t.currentDocument,a=t.organizations,r=t.userTeams,this.isFreeUser=!n||!a||Object(tt.w)(n,r,a.data)===Kt.k.FREE,this.isFreeUser&&n&&this.getMergeFeatureLimitUsage(),i="5cf1b9ee7ba93440bd685ea2"===this.props.match.params.documentId||"tour"===this.props.match.params.documentId,s=new Promise((function(e,t){var n;if(i){var a=indexedDB.open("doc-cache");a.onsuccess=function(){var t=a.result.transaction("documents","readwrite").objectStore("documents").get("tour");t.onsuccess=function(){var o;n=(null===(o=t.result)||void 0===o?void 0:o.annotations)||[],e(n)}}}else e(o.newAnnotations)}));try{s.then(function(){var e=T()(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.listIdExternalAnnotations=t.map((function(e){return e.annotationId})),ve.default.setZoomLevel(ve.default.getZoom()),ve.default.setPagesUpdatedInternalAnnotationsTransform((function(e,t,n){var o=(new DOMParser).parseFromString(e,"text/xml"),a=o.querySelector("annots");if(a)for(var r=a.children,i=0;i!==r.length;){var s=r[i],l=s.parentElement,u=s.getAttribute("name");c.listIdExternalAnnotations.includes(u)?l.removeChild(s):i++}n((new XMLSerializer).serializeToString(o))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setTool(),o.thumbnail||tt.o.getThumbnailWithDocument(ve.default.getDocument(),{}).then(function(){var e=T()(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt.o.convertThumnailCanvasToFile(t);case 2:n=e.sent,p.c.uploadThumbnail(o._id,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y.a.unRegister(W.d),this.setState({isLoadingDocument:!1})}catch(l){console.log(l),this.props.openModal({type:U.A.ERROR,title:"Open document failed",message:"",onConfirm:function(){return c.props.history.push("/")}})}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteEmptyComment",value:function(e,t){var n=t.filter((function(e){return!e.getContents()}));if(ve.default.deleteAnnotations(n),e.length>0){var o=n.map((function(e){return e.Id})),a=e.filter((function(e){return o.includes(e.getCustomData(ja.b.STICKY_ID.key))}));a.length>0&&ve.default.deleteAnnotations(a)}}},{key:"onAnnotationsLoaded",value:function(){var e=T()(y.a.mark((function e(){var t,n,o,a,r,i,s,c,l,u,d,m,p,f,g,h=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadedAnnot){e.next=43;break}return this.loadedAnnot=!0,t=this.props,n=t.currentUser,o=t.currentTeam,a=t.thumbs,r=t.currentDocument,e.prev=3,i="5cf1b9ee7ba93440bd685ea2"===this.props.match.params.documentId||"tour"===this.props.match.params.documentId,s=new Promise((function(e,t){var n;if(i){var o=indexedDB.open("doc-cache");o.onsuccess=function(){var t=o.result.transaction("documents","readwrite").objectStore("documents").get("tour");t.onsuccess=function(){var o;n=(null===(o=t.result)||void 0===o?void 0:o.annotations)||[],e(n)}}}else e(r.newAnnotations)})),c=ve.default.getAnnotationManager(),e.next=9,s;case 9:if(l=e.sent,!this.manipulation){e.next=30;break}u=Wa(this.manipulation),e.prev=12,u.s();case 14:if((d=u.n()).done){e.next=21;break}return m=d.value,this.isManipulationExec=!0,e.next=19,tt.y.executeManipulationFromData({data:m,thumbs:a,needUpdateThumbnail:!1});case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),u.e(e.t0);case 26:return e.prev=26,u.f(),e.finish(26);case 29:this.isManipulationExec=!1;case 30:c.importAnnotations(r.annotations),l.length>0&&l.forEach((function(e){try{if(e&&e.xfdf){var t=e.xfdf;c.importAnnotCommand(t).then((function(e){var t=e.map((function(e){if(e instanceof window.Annotations.StickyAnnotation&&"#FFFFFF"===e.Color.toHexString()){var t=new window.Annotations.Color(255,230,162,1);e.Color=t}if(e instanceof window.Annotations.FreeTextAnnotation){var n,o=null===(n=e.getRichTextStyle())||void 0===n?void 0:n[0],a=Object(Ga.a)(e.getContents(),o);a&&(e.setRichTextStyle(a),e.IsModified=!1)}return e instanceof window.Annotations.EllipseAnnotation&&e.disableRotationControl(),e}));c.drawAnnotationsFromList(t)}))}}catch(n){console.log(n)}})),(p=c.getAnnotationsList()).length>0&&(f=p.filter((function(e){return e instanceof window.Annotations.RedactionAnnotation&&!(e.getCustomData(ja.c.APPLIED.key)!==ja.c.APPLIED.truthyValue)})))&&ve.default.applyRedactions(f),this.isDocumentSyncing||(this.manipulation&&this.manipulation.length>=35?(g={type:U.A.WARNING,title:"This document is working hard",message:"This document has been modified a lot and needs to be reloaded. This action may take a few minutes.",confirmButtonTitle:"Reload",isFullWidthButton:!0,onConfirm:function(){return h.handleSyncFileLuminStorage(r)}},(r.isPersonal&&r.ownerId===n._id||!r.isPersonal&&"admin"===o.roleOfUser)&&this.props.openModal(g)):(ve.default.addEventListener("annotationChanged",this.onAnnotationChanged),ve.default.addEventListener("annotationDoubleClicked",this.onAnnotationDoubleClicked),ve.default.getTool("AnnotationCreateFreeText").addEventListener("annotationAdded",this.onFreeTextAdded),ve.default.getTool("AnnotationCreateRectangle").addEventListener("annotationAdded",this.onRectangleOrEllipseAdded),ve.default.getTool("AnnotationCreateEllipse").addEventListener("annotationAdded",this.onRectangleOrEllipseAdded),ve.default.getTool("AnnotationEraserTool").addEventListener("erasingAnnotation",this.onCommentDeleted),ve.default.getAnnotationManager().addEventListener("fieldChanged",this.onFieldChanged),ve.default.trigger("native_manipUpdated",[]))),ve.default.scrollViewUpdated(),ve.default.refreshAll(),ve.default.updateView(),e.next=43;break;case 40:e.prev=40,e.t1=e.catch(3),console.log(e.t1);case 43:case"end":return e.stop()}}),e,this,[[3,40],[12,23,26,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAnnotationChanged",value:function(){var e=T()(y.a.mark((function e(t,n,o){var a,r,i,s,c,l,u,d,m,p,f,g,h,b,v,E,C,T,P,j,k,O,_=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.listPageDeleted,r=this.props,i=r.isPageEditMode,s=r.currentDocument,c=r.updateCurrentUser,r.dispatch,l=this.props.currentUser,u=t[0],d="Comment"===u.Subject,m="Signature"===u.Subject,p=w()(t,1),f=p[0].Subject,!(null!==o&&void 0!==o&&o.imported||i||this.isManipulationExec)){e.next=10;break}return this.isManipulationExec=!1,e.abrupt("return");case 10:if("add"!==n){e.next=25;break}if(!d){e.next=15;break}Object(tt.n)(st.a.EventType.COMMENT_CREATED,{source:s.service}),e.next=25;break;case 15:e.t0=f,e.next=e.t0===z.g.HIGHLIGHT?18:e.t0===z.g.SIGNATURE?20:e.t0===z.g.STAMP?22:24;break;case 18:return Object(tt.n)(st.a.EventType.HIGHLIGHT_CREATED),e.abrupt("break",24);case 20:return Object(tt.n)(st.a.EventType.SIGNATURE_CREATED),e.abrupt("break",24);case 22:return Object(tt.n)(st.a.EventType.IMAGE_ADDED),e.abrupt("break",24);case 24:Object(tt.n)(st.a.EventType.ANNOTATION_CREATED,{source:s.service,type:null===(g=ve.default.getToolMode())||void 0===g?void 0:g.name});case 25:if(-1!==this.editedFreeText&&(h=t.find((function(e){return _.editedFreeText===e.PageNumber})))&&(document.getElementById("pageWidgetContainer".concat(h.PageNumber)).style.zIndex=40,this.editedFreeText=-1),0!==(b=t.filter((function(e){return!a[e.PageNumber]}))).length){e.next=29;break}return e.abrupt("return");case 29:return v=ve.default.getAnnotationManager(),e.next=32,v.exportAnnotCommand();case 32:E=e.sent,this.addAnnotToUndoRedoStack(b,n,E,s,l),C=!0,this.setState({documentStatus:z.d.SAVING},(function(){b.forEach((function(e){var t=e.getContents(),o={roomId:s._id,xfdf:E,annotationId:e.Id},a=e.Subject,r="5cf1b9ee7ba93440bd685ea2"===_.props.match.params.documentId||"tour"===_.props.match.params.documentId;if("delete"==n&&(!_.listIdExternalAnnotations.includes(e.Id)&&_.listIdExternalAnnotations.push(e.Id),e.Subject!==z.g.COMMENT&&(a=z.g.REMOVAL,o.shouldCreateEvent=C,C=!1)),e instanceof window.Annotations.RedactionAnnotation){if(e.getCustomData(ja.c.APPLIED.key)!==ja.c.APPLIED.truthyValue)return;ve.default.applyRedactions([e])}if(a===z.g.COMMENT){if(!t||!t.trim())return;o.comment=_.getAnnotCommentData({currentUser:l,annotation:e,annotationAction:n})}if(!e.getCustomData(ja.b.IS_HIGHLIGHT_COMMENT.key)||e.getCustomData(ja.b.HIGHLIGHT_HAS_CONTENT.key)!==ja.b.HIGHLIGHT_HAS_CONTENT.noValue)if(l&&(o=Ya(Ya({},o),{},{annotationType:a,annotationAction:n,userId:l._id,email:l.email})),r){var i=indexedDB.open("doc-cache");i.onsuccess=function(){var e=i.result.transaction("documents","readwrite").objectStore("documents"),t=e.get("tour");t.onsuccess=function(){var n=t.result||{documentId:"tour",annotations:[]},a=n.annotations.filter((function(e){return e.annotationId!==o.annotationId}));"Removal"!==o.annotationType&&a.push(o),e.put(Ya(Ya({},n),{},{annotations:a}))}}}else q.a.emit(V.a.ANNOTATION_CHANGE,o)}))})),setTimeout((function(){_.setState({documentStatus:z.d.UPDATED})}),U.O.SAVE_ANNOT),"delete"===n&&(T=t.filter((function(e){return e.Subject===z.g.COMMENT})),P=t.filter((function(e){return e.Subject===z.g.HIGHLIGHT&&e.getCustomData(ja.b.IS_HIGHLIGHT_COMMENT.key)})),T.length&&ve.default.isUserAdmin()&&(j=T.map((function(e){return l.email!==e.Author?{ownerCommentEmail:e.Author,documentId:s._id,actorId:l._id}:{}})).filter(Boolean),q.a.emit(V.a.DELETE_COMMENT_NOTI,j)),k=ve.default.getAnnotationsList(),P.forEach((function(e){var t=e.getCustomData(ja.b.STICKY_ID.key),n=k.find((function(e){return e.Id===t}));ve.default.deleteAnnotations([n,e])}))),"modify"===n&&m&&(O=Ya(Ya({},l),{},{metadata:Ya(Ya({},l.metadata),{},{hasShownBananaBanner:!0})}),c(O)),this.handleDisableAllAnnotations();case 40:case"end":return e.stop()}}),e,this)})));return function(t,n,o){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.currentDocument,o=t.isNetworkDisconnected,a=this.state,i=a.onlineMembers,s=a.showAccessUpdateToast,c=a.showDocumentUpdateToast,u=a.documentStatus,m=a.listPageDeleted,p=a.pageWillBeCropped,f=a.pageWillBeDeleted,g=a.isLoadingDocument,h=a.isDocumentHasLimitedTime,b={listPageDeleted:m,pageWillBeDeleted:f,pageWillBeCropped:p,bookmarkIns:this.bookmarksInstance,setListPageDeleted:this.setListPageDeleted,setPageWillBeDeleted:this.setPageWillBeDeleted,setPageWillBeCropped:this.setPageWillBeCropped,currentDocument:n,isDocumentHasLimitedTime:h,isLoadingDocument:g};return d.a.createElement(d.a.Fragment,null,s&&d.a.createElement(va.a,null),c&&d.a.createElement(va.a,{title:"Document has been updated."}),!g&&d.a.createElement(Ea.a,{title:"".concat(null===n||void 0===n?void 0:n.name," - Lumin PDF"),noIndex:!0,sharable:!0}),d.a.createElement(ba.a,null),d.a.createElement(r.a,{when:u===z.d.SAVING||o,message:"Leave site? Change you made may not be saved"}),!g&&d.a.createElement(ha.a,null),d.a.createElement(le.a,{ref:function(t){e.idleTimer=t},element:document,onActive:this.removeIdle,onIdle:this.addIdle,debounce:500,events:["mousemove","keydown","wheel","DOMMouseScroll","mouseWheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove","visibilitychange","keypress"],timeout:Ka}),!g&&d.a.createElement(ya.a,null),d.a.createElement(Ca.a,null),d.a.createElement(Ae.a.Provider,{value:b},d.a.createElement(fa,l()({},this.props,{refetchDocument:this.refetchDocument,currentDocument:n,onlineMembers:i,removeEventHandlers:zo.b,documentStatus:u,isLoadingDocument:g}))))}}]),n}(d.a.Component),Ja=Object(a.a)(Object(o.c)((function(e){return{currentUser:i.a.getCurrentUser(e),advanced:i.a.getAdvanced(e),isPageEditMode:i.a.isPageEditMode(e),currentTeam:i.a.getCurrentTeam(e),bookmarks:i.a.getBookmarks(e),thumbs:i.a.getThumbs(e),currentDocument:i.a.getCurrentDocument(e),organizations:i.a.getOrganizationList(e),isCommentPanelOpen:i.a.isElementOpen(e,"rightPanelComment"),isNetworkDisconnected:i.a.getIsNetworkDisconnected(e)}}),(function(e){return{dispatch:e,openLoading:function(){return e(s.a.openElement("loadingModal"))},closeLoading:function(){return e(s.a.closeElement("loadingModal"))},openModal:function(t){return e(s.a.openModal(t))},closeModal:function(){return e(s.a.closeModal())},openRightPanelComment:function(){return e(s.a.openElement("rightPanelComment"))},closeRightPanelComment:function(){return e(s.a.closeElement("rightPanelComment"))},setCurrentDocument:function(t){return e(s.a.setCurrentDocument(t))},resetCurrentDocument:function(){return e(s.a.resetCurrentDocument())},setAdminUser:function(t){return e(s.a.setAdminUser(t))},openToast:function(t){return e(s.a.openToast(t))},setCareTaker:function(t){return e(s.a.setCareTaker(t))},disableElement:function(t){return e(s.a.disableElement(t,ka.a))},enableElement:function(t){return e(s.a.enableElement(t,ka.a))},setIsShowTopBar:function(t){return e(s.a.setIsShowTopBar(t))},resetSubMenu:function(){return e(s.a.resetSubMenu())},resetPDFViewer:function(){return e(s.a.resetViewer())},resetDocumentViewer:function(){return e(s.a.resetDocument())},updateCurrentUser:function(t){return e(s.a.updateCurrentUser(t))},setMergeFeatureLimit:function(t){return e(s.a.setMergeFeatureLimit(t))},setIsNetworkDisconnected:function(t){return e(s.a.setIsNetworkDisconnected(t))}}})),ce.a)(Object(Da.a)(Xa)),Qa=function(e){var t=Object(u.useState)(!0),n=w()(t,2),o=n[0],a=n[1],r=Object(u.useState)(!1),i=w()(r,2),s=i[0],c=i[1],m=Object(u.useState)(null),f=w()(m,2),g=f[0],h=f[1],b=e.location,E=e.history,C=e.currentUser,P=Object(B.i)().open;Object(B.n)(),Object(u.useEffect)((function(){Y.a.register(W.d),Y.a.register(W.e),Y.a.register(W.a),Y.a.register(W.b)}),[]),Object(u.useEffect)((function(){j()}),[b.search]);var j=function(){var e=T()(y.a.mark((function e(){var t,n,o,r,i,s,l,u,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=Object(R.a)(b.search),n=t.token){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,p.a.validateSharingDocumentToken(n);case 6:if(o=e.sent,r=o.documentId,i=o.documentName,s=o.isSignedUp,l=void 0!==s&&s,u=o.linkType,!C){e.next=16;break}return a(!1),E.replace("/viewer/".concat(r)),e.abrupt("return");case 16:if("ANYONE"!==u){e.next=20;break}return a(!1),E.replace("/viewer/".concat(r)),e.abrupt("return");case 20:l?(d=encodeURIComponent("/viewer/".concat(r)),E.push("/authentication/signin?continue=".concat(d))):(h(i),c(!0)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),a(!1);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var t=T()(y.a.mark((function t(n){var o,a,r,i,s,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.name,a=n.url,r=n.settings,i=n.domain,s=p.m.isInternalOrgUser(C.email,i),t.next=4,p.m.isUserLoginWithGoogle();case 4:c=t.sent,r.googleSignIn&&s&&!c&&p.h.forceMemberLoginWithGoogle({orgName:o,modalIcon:d.a.createElement(d.a.Fragment,null,d.a.createElement(S.a,{content:"log-in-with-google",className:"auto-margin",width:68,alt:"modal_image"})),onConfirm:function(){var t=T()(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.updateModalProperties({isProcessing:!0}),t.next=4,p.a.signOut();case 4:n=encodeURIComponent("/org/".concat(a,"/documents")),localStorage.setItem("forceSignInWithGoogle",!0),E.push("/authentication/signin?&continue=".concat(n)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),G.a.openToastMulti({type:U.A.ERROR,message:"Something went wrong"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}()});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var e=T()(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.email,e.prev=1,e.next=4,p.a.forgotPassword(t);case 4:return e.next=6,p.a.signOut();case 6:E.push({pathname:"/authentication/signin",state:{forceResetPassword:!0,email:t}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),G.a.openUnknownErrorToast();case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=T()(y.a.mark((function e(t){var n,o,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,o=t.resetPassword,a=o.isRequired,r=o.actorEmail,a&&p.h.showModalForceResetPassword({actorEmail:r,orgName:n,modalIcon:d.a.createElement(S.a,{content:"force-reset-password",className:"auto-margin",width:68,alt:"modal_image"}),onConfirm:function(){return _()}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var t=T()(y.a.mark((function t(n,o){var a,r,i,s,c,l;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.accountableBy,r=n.refId,i=n.documentId,s=n.data,c=o.showAccessUpdateToast,a===z.a.ORGANIZATION&&(k(s),A(s),e.subcribeUpdateOrganization(r,(l={},v()(l,H.s.GOOGLE_SIGN_IN_SECURITY_UPDATE,{exec:k}),v()(l,H.s.FORCE_RESET_PASSWORD,{exec:A}),l)),q.a.emit(V.a.JOIN_TO_ORG_ROOM,{documentId:i}),q.a.on(V.b.DELETE_ORGANIZATION,(function(){return c()})),q.a.on(V.b.ORG_PAYMENT_UPDATED,(function(e){e.memberIds.includes(C._id)&&c()})));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),D=function(){var t=T()(y.a.mark((function t(n,o){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.subcriptDeleteMultipleDocument(n,(function(e){(null===e||void 0===e?void 0:e.statusCode)===U.I.SUCCEED&&o(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return o&&Object(R.b)(b.search)?d.a.createElement(d.a.Fragment,null,!s&&d.a.createElement(O.a,{fullscreen:!0}),d.a.createElement(L,{open:s,documentName:F.a.getShortFilename(g)})):d.a.createElement(Ja,l()({subcribeEventOnDocument:x,subcribeEventDeleteDocument:D,isAnyDialogTypeOpen:P},e))};Qa.propTypes={location:k.a.object,history:k.a.object,currentUser:k.a.object,subcribeUpdateOrganization:k.a.func,updateModalProperties:k.a.func,subcriptDeleteMultipleDocument:k.a.func},Qa.defaultProps={location:{},history:{},currentUser:{},subcribeUpdateOrganization:function(){},updateModalProperties:function(){},subcriptDeleteMultipleDocument:function(){}};var $a=Qa;t.default=Object(a.a)(Object(o.c)((function(e){return{currentUser:i.a.getCurrentUser(e)}}),(function(e){return{updateModalProperties:function(t){return e(s.a.updateModalProperties(t))}}})),r.l,f,h)($a)},"./src/screens/Viewer/time-tracking.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(r);t.a=new function e(){var t=this;a()(this,e),i()(this,"isExist",(function(e){return Boolean(t.dataTracking[e])})),i()(this,"register",(function(e){t.dataTracking[e]={startTime:(new Date).getTime(),endTime:0}})),i()(this,"unRegister",(function(e){delete t.dataTracking[e]})),i()(this,"finishTracking",(function(e){t.dataTracking[e]&&(t.dataTracking[e].endTime=t.dataTracking[e].endTime||(new Date).getTime())})),i()(this,"trackingTimeOf",(function(e){var n=t.dataTracking[e];return n?(n.endTime||(new Date).getTime())-n.startTime:0})),this.dataTracking={}}},"./src/utils/Factory/EventCollection/ModalEventCollection.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return y}));var o,a=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),r=n.n(a),i=n("./node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(i),c=n("./node_modules/@babel/runtime/helpers/inherits.js"),l=n.n(c),u=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=n.n(u),m=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),p=n.n(m),f=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),g=n.n(f),h=n("./src/constants/awsEvents.js"),b=n("./src/utils/Factory/EventCollection/EventCollection.js");function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return d()(this,n)}}var E={PROMOTION_PROFESSIONAL_FREE_TRIAL:"promotionProfessionalFreeTrial",PROMPT_UPGRADE_PROFESSIONAL_FREE_TRIAL:"promptUpgradeProfessionalFreeTrial",NEW_VIEWER_FEATURE_GUIDE:"newViewerFeatureGuide",USER_PURPOSE_SELECT:"userPurposeSelect",WELCOME_ORGANIZATION_GUIDE:"welcomeOrganizationGuide",ADD_MEMBER_ORGANIZATION_GUIDE:"addMemberOrganizationGuide",MANAGE_ORGANIZATION_TEAM_GUIDE:"manageOrganziationTeamGuide",DASHBOARD_ORGANIZATION_GUIDE:"dashboardOrganizationGuideDone"},y=(o={},g()(o,E.PROMOTION_PROFESSIONAL_FREE_TRIAL,"Prompt user to start professional free trial"),g()(o,E.PROMPT_UPGRADE_PROFESSIONAL_FREE_TRIAL,"Prompt user to start professional free trial in viewer"),g()(o,E.NEW_VIEWER_FEATURE_GUIDE,"Show new feature of viewer guide"),g()(o,E.USER_PURPOSE_SELECT,"Select user purpose"),g()(o,E.WELCOME_ORGANIZATION_GUIDE,"Welcome organization guide"),g()(o,E.ADD_MEMBER_ORGANIZATION_GUIDE,"Add member organization guide"),g()(o,E.MANAGE_ORGANIZATION_TEAM_GUIDE,"Manage organization team guide"),g()(o,E.DASHBOARD_ORGANIZATION_GUIDE,"Done new feature organization guide"),o),C=function(e){l()(n,e);var t=v(n);function n(){return r()(this,n),t.apply(this,arguments)}return s()(n,[{key:"modalViewed",value:function(e){var t={modalName:e.modalName,modalPurpose:e.modalPurpose};return this.record({name:h.a.MODAL.VIEWED,attributes:t})}},{key:"modalDismiss",value:function(e){var t={modalName:e.modalName,modalPurpose:e.modalPurpose};return this.record({name:h.a.MODAL.DISMISS,attributes:t})}},{key:"modalConfirmation",value:function(e){var t={modalName:e.modalName,modalPurpose:e.modalPurpose};return this.record({name:h.a.MODAL.CONFIRMATION,attributes:t})}},{key:"modalHidden",value:function(e){var t={modalName:e.modalName,modalPurpose:e.modalPurpose};return this.record({name:h.a.MODAL.HIDDEN,attributes:t})}}]),n}(b.a);t.c=new C},"./src/utils/ViewerBackManager.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(o),r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(r),s=n("./node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(s),l=n("./src/constants/localStorageKey.js"),u=n("./src/constants/Routers.js"),d=n("./src/redux/store/index.js"),m=n("./src/redux/selectors/index.js"),p=n("./src/constants/UrlSearchParam.js"),f=n("./src/constants/documentConstants.js");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var h=d.a.getState,b=function(){function e(){i()(this,e)}return c()(e,[{key:"getLastUrl",value:function(){return localStorage.getItem(l.a.LAST_ACCESS_DOCUMENT)||"".concat(u.c.DOCUMENTS,"?").concat(p.a.ACTIVED_DOCUMENT_TAB,"=").concat(f.t.INDIVIDUAL)}},{key:"saveLastUrl",value:function(e){var t=e.url,n=e.teamId,o=m.a.getCurrentFolderType(h()),r=o===f.t.TEAMS,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(a()({},p.a.ACTIVED_DOCUMENT_TAB,o),n&&r&&a()({},p.a.TEAM_ID,n)),s=new URLSearchParams(i);return localStorage.setItem(l.a.LAST_ACCESS_DOCUMENT,"".concat(t,"?").concat(s.toString()))}}]),e}();t.a=new b},"./src/utils/errorInterceptor.js":function(e,t,n){"use strict";var o=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(o),r=n("./src/constants/documentConstants.js"),i=n("./src/constants/errorCode.js"),s=n("./src/constants/messages.js"),c=n("./src/utils/error.js");t.a={getAuthErrorMessage:function(e){var t,n=c.a.extractGqlError(e),o=n.code,r=n.metadata;return(t={},a()(t,i.a.User.CREATE_USER_FAIL,s.H),a()(t,i.a.User.EMAIL_ALREADY_EXISTS,s.i),a()(t,i.a.User.EMAIL_IS_BANNED,s.e),a()(t,i.a.User.USER_NOT_VERIFIED,s.u),a()(t,i.a.User.USER_ALREADY_VERIFIED,s.b),a()(t,i.a.User.USER_NOT_FOUND,s.t),a()(t,i.a.User.RESEND_VERIFY_EMAIL_FAIL,s.D),a()(t,i.a.User.THIRD_PARTY_ACCOUNT,s.a),a()(t,i.a.User.DUPLICATE_RECENT_PASSWORD,s.h),a()(t,i.a.User.RESET_PASSWORD_FAIL,s.E),a()(t,i.a.User.RESET_PASSWORD_INVALID_LINK,s.F),a()(t,i.a.User.SAME_OLD_PASSWORD,s.p),a()(t,i.a.User.SIGN_OUT_FAIL,s.F),a()(t,i.a.User.ORGANIZATION_REQUIRE_STRONG_PASSWORD,s.C),a()(t,i.a.User.USER_REQUIRE_STRONG_PASSWORD,s.C),a()(t,i.a.User.INVALID_PASSWORD_INPUT,s.I),a()(t,i.a.Common.REQUEST_ALREADY_SENT,s.B),a()(t,i.a.Common.TOO_MANY_REQUESTS,s.n),a()(t,i.a.Common.TOKEN_EXPIRED,s.j),a()(t,i.a.Common.TOKEN_INVALID,s.m),a()(t,i.a.User.SIGN_IN_FAIL_ATTEMPT_REMAINING,Object(s.R)(r.remainingAttempts)),a()(t,i.a.User.ACCOUNT_BLOCKED,Object(s.Q)(r.blockTime)),t)[o]||s.H},getDocumentErrorMessage:function(e){var t;if(c.a.isRateLimitError(e))return s.g.DAILY_UPLOAD_LIMIT;var n=c.a.extractGqlError(e).code;return(t={},a()(t,i.a.Common.NO_PERMISSION,s.v),a()(t,i.a.Document.CREATE_DOCUMENT_FAIL,s.g.CREATE_FAILED),a()(t,i.a.Document.DOCUMENT_NOT_FOUND,s.g.DOCUMENT_NOT_FOUND),a()(t,i.a.Document.REQUESTER_DOCUMENT_NOT_FOUND,s.g.REQUESTER_DOCUMENT_NOT_FOUND),a()(t,i.a.Document.REQUESTER_DOCUMENT_HAS_BEEN_ADDED,s.g.REQUESTER_DOCUMENT_HAS_BEEN_ADDED),a()(t,i.a.Document.NO_DOCUMENT_PERMISSION,s.g.NO_DOCUMENT_PERMISSION),a()(t,i.a.Document.REQUEST_ACCESS_DOCUMENT_NOT_FOUND,s.g.REQUEST_ACCESS_DOCUMENT_NOT_FOUND),a()(t,i.a.Document.OVER_FILE_SIZE_FREE,Object(s.S)(r.l.FREE)),a()(t,i.a.Document.OVER_FILE_SIZE_PREMIUM,Object(s.S)(r.l.PAID)),t)[n]||s.H},getNotificationErrorMessage:function(e){var t,n=c.a.extractGqlError(e).code;return(t={},a()(t,i.a.Noti.READ_NOTIFICATION_FAIL,s.q.READ_NOTIFICATION_FAIL),a()(t,i.a.Noti.READ_ALL_NOTIFICATIONS_FAIL,s.q.READ_ALL_NOTIFICATIONS_FAIL),t)[n]||s.H},getOrgErrorMessage:function(e){return{}[c.a.extractGqlError(e).code]||s.H}}},"./src/utils/preloadRoute.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("./node_modules/@loadable/component/dist/loadable.esm.js"),a=(n("./node_modules/react-router/esm/react-router.js"),function(e){var t=Object(o.a)(e);return t.preload=e,t})},"./src/utils/validateInvitationToken.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var o=n("./src/constants/tokenType.js"),a=n("./src/utils/validateInvitationToken.js");function r(e){var t=a.a(e),n=t.token,r=t.action;return!!n&&Object.values(o.a).includes(r)}function i(e){var t=new URLSearchParams(e);return{token:t.get("token"),action:t.get("action")}}}},0,[48,50,80]]);